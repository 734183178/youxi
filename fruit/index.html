<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>水果性格测评</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>

  <style>
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: #c1c1c1;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #a8a8a8;
    }

    @media (max-width: 640px) {
      .mobile-text-sm {
        font-size: 0.875rem;
      }

      .mobile-text-base {
        font-size: 1rem;
      }

      .mobile-text-lg {
        font-size: 1.125rem;
      }
    }

    .fruit-gradient {
      background: linear-gradient(135deg,
          #FFF5F7 0%,
          #FFF8E1 25%,
          #F1F8E9 50%,
          #E3F2FD 75%,
          #FCE4EC 100%);
    }

    .dimension-card {
      transition: all 0.3s ease;
    }

    .dimension-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }

    .bounce-in {
      animation: bounceIn 0.6s ease-out;
    }

    @keyframes bounceIn {
      0% {
        transform: scale(0.3);
        opacity: 0;
      }

      50% {
        transform: scale(1.05);
      }

      70% {
        transform: scale(0.9);
      }

      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>

<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    const FruitAssessment = () => {
      const [currentPage, setCurrentPage] = useState('intro');
      const [currentQuestion, setCurrentQuestion] = useState(0);
      const [answers, setAnswers] = useState({});
      const [showHistory, setShowHistory] = useState(false);
      const [historyRecords, setHistoryRecords] = useState([]);
      const chartRef = useRef(null);

      // 隐藏功能：快速测试(10秒内点击标题"水果性格测评"5次激活)
      const [titleClickCount, setTitleClickCount] = useState(0);
      const [clickTime, setClickTime] = useState(null);
      const [showQuickTest, setShowQuickTest] = useState(false);

      // 8个维度配置
      const dimensions = {
        "甜度": {
          name: "甜度",
          icon: "🍬",
          color: "#FF69B4",
          description: "温柔亲和力"
        },
        "酸度": {
          name: "酸度",
          icon: "🍋",
          color: "#FFD700",
          description: "犀利批判性"
        },
        "水分": {
          name: "水分",
          icon: "💧",
          color: "#00CED1",
          description: "情感丰富度"
        },
        "硬度": {
          name: "硬度",
          icon: "💪",
          color: "#8B4513",
          description: "坚韧稳定性"
        },
        "清新感": {
          name: "清新感",
          icon: "🌿",
          color: "#98FB98",
          description: "活力朝气"
        },
        "浓郁度": {
          name: "浓郁度",
          icon: "🎨",
          color: "#FF6347",
          description: "个性张扬度"
        },
        "社交性": {
          name: "社交性",
          icon: "🎉",
          color: "#FFA500",
          description: "适应融入力"
        },
        "独特性": {
          name: "独特性",
          icon: "⭐",
          color: "#DA70D6",
          description: "与众不同"
        }
      };

      // 42道题目 - Part 1 (前21题)
      const questions = [
        // 甜度维度 (1-5)
        {
          id: 1, text: "🎂 朋友过生日，你会：", dimension: "甜度", options: [
            { value: 1, label: 'A', text: '"我来我来！"主动策划惊喜派对' },
            { value: 2, label: 'B', text: '精心准备礼物和祝福' },
            { value: 3, label: 'C', text: '随份子钱，到场就行' },
            { value: 4, label: 'D', text: '"生日快乐"发个红包完事' }
          ]
        },
        {
          id: 2, text: "😭 朋友哭着找你倾诉：", dimension: "甜度", options: [
            { value: 1, label: 'A', text: '立刻抱住安慰"别哭别哭我在"' },
            { value: 2, label: 'B', text: '递纸巾倾听，给建议' },
            { value: 3, label: 'C', text: '"想开点"讲道理分析' },
            { value: 4, label: 'D', text: '"哭啥啊振作点"直男式安慰' }
          ]
        },
        {
          id: 3, text: "🍰 看到别人吃东西：", dimension: "甜度", options: [
            { value: 1, label: 'A', text: '"要不要尝尝我的？"主动分享' },
            { value: 2, label: 'B', text: '如果对方想要，会给一点' },
            { value: 3, label: 'C', text: '我的是我的，你的是你的' },
            { value: 4, label: 'D', text: '"自己买去"护食' }
          ]
        },
        {
          id: 4, text: "💬 聊天时你的语气：", dimension: "甜度", options: [
            { value: 1, label: 'A', text: '"宝贝""亲"满天飞，甜死人' },
            { value: 2, label: 'B', text: '礼貌温和，偶尔加个表情' },
            { value: 3, label: 'C', text: '惜字如金，直来直去' },
            { value: 4, label: 'D', text: '"嗯""哦""好"三连' }
          ]
        },
        {
          id: 5, text: "🎁 收到不喜欢的礼物：", dimension: "甜度", options: [
            { value: 1, label: 'A', text: '"哇太喜欢了！"演技炸裂' },
            { value: 2, label: 'B', text: '"谢谢呀"真诚感谢心意' },
            { value: 3, label: 'C', text: '"嗯还行"诚实反应' },
            { value: 4, label: 'D', text: '"这啥玩意儿"直接吐槽' }
          ]
        },

        // 酸度维度 (6-10)
        {
          id: 6, text: "👀 看到朋友穿了件丑衣服：", dimension: "酸度", options: [
            { value: 1, label: 'A', text: '"emmm...很有个性"委婉暗示' },
            { value: 2, label: 'B', text: '不说话，等TA自己发现' },
            { value: 3, label: 'C', text: '"你确定要穿这个出门？"' },
            { value: 4, label: 'D', text: '"丑死了赶紧换！"直接开喷' }
          ]
        },
        {
          id: 7, text: "📱 朋友发自拍求夸：", dimension: "酸度", options: [
            { value: 1, label: 'A', text: '"美美美！绝世大美女！"彩虹屁走起' },
            { value: 2, label: 'B', text: '"不错呀挺好看的"' },
            { value: 3, label: 'C', text: '"还行吧，角度还可以"' },
            { value: 4, label: 'D', text: '"这张拍糊了，重拍"毒舌' }
          ]
        },
        {
          id: 8, text: "🎬 看完烂片后：", dimension: "酸度", options: [
            { value: 1, label: 'A', text: '"还可以吧，有些地方挺有趣"' },
            { value: 2, label: 'B', text: '不发表意见，沉默' },
            { value: 3, label: 'C', text: '"一般般，浪费钱"' },
            { value: 4, label: 'D', text: '"什么垃圾！导演出来挨打！"' }
          ]
        },
        {
          id: 9, text: "💼 同事炫耀新买的奢侈品：", dimension: "酸度", options: [
            { value: 1, label: 'A', text: '"好好看啊！好羡慕！"' },
            { value: 2, label: 'B', text: '"嗯挺不错的"' },
            { value: 3, label: 'C', text: '"挺贵吧？值吗？"' },
            { value: 4, label: 'D', text: '"这钱不如拿去理财"' }
          ]
        },
        {
          id: 10, text: "🗣️ 有人说了明显错误的话：", dimension: "酸度", options: [
            { value: 1, label: 'A', text: '假装没听见，不戳穿' },
            { value: 2, label: 'B', text: '私下提醒' },
            { value: 3, label: 'C', text: '"这个好像不对吧？"当场指出' },
            { value: 4, label: 'D', text: '"你这完全错了"直接怼回去' }
          ]
        },

        // 水分维度 (11-15)
        {
          id: 11, text: "😢 看感人电影时：", dimension: "水分", options: [
            { value: 1, label: 'A', text: '眼泪哗哗的，哭成泪人' },
            { value: 2, label: 'B', text: '眼眶湿润，偷偷擦眼泪' },
            { value: 3, label: 'C', text: '有点感动，但忍住了' },
            { value: 4, label: 'D', text: '"啥玩意儿，有啥好哭的"' }
          ]
        },
        {
          id: 12, text: "🎵 听到某首老歌：", dimension: "水分", options: [
            { value: 1, label: 'A', text: '瞬间破防，想起当年的事' },
            { value: 2, label: 'B', text: '有点感触，陷入回忆' },
            { value: 3, label: 'C', text: '"嗯这歌挺好听"' },
            { value: 4, label: 'D', text: '无感，纯路过' }
          ]
        },
        {
          id: 13, text: "💔 失恋后你会：", dimension: "水分", options: [
            { value: 1, label: 'A', text: '崩溃大哭，感觉世界末日' },
            { value: 2, label: 'B', text: '难过几天，找朋友倾诉' },
            { value: 3, label: 'C', text: '有点遗憾，但很快调整' },
            { value: 4, label: 'D', text: '"下一个更好"无缝切换' }
          ]
        },
        {
          id: 14, text: "🌅 看到日出/日落美景：", dimension: "水分", options: [
            { value: 1, label: 'A', text: '"太美了！"感动到想哭' },
            { value: 2, label: 'B', text: '拍照发圈，心情很好' },
            { value: 3, label: 'C', text: '"嗯挺好看"' },
            { value: 4, label: 'D', text: '"就这？"无感' }
          ]
        },
        {
          id: 15, text: "📖 读到动人的文字：", dimension: "水分", options: [
            { value: 1, label: 'A', text: '反复读，摘抄下来，共鸣拉满' },
            { value: 2, label: 'B', text: '有共鸣，会点赞收藏' },
            { value: 3, label: 'C', text: '读过就过，没太多感觉' },
            { value: 4, label: 'D', text: '看不懂，矫情' }
          ]
        },

        // 硬度维度 (16-21)
        {
          id: 16, text: "🌪️ 遇到突发困境：", dimension: "硬度", options: [
            { value: 1, label: 'A', text: '立刻冷静分析，快速应对' },
            { value: 2, label: 'B', text: '慌一下但能稳住' },
            { value: 3, label: 'C', text: '很焦虑，需要时间调整' },
            { value: 4, label: 'D', text: '当场破防，需要人安慰' }
          ]
        },
        {
          id: 17, text: "💼 被人误解或冤枉：", dimension: "硬度", options: [
            { value: 1, label: 'A', text: '"误解就误解吧"懒得解释' },
            { value: 2, label: 'B', text: '简单解释，不纠缠' },
            { value: 3, label: 'C', text: '有点委屈，但能接受' },
            { value: 4, label: 'D', text: '玻璃心碎一地，很受伤' }
          ]
        },
        {
          id: 18, text: "🎯 被人批评指责：", dimension: "硬度", options: [
            { value: 1, label: 'A', text: '"你说得对"虚心接受改进' },
            { value: 2, label: 'B', text: '分析对错再决定' },
            { value: 3, label: 'C', text: '有点不爽，但能听进去' },
            { value: 4, label: 'D', text: '立刻反驳"凭什么这么说我"' }
          ]
        },
        {
          id: 19, text: "⚡ 计划突然被打乱：", dimension: "硬度", options: [
            { value: 1, label: 'A', text: '"那就换个方案"灵活调整' },
            { value: 2, label: 'B', text: '有点不爽，但能接受' },
            { value: 3, label: 'C', text: '很焦虑，不喜欢变化' },
            { value: 4, label: 'D', text: '情绪崩溃，很难接受' }
          ]
        },
        {
          id: 20, text: "🏋️ 被人撞了一下：", dimension: "硬度", options: [
            { value: 1, label: 'A', text: '"没事"很淡定' },
            { value: 2, label: 'B', text: '踉跄一下但站稳了' },
            { value: 3, label: 'C', text: '差点摔倒，惊慌失措' },
            { value: 4, label: 'D', text: '直接倒地，需要人扶' }
          ]
        },
        {
          id: 21, text: "💪 面对长期压力：", dimension: "硬度", options: [
            { value: 1, label: 'A', text: '"小意思！"越挫越勇' },
            { value: 2, label: 'B', text: '咬咬牙能扛住' },
            { value: 3, label: 'C', text: '有点崩溃想哭' },
            { value: 4, label: 'D', text: '已经躺平摆烂了' }
          ]
        },

        // 清新感维度 (22-26)
        {
          id: 22, text: "☀️ 早上起床第一件事：", dimension: "清新感", options: [
            { value: 1, label: 'A', text: '"新的一天！冲！"充满活力' },
            { value: 2, label: 'B', text: '伸个懒腰，慢慢清醒' },
            { value: 3, label: 'C', text: '"不想起..."挣扎起床' },
            { value: 4, label: 'D', text: '闹钟响N次才爬起来' }
          ]
        },
        {
          id: 23, text: "🌿 周末你会：", dimension: "清新感", options: [
            { value: 1, label: 'A', text: '爬山、跑步、户外活动' },
            { value: 2, label: 'B', text: '逛街、见朋友，出去走走' },
            { value: 3, label: 'C', text: '宅家刷剧、打游戏' },
            { value: 4, label: 'D', text: '睡到自然醒，继续躺' }
          ]
        },
        {
          id: 24, text: "🍃 你的穿衣风格：", dimension: "清新感", options: [
            { value: 1, label: 'A', text: '清新简约，浅色系为主' },
            { value: 2, label: 'B', text: '舒适随意，怎么舒服怎么来' },
            { value: 3, label: 'C', text: '深色系，低调不出错' },
            { value: 4, label: 'D', text: '随便穿，能遮体就行' }
          ]
        },
        {
          id: 25, text: "💨 面对新事物：", dimension: "清新感", options: [
            { value: 1, label: 'A', text: '"试试看！"立刻尝试' },
            { value: 2, label: 'B', text: '观望一下再决定' },
            { value: 3, label: 'C', text: '没兴趣，懒得了解' },
            { value: 4, label: 'D', text: '拒绝变化，固守旧习' }
          ]
        },
        {
          id: 26, text: "🌊 你的生活节奏：", dimension: "清新感", options: [
            { value: 1, label: 'A', text: '快节奏，充实高效' },
            { value: 2, label: 'B', text: '有张有弛，刚刚好' },
            { value: 3, label: 'C', text: '慢节奏，佛系躺平' },
            { value: 4, label: 'D', text: '能躺就躺，能坐不站' }
          ]
        },

        // 浓郁度维度 (27-31)
        {
          id: 27, text: "👗 你的风格倾向：", dimension: "浓郁度", options: [
            { value: 1, label: 'A', text: '张扬夸张，吸引眼球' },
            { value: 2, label: 'B', text: '有个性，但不过分' },
            { value: 3, label: 'C', text: '低调简约，不出错' },
            { value: 4, label: 'D', text: '透明人，没啥风格' }
          ]
        },
        {
          id: 28, text: "🗣️ 说话方式：", dimension: "浓郁度", options: [
            { value: 1, label: 'A', text: '声音洪亮，肢体语言丰富' },
            { value: 2, label: 'B', text: '语气生动，有感染力' },
            { value: 3, label: 'C', text: '平铺直叙，正常交流' },
            { value: 4, label: 'D', text: '惜字如金，能不说就不说' }
          ]
        },
        {
          id: 29, text: "🎨 选颜色偏好：", dimension: "浓郁度", options: [
            { value: 1, label: 'A', text: '浓郁鲜艳，大红大紫' },
            { value: 2, label: 'B', text: '明亮柔和，彩色系' },
            { value: 3, label: 'C', text: '黑白灰，简单大方' },
            { value: 4, label: 'D', text: '什么都行，无所谓' }
          ]
        },
        {
          id: 30, text: "🎤 KTV包厢里：", dimension: "浓郁度", options: [
            { value: 1, label: 'A', text: '"我先来！"抢麦霸位' },
            { value: 2, label: 'B', text: '点几首喜欢的唱唱' },
            { value: 3, label: 'C', text: '被点名才勉强唱一首' },
            { value: 4, label: 'D', text: '"我不唱我鼓掌"' }
          ]
        },
        {
          id: 31, text: "📸 发朋友圈频率：", dimension: "浓郁度", options: [
            { value: 1, label: 'A', text: '每天都发，记录生活' },
            { value: 2, label: 'B', text: '有事就发，随心所欲' },
            { value: 3, label: 'C', text: '偶尔发发，很少更新' },
            { value: 4, label: 'D', text: '从不发，潜水观察' }
          ]
        },

        // 社交性维度 (32-36)
        {
          id: 32, text: "🎉 电梯里遇到陌生人：", dimension: "社交性", options: [
            { value: 1, label: 'A', text: '"哎你也住这儿啊？"主动搭话' },
            { value: 2, label: 'B', text: '微笑点头，礼貌问好' },
            { value: 3, label: 'C', text: '尴尬微笑，假装看手机' },
            { value: 4, label: 'D', text: '面无表情盯着楼层数字' }
          ]
        },
        {
          id: 33, text: "🍕 公司团建活动：", dimension: "社交性", options: [
            { value: 1, label: 'A', text: '"我来组织游戏！"全场最嗨' },
            { value: 2, label: 'B', text: '参与互动，气氛担当' },
            { value: 3, label: 'C', text: '礼貌参加，低调坐着' },
            { value: 4, label: 'D', text: '"突然身体不适"请假回家' }
          ]
        },
        {
          id: 34, text: "📱 微信群里有人@所有人：", dimension: "社交性", options: [
            { value: 1, label: 'A', text: '第一个跳出来回复' },
            { value: 2, label: 'B', text: '看看情况再决定要不要回' },
            { value: 3, label: 'C', text: '等别人都说完了再冒泡' },
            { value: 4, label: 'D', text: '已读不回，装没看见' }
          ]
        },
        {
          id: 35, text: "🎊 新环境中你的适应方式：", dimension: "社交性", options: [
            { value: 1, label: 'A', text: '主动社交，迅速融入' },
            { value: 2, label: 'B', text: '观察一阵，慢慢接触' },
            { value: 3, label: 'C', text: '等待他人靠近' },
            { value: 4, label: 'D', text: '保持距离，独来独往' }
          ]
        },
        {
          id: 36, text: "🏖️ 假期结束，你的朋友圈：", dimension: "社交性", options: [
            { value: 1, label: 'A', text: '九宫格美照配长文' },
            { value: 2, label: 'B', text: '发几张精选照片' },
            { value: 3, label: 'C', text: '转发别人的，自己懒得发' },
            { value: 4, label: 'D', text: '什么都不发，保持神秘' }
          ]
        },

        // 独特性维度 (37-42)
        {
          id: 37, text: "🍱 菜单上没吃过的菜：", dimension: "独特性", options: [
            { value: 1, label: 'A', text: '"点这个！"尝试新口味' },
            { value: 2, label: 'B', text: '问问服务员怎么样' },
            { value: 3, label: 'C', text: '还是点熟悉的吧' },
            { value: 4, label: 'D', text: '固定就吃那几样' }
          ]
        },
        {
          id: 38, text: "👕 穿衣搭配：", dimension: "独特性", options: [
            { value: 1, label: 'A', text: '追求独特，撞衫是耻辱' },
            { value: 2, label: 'B', text: '有自己风格，但不夸张' },
            { value: 3, label: 'C', text: '跟着大众走，不出错' },
            { value: 4, label: 'D', text: '随便穿，舒服就行' }
          ]
        },
        {
          id: 39, text: "🎭 别人都在做的事：", dimension: "独特性", options: [
            { value: 1, label: 'A', text: '"我偏不"反其道而行' },
            { value: 2, label: 'B', text: '看情况，不盲从' },
            { value: 3, label: 'C', text: '大家都在做，应该没错' },
            { value: 4, label: 'D', text: '随大流，省心' }
          ]
        },
        {
          id: 40, text: "🎨 兴趣爱好：", dimension: "独特性", options: [
            { value: 1, label: 'A', text: '小众冷门，别人没听过' },
            { value: 2, label: 'B', text: '有点特别，但能理解' },
            { value: 3, label: 'C', text: '大众流行，大家都喜欢' },
            { value: 4, label: 'D', text: '没啥特别爱好' }
          ]
        },
        {
          id: 41, text: "🗣️ 表达观点时：", dimension: "独特性", options: [
            { value: 1, label: 'A', text: '语出惊人，观点犀利独特' },
            { value: 2, label: 'B', text: '有自己见解，不随波逐流' },
            { value: 3, label: 'C', text: '中规中矩，不太特别' },
            { value: 4, label: 'D', text: '随大流，别人说啥是啥' }
          ]
        },
        {
          id: 42, text: "🎪 朋友说'我发现一个秘密基地'：", dimension: "独特性", options: [
            { value: 1, label: 'A', text: '"在哪？带我去！"兴奋' },
            { value: 2, label: 'B', text: '"什么基地？"好奇询问' },
            { value: 3, label: 'C', text: '"哦这样啊"淡淡回应' },
            { value: 4, label: 'D', text: '"关我啥事"毫无兴趣' }
          ]
        }
      ];

      // 20种水果类型配置
      const fruitTypes = {
        "草莓": {
          icon: "🍓",
          slogan: "小确幸收集者，甜蜜可人",
          dimensions: ["甜度", "水分", "社交性"],
          description: "你就像一颗新鲜的草莓，甜美可爱，让人忍不住想要亲近。你拥有温柔的性格和丰富的情感，总是能给身边的人带来温暖和快乐。你善于社交，在人群中如鱼得水，是大家的开心果。",
          traits: ["温柔体贴", "情感丰富", "人缘好", "甜美可爱"],
          careers: ["幼教老师", "心理咨询师", "客服专员", "美妆博主", "甜品师"],
          goodMatch: ["西瓜", "橙子", "葡萄"],
          badMatch: ["榴莲", "柠檬"],
          advice: [
            "💝 继续保持你的温柔，但也要学会适当拒绝",
            "🌟 太甜有时也会腻，偶尔展现点个性更迷人",
            "💪 别太在意别人的眼光，你已经很棒了"
          ],
          color: "from-pink-400 to-red-400"
        },
        "水蜜桃": {
          icon: "🍑",
          slogan: "温柔守护者，柔软贴心",
          dimensions: ["甜度", "水分", "硬度"],
          description: "你像水蜜桃一样柔软温润，外表柔弱但内心坚韧。你非常善解人意，总能察觉到别人的情绪变化。虽然看起来需要保护，但在关键时刻你也能展现出惊人的力量。",
          traits: ["善解人意", "细腻敏感", "温柔坚韧", "贴心体贴"],
          careers: ["护士", "社工", "文案策划", "插画师", "儿童教育"],
          goodMatch: ["草莓", "葡萄", "苹果"],
          badMatch: ["榴莲", "椰子"],
          advice: [
            "🌸 你的温柔是优势，别让它成为软弱",
            "💪 多锻炼内心的力量，学会保护自己",
            "✨ 适当展现你的想法，不要总是迁就他人"
          ],
          color: "from-pink-300 to-orange-300"
        },
        "葡萄": {
          icon: "🍇",
          slogan: "团宠小可爱，甜甜软软",
          dimensions: ["甜度", "水分", "社交性"],
          description: "你就像一串紫葡萄，甜美多汁又讨人喜欢。你的性格温和可爱，总是能轻松融入各种圈子。你喜欢抱团取暖，享受和朋友们在一起的时光。",
          traits: ["可爱讨喜", "团队精神", "情绪稳定", "随和友善"],
          careers: ["活动策划", "公关专员", "社群运营", "导游", "主播"],
          goodMatch: ["草莓", "西瓜", "橙子"],
          badMatch: ["火龙果", "榴莲"],
          advice: [
            "🎉 保持你的亲和力，这是你最大的魅力",
            "💎 偶尔也要有自己的主见，别总是随大流",
            "🌟 发展一些独特的技能，让自己更有竞争力"
          ],
          color: "from-purple-400 to-pink-400"
        },
        "椰子": {
          icon: "🥥",
          slogan: "硬核守护者，外刚内柔",
          dimensions: ["硬度", "独特性", "甜度"],
          description: "你就像椰子一样，外壳坚硬但内心柔软。你给人一种难以接近的感觉，但真正了解你的人会发现你内心的温柔。你独立坚强，是值得信赖的依靠。",
          traits: ["坚韧独立", "外冷内热", "值得信赖", "有原则"],
          careers: ["项目经理", "律师", "工程师", "健身教练", "创业者"],
          goodMatch: ["芒果", "牛油果", "西瓜"],
          badMatch: ["草莓", "葡萄"],
          advice: [
            "💪 你的坚强让人敬佩，但也可以偶尔示弱",
            "💝 多展现你温柔的一面，让人更容易靠近",
            "🌈 学会表达情感，不要总是把话憋在心里"
          ],
          color: "from-amber-600 to-stone-500"
        },
        "牛油果": {
          icon: "🥑",
          slogan: "佛系养生家，淡定从容",
          dimensions: ["硬度", "独特性", "清新感"],
          description: "你就像牛油果，健康、淡定、与众不同。你追求生活品质，不随波逐流。你有自己的节奏，不慌不忙地过着自己的小日子。虽然不是人人都能理解你，但懂你的人都知道你的价值。",
          traits: ["淡定从容", "追求品质", "健康主义", "与众不同"],
          careers: ["营养师", "瑜伽教练", "产品经理", "独立设计师", "自由职业"],
          goodMatch: ["蓝莓", "火龙果", "猕猴桃"],
          badMatch: ["西瓜", "橙子"],
          advice: [
            "🧘 保持你的生活节奏，不必迎合所有人",
            "💚 你的独特很珍贵，继续做自己",
            "🌟 适当走出舒适圈，尝试更多可能性"
          ],
          color: "from-green-500 to-lime-600"
        },
        "哈密瓜": {
          icon: "🍈",
          slogan: "厚实老实人，踏实可靠",
          dimensions: ["硬度", "甜度", "水分"],
          description: "你就像哈密瓜，厚实可靠，甜度适中。你是典型的老实人，做事踏实靠谱，虽然不太会表现自己，但总是默默地为身边人付出。",
          traits: ["踏实可靠", "任劳任怨", "朴实真诚", "有耐心"],
          careers: ["会计", "档案管理", "质检员", "物流管理", "技术支持"],
          goodMatch: ["苹果", "橙子", "香蕉"],
          badMatch: ["火龙果", "榴莲"],
          advice: [
            "🌟 你的可靠是优势，但也要学会表现自己",
            "💪 适当争取自己的利益，别总是默默付出",
            "✨ 多展现你的想法，让别人更了解你"
          ],
          color: "from-yellow-400 to-orange-400"
        },
        "西瓜": {
          icon: "🍉",
          slogan: "夏日社交王，热情奔放",
          dimensions: ["社交性", "水分", "清新感"],
          description: "你就像夏天的西瓜，清爽解渴，人气爆棚。你性格外向开朗，走到哪里都能成为焦点。你热情奔放，充满活力，是派对的灵魂人物。",
          traits: ["热情开朗", "人气王", "活力四射", "自来熟"],
          careers: ["销售", "活动策划", "主持人", "旅游博主", "公关"],
          goodMatch: ["橙子", "草莓", "芒果"],
          badMatch: ["榴莲", "牛油果"],
          advice: [
            "🎉 保持你的热情，这是你最大的魅力",
            "💭 注意倾听别人，不要只顾自己开心",
            "🌟 学会在热闹和安静之间找平衡"
          ],
          color: "from-red-500 to-green-500"
        },
        "芒果": {
          icon: "🥭",
          slogan: "热带风情家，浓烈热情",
          dimensions: ["浓郁度", "甜度", "独特性"],
          description: "你就像热带芒果，浓烈香甜，魅力四射。你个性张扬，敢爱敢恨，从不掩饰自己的情感。你的存在感很强，总是能给人留下深刻印象。",
          traits: ["个性鲜明", "热情如火", "敢爱敢恨", "魅力十足"],
          careers: ["演员", "歌手", "艺术家", "创意总监", "时尚博主"],
          goodMatch: ["西瓜", "橙子", "椰子"],
          badMatch: ["苹果", "青苹果"],
          advice: [
            "🔥 你的热情很迷人，但也要学会控制火候",
            "💎 保持个性的同时，也要顾及他人感受",
            "🌈 你已经够耀眼了，不需要过度表现"
          ],
          color: "from-yellow-500 to-orange-600"
        },
        "橙子": {
          icon: "🍊",
          slogan: "阳光开朗派，活力满满",
          dimensions: ["清新感", "社交性", "甜度"],
          description: "你就像橙子，阳光、开朗、充满正能量。你总是保持积极的心态，能够给身边人带来欢乐和希望。你善于社交，人缘极佳，是团队中的开心果。",
          traits: ["阳光积极", "正能量", "亲和力强", "乐观向上"],
          careers: ["老师", "培训师", "客服经理", "HR", "健康管理师"],
          goodMatch: ["西瓜", "草莓", "苹果"],
          badMatch: ["柠檬", "榴莲"],
          advice: [
            "☀️ 保持你的阳光，世界需要更多正能量",
            "💪 也要允许自己偶尔低落，不必强颜欢笑",
            "🌟 你的乐观是天赋，但也要正视问题"
          ],
          color: "from-orange-400 to-yellow-500"
        },

        "柠檬": {
          icon: "🍋",
          slogan: "毒舌小可爱，刀子嘴豆腐心",
          dimensions: ["酸度", "清新感", "独特性"],
          description: "你就像柠檬，酸爽犀利但清新怡人。你说话直接，有时候会不小心伤到人，但其实你心地善良，只是不太会表达。你的毒舌背后藏着满满的关心。",
          traits: ["直言不讳", "犀利幽默", "外冷内热", "清新脱俗"],
          careers: ["编辑", "评论员", "脱口秀演员", "产品经理", "媒体人"],
          goodMatch: ["橙子", "西瓜", "青苹果"],
          badMatch: ["草莓", "水蜜桃"],
          advice: [
            "🍋 你的真诚很可贵，但说话可以更温柔一些",
            "💛 让别人看到你柔软的一面，不要总是硬邦邦",
            "🌟 学会用更温和的方式表达关心"
          ],
          color: "from-yellow-300 to-lime-400"
        },
        "蓝莓": {
          icon: "🫐",
          slogan: "小清新文艺家，低调有内涵",
          dimensions: ["清新感", "独特性", "硬度"],
          description: "你就像蓝莓，小巧精致，低调有内涵。你不喜欢喧闹，更享受安静的独处时光。你有自己的审美和品味，追求精神上的满足。",
          traits: ["文艺气质", "低调内敛", "有品味", "独立思考"],
          careers: ["作家", "摄影师", "图书管理员", "咖啡师", "独立设计师"],
          goodMatch: ["牛油果", "猕猴桃", "火龙果"],
          badMatch: ["西瓜", "芒果"],
          advice: [
            "📚 保持你的文艺范儿，这是你的独特魅力",
            "🌟 适当走出自己的小世界，多和外界交流",
            "💙 你的内涵很珍贵，但也可以适当展现"
          ],
          color: "from-blue-400 to-indigo-500"
        },
        "青苹果": {
          icon: "🍏",
          slogan: "元气少年/女，清爽活力",
          dimensions: ["清新感", "酸度", "社交性"],
          description: "你就像青苹果，清新爽口，充满青春活力。你朝气蓬勃，对生活充满热情。你既有柠檬的清新，又有苹果的亲和力，是大家眼中的元气担当。",
          traits: ["青春活力", "清新自然", "朝气蓬勃", "健康向上"],
          careers: ["健身教练", "体育老师", "运动博主", "户外领队", "营养师"],
          goodMatch: ["橙子", "柠檬", "西瓜"],
          badMatch: ["榴莲", "椰子"],
          advice: [
            "💚 保持你的活力，永远年轻的心态",
            "🌟 注意劳逸结合，不要把自己累坏",
            "✨ 你的正能量很感染人，继续发光"
          ],
          color: "from-green-400 to-lime-500"
        },
        "火龙果": {
          icon: "🐉",
          slogan: "神秘艺术家，外表惊艳",
          dimensions: ["独特性", "浓郁度", "硬度"],
          description: "你就像火龙果，外表惊艳，内心独特。你不走寻常路，总是能给人惊喜。你有强烈的个人风格，不在乎别人的眼光，坚持做自己。",
          traits: ["独特个性", "艺术气质", "神秘感", "创意十足"],
          careers: ["艺术家", "设计师", "造型师", "独立音乐人", "创意总监"],
          goodMatch: ["牛油果", "蓝莓", "猕猴桃"],
          badMatch: ["苹果", "橙子"],
          advice: [
            "🎨 你的独特是宝藏，继续坚持自我",
            "💎 也要学会适应社会，不要太过另类",
            "🌟 找到欣赏你的圈子，不必迎合所有人"
          ],
          color: "from-pink-500 to-purple-600"
        },
        "香蕉": {
          icon: "🍌",
          slogan: "搞怪喜剧人，幽默逗比",
          dimensions: ["社交性", "甜度", "浓郁度"],
          description: "你就像香蕉，自带笑点，是人群中的开心果。你幽默风趣，总能用搞笑化解尴尬。你不拘小节，活得轻松自在，是大家的快乐源泉。",
          traits: ["幽默搞笑", "乐观开朗", "自来熟", "不拘小节"],
          careers: ["喜剧演员", "段子手", "视频博主", "娱乐主持", "活动策划"],
          goodMatch: ["西瓜", "橙子", "葡萄"],
          badMatch: ["蓝莓", "火龙果"],
          advice: [
            "😄 你的幽默是天赋，继续给大家带来欢乐",
            "💛 注意场合分寸，不是所有时候都适合搞笑",
            "🌟 也要有严肃的一面，让人看到你的深度"
          ],
          color: "from-yellow-400 to-yellow-600"
        },
        "菠萝": {
          icon: "🍍",
          slogan: "外刺内甜派，看似难相处",
          dimensions: ["酸度", "甜度", "硬度"],
          description: "你就像菠萝，外表带刺但内心香甜。你给人的第一印象可能不太好接近，但深入了解后会发现你的可爱。你有原则有底线，但对朋友非常真诚。",
          traits: ["外冷内热", "有原则", "真诚可靠", "酸甜平衡"],
          careers: ["律师", "审计师", "质量管理", "编辑", "独立顾问"],
          goodMatch: ["椰子", "柠檬", "芒果"],
          badMatch: ["草莓", "葡萄"],
          advice: [
            "🍍 你的保护壳是必要的，但也可以适当柔软",
            "💛 让朋友看到你温柔的一面",
            "🌟 第一印象很重要，可以稍微友善一些"
          ],
          color: "from-yellow-500 to-orange-500"
        },
        "榴莲": {
          icon: "🥴",
          slogan: "爱恨分明者，爱我的爱死",
          dimensions: ["独特性", "浓郁度", "硬度"],
          description: "你就像榴莲，要么爱死要么恨死，没有中间地带。你个性极强，从不妥协，坚持做自己。你知道自己不可能让所有人喜欢，但你不在乎，因为懂你的人自然会留下。",
          traits: ["个性极强", "坚持自我", "爱憎分明", "不随波逐流"],
          careers: ["独立创业", "艺术家", "意见领袖", "独立作家", "另类设计师"],
          goodMatch: ["火龙果", "椰子", "菠萝"],
          badMatch: ["草莓", "苹果", "橙子"],
          advice: [
            "👑 你的坚持很可贵，但也要学会变通",
            "💪 不是所有人都能理解你，这很正常",
            "🌟 找到你的圈子，不必强求融入主流"
          ],
          color: "from-yellow-600 to-amber-700"
        },
        "椰青": {
          icon: "🥥",
          slogan: "佛系躺平家，与世无争",
          dimensions: ["硬度", "清新感", "水分"],
          description: "你就像椰青，清凉解渴，与世无争。你的生活哲学是'躺平即正义'，不争不抢，随遇而安。你看淡名利，追求内心的平静和自由。",
          traits: ["佛系淡定", "与世无争", "清心寡欲", "随遇而安"],
          careers: ["自由职业", "冥想教练", "民宿老板", "独立撰稿人", "手工艺人"],
          goodMatch: ["牛油果", "蓝莓", "猕猴桃"],
          badMatch: ["西瓜", "芒果", "榴莲"],
          advice: [
            "🥥 你的佛系是智慧，但也要有追求",
            "💚 适度的努力不是坏事，别真的躺太平",
            "🌟 平衡躺平和进取，找到自己的节奏"
          ],
          color: "from-teal-400 to-cyan-500"
        },
        "猕猴桃": {
          icon: "🥝",
          slogan: "低调潜力股，内在丰富",
          dimensions: ["独特性", "硬度", "酸度"],
          description: "你就像猕猴桃，其貌不扬但内在丰富。你不追求外在的华丽，更注重内涵的培养。你是典型的潜力股，假以时日必定大放异彩。",
          traits: ["低调内敛", "内涵丰富", "潜力无限", "厚积薄发"],
          careers: ["研究员", "数据分析", "程序员", "投资顾问", "专业顾问"],
          goodMatch: ["牛油果", "蓝莓", "火龙果"],
          badMatch: ["芒果", "西瓜"],
          advice: [
            "🥝 你的内涵是财富，但也可以适当展现",
            "💚 不要太低调，让别人看到你的才华",
            "🌟 你比自己想象的更优秀，要有自信"
          ],
          color: "from-green-600 to-lime-600"
        },
        "红苹果": {
          icon: "🍎",
          slogan: "全能优等生，经典百搭",
          dimensions: ["甜度", "社交性", "硬度"],
          description: "你就像红苹果，经典、可靠、人人喜欢。你各方面都很均衡，是大家公认的好人。你不偏激不极端，为人处世恰到好处，是最让人放心的类型。",
          traits: ["均衡发展", "可靠稳重", "人缘好", "适应力强"],
          careers: ["管理岗", "行政", "人力资源", "教师", "顾问"],
          goodMatch: ["橙子", "葡萄", "哈密瓜"],
          badMatch: ["榴莲", "火龙果"],
          advice: [
            "🍎 你的平衡很好，但也可以有点锋芒",
            "💪 不要为了迎合别人而失去自我",
            "🌟 偶尔做点出格的事，给大家惊喜"
          ],
          color: "from-red-400 to-pink-500"
        },
        "橘子": {
          icon: "🍊",
          slogan: "亲民好相处，平易近人",
          dimensions: ["社交性", "甜度", "清新感"],
          description: "你就像橘子，亲切友善，容易剥开。你没有架子，平易近人，和你在一起很舒服。你是那种让人一见如故的类型，走到哪里都受欢迎。",
          traits: ["平易近人", "亲和力强", "好相处", "接地气"],
          careers: ["客户服务", "社区工作", "销售", "公关", "导游"],
          goodMatch: ["苹果", "西瓜", "葡萄"],
          badMatch: ["榴莲", "火龙果"],
          advice: [
            "🍊 你的亲和力是宝藏，继续保持",
            "💛 也要有自己的立场，不要太好说话",
            "🌟 适当展现专业性，让人更尊重你"
          ],
          color: "from-orange-400 to-yellow-400"
        }
      };

      // 评分选项（通用，每题一样）
      const defaultOptions = [
        { value: 5, label: 'A', text: '非常符合' },
        { value: 4, label: 'B', text: '比较符合' },
        { value: 3, label: 'C', text: '一般' },
        { value: 2, label: 'D', text: '不太符合' },
        { value: 1, label: 'E', text: '完全不符合' }
      ];

      // 处理标题点击 - 激活隐藏功能
      const handleTitleClick = () => {
        const now = Date.now();

        if (clickTime && now - clickTime > 10000) {
          setTitleClickCount(1);
          setClickTime(now);
        } else {
          const newCount = titleClickCount + 1;
          setTitleClickCount(newCount);
          setClickTime(now);

          if (newCount === 5) {
            setShowQuickTest(true);
            setTitleClickCount(0);
          }
        }
      };

      // 快速测试 - 自动填充答案并显示结果
      const handleQuickTest = () => {
        const quickAnswers = {};
        questions.forEach(q => {
          quickAnswers[q.id] = Math.floor(Math.random() * 5) + 1;
        });

        setAnswers(quickAnswers);
        saveResult(quickAnswers);
        setCurrentPage('result');
      };

      // 加载历史记录
      useEffect(() => {
        loadHistory();
      }, []);

      const loadHistory = () => {
        try {
          const records = [];
          for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            if (key && key.startsWith('fruit_test_')) {
              try {
                const data = localStorage.getItem(key);
                if (data) {
                  records.push(JSON.parse(data));
                }
              } catch (e) {
                console.log('读取记录失败:', key);
              }
            }
          }
          records.sort((a, b) => b.timestamp - a.timestamp);
          setHistoryRecords(records);
        } catch (error) {
          console.log('历史记录功能暂不可用:', error);
        }
      };

      const handleStartTest = () => {
        setCurrentPage('test');
        setCurrentQuestion(0);
        setAnswers({});
      };

      const handleAnswer = (value) => {
        const newAnswers = { ...answers, [questions[currentQuestion].id]: value };
        setAnswers(newAnswers);

        if (currentQuestion < questions.length - 1) {
          setCurrentQuestion(currentQuestion + 1);
        } else {
          saveResult(newAnswers);
          setCurrentPage('result');
        }
      };

      const saveResult = (finalAnswers) => {
        const results = calculateResults(finalAnswers);
        const record = {
          timestamp: Date.now(),
          answers: finalAnswers,
          results: results
        };

        try {
          localStorage.setItem(
            `fruit_test_${Date.now()}`,
            JSON.stringify(record)
          );
          loadHistory();
        } catch (error) {
          console.log('保存失败:', error);
        }
      };

      const calculateResults = (finalAnswers = answers) => {
        const dimensionScores = {};

        Object.keys(dimensions).forEach(dim => {
          dimensionScores[dim] = 0;
        });

        questions.forEach(q => {
          const score = finalAnswers[q.id] || 0;
          dimensionScores[q.dimension] += score;
        });

        const dimensionAvgScores = {};
        const dimensionCounts = {};

        questions.forEach(q => {
          dimensionCounts[q.dimension] = (dimensionCounts[q.dimension] || 0) + 1;
        });

        Object.keys(dimensions).forEach(dim => {
          const count = dimensionCounts[dim] || 1;
          dimensionAvgScores[dim] = (dimensionScores[dim] / count).toFixed(1);
        });

        const sortedDimensions = Object.entries(dimensionAvgScores)
          .sort(([, a], [, b]) => parseFloat(b) - parseFloat(a));

        const topDimensions = sortedDimensions.slice(0, 3);
        const fruitType = determineFruitType(topDimensions, dimensionAvgScores);

        return {
          dimensionScores,
          dimensionAvgScores,
          topDimensions,
          fruitType
        };
      };

      const determineFruitType = (topDimensions, allScores) => {
        const top3Names = topDimensions.map(([name]) => name);

        let bestMatch = null;
        let bestScore = 0;

        for (const [fruitName, fruitInfo] of Object.entries(fruitTypes)) {
          if (fruitInfo.dimensions && fruitInfo.dimensions.length > 0) {
            let matchScore = 0;

            fruitInfo.dimensions.forEach(dim => {
              if (top3Names.includes(dim)) {
                matchScore += 2;
              }
              matchScore += parseFloat(allScores[dim] || 0) * 0.1;
            });

            if (matchScore > bestScore) {
              bestScore = matchScore;
              bestMatch = fruitName;
            }
          }
        }

        return bestMatch || "红苹果";
      };

      // 雷达图渲染
      useEffect(() => {
        if (currentPage === 'result' && chartRef.current && typeof Chart !== 'undefined') {
          const results = calculateResults();
          const ctx = chartRef.current.getContext('2d');

          const existingChart = Chart.getChart(ctx);
          if (existingChart) {
            existingChart.destroy();
          }

          const dimensionNames = Object.keys(dimensions);
          const chartData = dimensionNames.map(dim =>
            parseFloat(results.dimensionAvgScores[dim])
          );

          try {
            new Chart(ctx, {
              type: 'radar',
              data: {
                labels: dimensionNames,
                datasets: [{
                  label: '您的得分',
                  data: chartData,
                  borderColor: 'rgba(255, 105, 180, 1)',
                  backgroundColor: 'rgba(255, 105, 180, 0.2)',
                  pointBackgroundColor: dimensionNames.map(dim => dimensions[dim].color),
                  pointBorderColor: '#fff',
                  pointHoverBackgroundColor: '#fff',
                  pointHoverBorderColor: dimensionNames.map(dim => dimensions[dim].color),
                  pointRadius: 5,
                  pointHoverRadius: 7
                }]
              },
              options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                  r: {
                    beginAtZero: true,
                    max: 5,
                    ticks: {
                      stepSize: 1,
                      font: {
                        size: 12
                      }
                    },
                    pointLabels: {
                      font: {
                        size: 11
                      }
                    }
                  }
                },
                plugins: {
                  legend: {
                    display: false
                  }
                }
              }
            });
          } catch (error) {
            console.log('图表创建失败:', error);
          }
        }
      }, [currentPage, answers]);

      const copyResultText = () => {
        const results = calculateResults();
        const typeInfo = fruitTypes[results.fruitType];

        const text = `🍓 我的水果性格测评结果出炉啦！

我是【${results.fruitType}】型水果 ${typeInfo.icon}

✨ 我的性格标签：
${typeInfo.slogan}

💫 优势维度：
${results.topDimensions.map(([dim, score], index) =>
          `${index + 1}. ${dimensions[dim].icon} ${dim} ${score}分`
        ).join('\n')}

${typeInfo.description}

适合方向：${typeInfo.careers.slice(0, 3).join('、')}

#水果性格测评 #性格测试 #自我探索`;

        navigator.clipboard.writeText(text).then(() => {
          alert('结果已复制到剪贴板！');
        }).catch(() => {
          alert('复制失败，请手动复制');
        });
      };

      // 介绍页渲染
      const renderIntro = () => (
        <div className="min-h-screen fruit-gradient p-3 sm:p-6">
          <div className="max-w-4xl mx-auto bg-white rounded-2xl shadow-xl p-4 sm:p-8">
            <div className="text-center mb-6 sm:mb-8">
              <div className="text-5xl sm:text-7xl mb-4 bounce-in">🍓🍊🍋🍉</div>
              <h1
                onClick={handleTitleClick}
                className="text-2xl sm:text-4xl font-bold bg-gradient-to-r from-pink-500 via-orange-500 to-green-500 bg-clip-text text-transparent mb-2 sm:mb-4 cursor-pointer select-none"
                style={{ userSelect: 'none' }}
              >
                水果性格测评
              </h1>
              <p className="text-sm sm:text-base text-gray-600">发现你的水果人格 · 找到最真实的自己</p>
            </div>

            <div className="space-y-4 sm:space-y-6 text-gray-700 leading-relaxed text-sm sm:text-base mb-8">
              <div className="bg-gradient-to-r from-pink-50 via-orange-50 to-yellow-50 border border-pink-200 rounded-xl p-4 sm:p-6">
                <h3 className="text-lg sm:text-xl font-bold mb-3 text-pink-800">✨ 测评说明</h3>
                <ul className="space-y-2 text-pink-700">
                  <li>• 本测评基于8个性格维度，评估你的水果人格特质</li>
                  <li>• 共42道题目，预计5-8分钟完成</li>
                  <li>• 请根据真实感受作答，选择最符合你的选项</li>
                  <li>• 结果会自动保存，支持查看历史记录</li>
                </ul>
              </div>

              <div className="grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4">
                {Object.entries(dimensions).map(([key, dim]) => (
                  <div key={key} className="dimension-card bg-white border-2 rounded-lg p-3 text-center" style={{ borderColor: dim.color }}>
                    <div className="text-3xl mb-2">{dim.icon}</div>
                    <div className="font-semibold text-sm" style={{ color: dim.color }}>{dim.name}</div>
                    <div className="text-xs text-gray-500 mt-1">{dim.description}</div>
                  </div>
                ))}
              </div>

              <div className="bg-gradient-to-r from-yellow-50 to-orange-50 border border-orange-200 rounded-xl p-4">
                <h3 className="text-lg font-bold mb-3 text-orange-800">🍊 你可能是以下水果之一：</h3>
                <div className="flex flex-wrap gap-2">
                  {Object.entries(fruitTypes).slice(0, 12).map(([name, info]) => (
                    <span key={name} className="bg-white px-3 py-1 rounded-full text-sm border border-orange-200">
                      {info.icon} {name}
                    </span>
                  ))}
                  <span className="text-gray-400 px-3 py-1">还有更多...</span>
                </div>
              </div>
            </div>

            <div className="flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center items-center">
              <button
                onClick={handleStartTest}
                className="w-full sm:w-auto bg-gradient-to-r from-pink-500 via-orange-500 to-yellow-500 hover:from-pink-600 hover:via-orange-600 hover:to-yellow-600 text-white font-bold py-4 px-8 rounded-xl text-lg transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105"
              >
                🚀 开始测评 (42题)
              </button>

              {historyRecords.length > 0 && (
                <button
                  onClick={() => setShowHistory(!showHistory)}
                  className="w-full sm:w-auto bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-4 px-8 rounded-xl transition-colors"
                >
                  📊 查看历史记录 ({historyRecords.length})
                </button>
              )}

              {showQuickTest && (
                <button
                  onClick={handleQuickTest}
                  className="w-full sm:w-auto bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-4 px-8 rounded-xl text-lg transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 border-2 border-yellow-300 animate-pulse"
                  title="彩蛋功能：一键生成随机结果"
                >
                  ⚡ 快速测试
                </button>
              )}
            </div>

            {showHistory && historyRecords.length > 0 && (
              <div className="mt-6 bg-gray-50 rounded-xl p-4 fade-in">
                <h3 className="font-bold text-lg mb-3">历史测评记录</h3>
                <div className="space-y-2 max-h-64 overflow-y-auto">
                  {historyRecords.map((record, index) => (
                    <div key={index} className="bg-white p-3 rounded-lg border flex justify-between items-center hover:shadow-md transition-shadow">
                      <div>
                        <div className="font-semibold">{record.results.fruitType}</div>
                        <div className="text-sm text-gray-500">
                          {new Date(record.timestamp).toLocaleString('zh-CN')}
                        </div>
                      </div>
                      <div className="text-3xl">
                        {fruitTypes[record.results.fruitType]?.icon}
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            )}
          </div>
        </div>
      );

      // 测试页渲染
      const renderTest = () => {
        const currentQ = questions[currentQuestion];
        const dimInfo = dimensions[currentQ.dimension];
        const questionOptions = currentQ.options || defaultOptions;

        return (
          <div className="min-h-screen fruit-gradient p-3 sm:p-6">
            <div className="max-w-2xl mx-auto bg-white rounded-2xl shadow-xl p-4 sm:p-8 fade-in">
              <div className="mb-6 sm:mb-8">
                <div className="flex items-center justify-between mb-4">
                  <div className="flex items-center space-x-2">
                    <span className="text-2xl">{dimInfo.icon}</span>
                    <span className="font-semibold text-gray-700">{dimInfo.name}</span>
                  </div>
                  <div className="text-right">
                    <div className="text-lg sm:text-xl font-bold" style={{ color: dimInfo.color }}>
                      第 {currentQuestion + 1} 题
                    </div>
                    <div className="text-xs sm:text-sm text-gray-500">共 42 题</div>
                  </div>
                </div>

                <div className="w-full bg-gray-200 rounded-full h-2">
                  <div
                    className="h-2 rounded-full transition-all duration-300"
                    style={{
                      width: `${((currentQuestion + 1) / 42) * 100}%`,
                      background: `linear-gradient(90deg, ${dimInfo.color}, ${dimInfo.color}dd)`
                    }}
                  ></div>
                </div>
                <div className="text-xs sm:text-sm text-gray-500 mt-1 text-right">
                  {((currentQuestion + 1) / 42 * 100).toFixed(0)}% 完成
                </div>
              </div>

              <div className="mb-8">
                <h3 className="text-lg sm:text-2xl font-medium text-gray-800 text-center mb-8 leading-relaxed px-2">
                  {currentQ.text}
                </h3>

                <div className="space-y-3">
                  {questionOptions.map(option => (
                    <button
                      key={option.value}
                      onClick={() => handleAnswer(option.value)}
                      className="w-full text-left p-4 border-2 border-gray-200 rounded-xl hover:border-pink-400 hover:bg-pink-50 transition-all duration-200 transform hover:scale-[1.02]"
                      style={{
                        borderColor: answers[currentQ.id] === option.value ? dimInfo.color : undefined,
                        backgroundColor: answers[currentQ.id] === option.value ? `${dimInfo.color}15` : undefined
                      }}
                    >
                      <div className="flex items-center">
                        <span
                          className="font-bold text-lg w-8 h-8 rounded-full flex items-center justify-center mr-4"
                          style={{
                            backgroundColor: `${dimInfo.color}20`,
                            color: dimInfo.color
                          }}
                        >
                          {option.label}
                        </span>
                        <span className="text-base text-gray-800">{option.text}</span>
                      </div>
                    </button>
                  ))}
                </div>
              </div>

              <div className="flex justify-between items-center">
                {currentQuestion > 0 ? (
                  <button
                    onClick={() => setCurrentQuestion(currentQuestion - 1)}
                    className="text-gray-500 hover:text-gray-700 transition-colors py-2 px-4 rounded-lg hover:bg-gray-100"
                  >
                    ← 上一题
                  </button>
                ) : (
                  <button
                    onClick={() => setCurrentPage('intro')}
                    className="text-gray-500 hover:text-gray-700 transition-colors py-2 px-4 rounded-lg hover:bg-gray-100"
                  >
                    ← 返回首页
                  </button>
                )}

                <div className="text-sm text-gray-400">
                  剩余 {42 - currentQuestion - 1} 题
                </div>
              </div>
            </div>
          </div>
        );
      };

      // 结果页渲染
      const renderResult = () => {
        let finalAnswers = answers;

        if (Object.keys(finalAnswers).length === 0) {
          try {
            const records = [];
            for (let i = 0; i < localStorage.length; i++) {
              const key = localStorage.key(i);
              if (key && key.startsWith('fruit_test_')) {
                const data = localStorage.getItem(key);
                if (data) {
                  records.push(JSON.parse(data));
                }
              }
            }
            records.sort((a, b) => b.timestamp - a.timestamp);
            if (records.length > 0) {
              finalAnswers = records[0].answers;
            }
          } catch (error) {
            console.log('读取历史答案失败:', error);
          }
        }

        const results = calculateResults(finalAnswers);
        const typeInfo = fruitTypes[results.fruitType];

        return (
          <div className="min-h-screen fruit-gradient p-3 sm:p-6">
            <div className="max-w-6xl mx-auto bg-white rounded-2xl shadow-xl p-4 sm:p-8 fade-in">

              {/* 头部大卡片 */}
              <div className={`bg-gradient-to-r ${typeInfo.color} rounded-2xl p-6 sm:p-8 mb-8 text-white bounce-in`}>
                <div className="text-center">
                  <div className="text-6xl sm:text-8xl mb-4">{typeInfo.icon}</div>
                  <h2 className="text-2xl sm:text-4xl font-bold mb-4">
                    你是【{results.fruitType}】
                  </h2>
                  <p className="text-lg sm:text-xl mb-6 opacity-90">
                    {typeInfo.slogan}
                  </p>

                  <div className="bg-white bg-opacity-20 rounded-xl p-4 backdrop-blur-sm">
                    <p className="text-base sm:text-lg leading-relaxed">
                      {typeInfo.description}
                    </p>
                  </div>
                </div>
              </div>

              {/* 雷达图 + TOP3 */}
              <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 mb-8">
                <div className="bg-gradient-to-br from-pink-50 to-orange-50 rounded-xl p-6 border border-pink-200">
                  <h3 className="text-xl font-bold text-gray-800 mb-4 text-center">八维能力雷达图</h3>
                  <div className="relative h-80">
                    <canvas ref={chartRef}></canvas>
                  </div>
                </div>

                <div className="space-y-4">
                  <h3 className="text-xl font-bold text-gray-800 mb-4">⭐ 你的优势维度 TOP3</h3>
                  {results.topDimensions.map(([dimName, score], index) => {
                    const dimInfo = dimensions[dimName];
                    const medals = ['🥇', '🥈', '🥉'];
                    return (
                      <div
                        key={dimName}
                        className="bg-white border-2 rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow"
                        style={{ borderColor: dimInfo.color }}
                      >
                        <div className="flex items-center justify-between mb-2">
                          <div className="flex items-center space-x-3">
                            <span className="text-3xl">{medals[index]}</span>
                            <div>
                              <div className="flex items-center space-x-2">
                                <span className="text-2xl">{dimInfo.icon}</span>
                                <span className="font-bold text-lg">{dimName}</span>
                              </div>
                              <div className="text-sm text-gray-600">{dimInfo.description}</div>
                            </div>
                          </div>
                          <div className="text-right">
                            <div className="text-2xl font-bold" style={{ color: dimInfo.color }}>
                              {score}
                            </div>
                            <div className="text-xs text-gray-500">/ 5.0</div>
                          </div>
                        </div>
                        <div className="w-full bg-gray-200 rounded-full h-2">
                          <div
                            className="h-2 rounded-full transition-all"
                            style={{
                              width: `${(parseFloat(score) / 5) * 100}%`,
                              backgroundColor: dimInfo.color
                            }}
                          ></div>
                        </div>
                      </div>
                    );
                  })}
                </div>
              </div>

              {/* 性格特征标签 */}
              <div className="bg-gradient-to-r from-yellow-50 to-pink-50 border border-yellow-200 rounded-xl p-6 mb-8">
                <h3 className="text-xl font-bold text-gray-800 mb-4">🏷️ 你的性格标签</h3>
                <div className="flex flex-wrap gap-3">
                  {typeInfo.traits.map((trait, index) => (
                    <span key={index} className="bg-white px-4 py-2 rounded-full text-sm border-2 border-pink-300 text-pink-700 font-semibold">
                      {trait}
                    </span>
                  ))}
                </div>
              </div>

              {/* 适合职业 */}
              <div className="bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-xl p-6 mb-8">
                <h3 className="text-xl font-bold text-gray-800 mb-4">🎯 适合发展方向</h3>
                <div className="grid grid-cols-2 sm:grid-cols-3 gap-3">
                  {typeInfo.careers.map((career, index) => (
                    <div key={index} className="bg-white px-4 py-3 rounded-lg text-center border border-blue-200 hover:border-blue-400 transition-colors">
                      <span className="text-sm font-medium text-gray-700">{career}</span>
                    </div>
                  ))}
                </div>
              </div>

              {/* 水果好友和天敌 */}
              <div className="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-8">
                <div className="bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-xl p-6">
                  <h3 className="text-xl font-bold text-gray-800 mb-4">💕 你的水果好友</h3>
                  <div className="space-y-3">
                    {typeInfo.goodMatch.map((fruit, index) => (
                      <div key={index} className="bg-white p-3 rounded-lg border border-green-200 flex items-center space-x-3">
                        <span className="text-3xl">{fruitTypes[fruit]?.icon}</span>
                        <div>
                          <div className="font-semibold">{fruit}</div>
                          <div className="text-xs text-gray-500">{fruitTypes[fruit]?.slogan}</div>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>

                <div className="bg-gradient-to-br from-red-50 to-orange-50 border border-red-200 rounded-xl p-6">
                  <h3 className="text-xl font-bold text-gray-800 mb-4">⚡ 需要注意相处</h3>
                  <div className="space-y-3">
                    {typeInfo.badMatch.map((fruit, index) => (
                      <div key={index} className="bg-white p-3 rounded-lg border border-red-200 flex items-center space-x-3">
                        <span className="text-3xl">{fruitTypes[fruit]?.icon}</span>
                        <div>
                          <div className="font-semibold">{fruit}</div>
                          <div className="text-xs text-gray-500">性格差异较大</div>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              </div>

              {/* 个性化建议 */}
              <div className="bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-6 mb-8">
                <h3 className="text-xl font-bold text-gray-800 mb-4">💡 给你的建议</h3>
                <div className="space-y-3">
                  {typeInfo.advice.map((tip, index) => (
                    <div key={index} className="bg-white p-4 rounded-lg border border-purple-200">
                      <p className="text-gray-700 leading-relaxed">{tip}</p>
                    </div>
                  ))}
                </div>
              </div>

              {/* 资料推荐 */}
              <div className="bg-gradient-to-r from-cyan-50 to-blue-50 border border-cyan-200 rounded-xl p-6 mb-8">
                <h3 className="text-xl font-bold text-gray-800 mb-4">📚 心理成长资源推荐</h3>
                <p className="text-gray-600 mb-4">探索内心，关照自己的每一面</p>
                <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                  <a href="https://xhslink.com/m/9D0epdzjqnw" target="_blank" rel="noopener noreferrer"
                     className="bg-white px-6 py-4 rounded-lg border border-cyan-200 hover:border-cyan-400 hover:shadow-md transition-all flex items-center space-x-3 group">
                    <span className="text-3xl">📖</span>
                    <div>
                      <div className="font-semibold text-gray-800 group-hover:text-cyan-600">更多心理自测工具</div>
                      <div className="text-sm text-gray-500">发现更多可能性</div>
                    </div>
                  </a>
                  <a href="https://pan.quark.cn/s/266f60aa5bbf" target="_blank" rel="noopener noreferrer"
                     className="bg-white px-6 py-4 rounded-lg border border-cyan-200 hover:border-cyan-400 hover:shadow-md transition-all flex items-center space-x-3 group">
                    <span className="text-3xl">💡</span>
                    <div>
                      <div className="font-semibold text-gray-800 group-hover:text-cyan-600">2026重启人生365天时间规划表</div>
                      <div className="text-sm text-gray-500">制定专属于你的计划</div>
                    </div>
                  </a>
                </div>
              </div>

              {/* 完整维度得分 */}
              <div className="mb-8">
                <h3 className="text-xl font-bold text-gray-800 mb-4">📊 完整能力评估</h3>
                <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                  {Object.entries(results.dimensionAvgScores)
                    .sort(([, a], [, b]) => parseFloat(b) - parseFloat(a))
                    .map(([dimName, score]) => {
                      const dimInfo = dimensions[dimName];
                      const scoreNum = parseFloat(score);
                      let level = '待开发';
                      let levelColor = 'text-gray-500';
                      if (scoreNum >= 4.0) {
                        level = '优势天赋';
                        levelColor = 'text-green-600';
                      } else if (scoreNum >= 3.0) {
                        level = '发展中';
                        levelColor = 'text-blue-600';
                      }

                      return (
                        <div key={dimName} className="bg-gray-50 rounded-lg p-4 border hover:shadow-md transition-shadow">
                          <div className="flex items-center justify-between mb-2">
                            <div className="flex items-center space-x-2">
                              <span className="text-2xl">{dimInfo.icon}</span>
                              <span className="font-semibold">{dimName}</span>
                            </div>
                            <div className="flex items-center space-x-2">
                              <span className="font-bold text-lg" style={{ color: dimInfo.color }}>
                                {score}
                              </span>
                              <span className={`text-xs px-2 py-1 rounded-full bg-white ${levelColor}`}>
                                {level}
                              </span>
                            </div>
                          </div>
                          <div className="w-full bg-gray-200 rounded-full h-1.5">
                            <div
                              className="h-1.5 rounded-full transition-all"
                              style={{
                                width: `${(scoreNum / 5) * 100}%`,
                                backgroundColor: dimInfo.color
                              }}
                            ></div>
                          </div>
                        </div>
                      );
                    })}
                </div>
              </div>

              {/* 操作按钮 */}
              <div className="flex flex-col sm:flex-row gap-4 justify-center items-center">
                <button
                  onClick={copyResultText}
                  className="w-full sm:w-auto bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-bold py-3 px-8 rounded-xl transition-all shadow-lg hover:shadow-xl transform hover:scale-105"
                >
                  📋 复制结果文案
                </button>

                <button
                  onClick={() => {
                    setCurrentPage('intro');
                    setCurrentQuestion(0);
                    setAnswers({});
                  }}
                  className="w-full sm:w-auto bg-gradient-to-r from-pink-500 to-orange-500 hover:from-pink-600 hover:to-orange-600 text-white font-bold py-3 px-8 rounded-xl transition-all shadow-lg hover:shadow-xl transform hover:scale-105"
                >
                  🔄 重新测评
                </button>
              </div>

              <div className="mt-8 text-center text-sm text-gray-500">
                <p>🍓 本测评结果已自动保存</p>
                <p className="mt-1">基于8维性格理论 · 仅供参考 · 探索更多可能</p>
              </div>
            </div>
          </div>
        );
      };

      // 根据当前页面渲染不同内容
      switch (currentPage) {
        case 'intro':
          return renderIntro();
        case 'test':
          return renderTest();
        case 'result':
          return renderResult();
        default:
          return renderIntro();
      }
    };

    // 渲染应用到页面
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<FruitAssessment />);
  </script>
</body>

</html>
