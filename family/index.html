<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="åŸç”Ÿå®¶åº­å¥åº·åº¦æµ‹è¯„ - æ¢ç´¢å†…å¿ƒ,å…³ç…§è‡ªå·±çš„ä¸€é¢é•œå­ã€‚8ä¸ªç»´åº¦48é“é¢˜ç›®,æ·±å…¥äº†è§£åŸç”Ÿå®¶åº­å½±å“ã€‚">
  <meta name="keywords" content="åŸç”Ÿå®¶åº­,å¿ƒç†å¥åº·,è‡ªæˆ‘æ¢ç´¢,å¿ƒç†æµ‹è¯„,ç–—æ„ˆ">
  <meta name="author" content="Family Health Assessment">
  <meta name="robots" content="index, follow">
  <title>åŸç”Ÿå®¶åº­å¥åº·åº¦æµ‹è¯„</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>

  <style>
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: #c1c1c1;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #a8a8a8;
    }

    @media (max-width: 640px) {
      .mobile-text-sm {
        font-size: 0.875rem;
      }

      .mobile-text-base {
        font-size: 1rem;
      }

      .mobile-text-lg {
        font-size: 1.125rem;
      }
    }

    .healing-gradient {
      background: linear-gradient(135deg,
          #e0f2fe 0%,
          #ddd6fe 25%,
          #fae8ff 50%,
          #e0e7ff 75%,
          #dbeafe 100%);
    }

    .dimension-card {
      transition: all 0.3s ease;
    }

    .dimension-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }

    .warning-box {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      border-left: 4px solid #f59e0b;
    }

    .pulse-slow {
      animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .fade-in {
      animation: fadeIn 0.6s ease-out;
    }

    .result-badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .badge-healthy {
      background-color: #dcfce7;
      color: #166534;
    }

    .badge-mild {
      background-color: #dbeafe;
      color: #1e40af;
    }

    .badge-moderate {
      background-color: #fef3c7;
      color: #92400e;
    }

    .badge-high {
      background-color: #fed7aa;
      color: #9a3412;
    }

    .badge-severe {
      background-color: #fecaca;
      color: #991b1b;
    }
  </style>
</head>

<body>
  <div id="root">
    <!-- åŠ è½½æŒ‡ç¤ºå™¨ -->
    <div class="min-h-screen flex items-center justify-center healing-gradient">
      <div class="text-center">
        <div class="text-6xl mb-4 animate-bounce">ğŸ¡</div>
        <div class="text-xl text-gray-700 font-semibold">åŠ è½½ä¸­...</div>
        <div class="mt-4 text-sm text-gray-500">æ­£åœ¨åˆå§‹åŒ–æµ‹è¯„ç³»ç»Ÿ</div>
      </div>
    </div>
  </div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    // ==================== é”™è¯¯è¾¹ç•Œç»„ä»¶ ====================
    class ErrorBoundary extends React.Component {
      constructor(props) {
        super(props);
        this.state = { hasError: false, error: null };
      }

      static getDerivedStateFromError(error) {
        return { hasError: true, error };
      }

      componentDidCatch(error, errorInfo) {
        console.error('åº”ç”¨é”™è¯¯:', error, errorInfo);
      }

      render() {
        if (this.state.hasError) {
          return (
            <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-orange-50 p-6">
              <div className="bg-white rounded-2xl shadow-xl p-8 max-w-md text-center">
                <div className="text-6xl mb-4">âš ï¸</div>
                <h2 className="text-2xl font-bold text-gray-800 mb-4">æŠ±æ­‰,å‡ºç°äº†ä¸€äº›é—®é¢˜</h2>
                <p className="text-gray-600 mb-6">
                  åº”ç”¨é‡åˆ°äº†é”™è¯¯ã€‚è¯·åˆ·æ–°é¡µé¢é‡è¯•ã€‚
                </p>
                <button
                  onClick={() => window.location.reload()}
                  className="bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold py-3 px-6 rounded-xl hover:from-purple-600 hover:to-pink-600 transition-all"
                >
                  ğŸ”„ åˆ·æ–°é¡µé¢
                </button>
              </div>
            </div>
          );
        }

        return this.props.children;
      }
    }

    // ==================== ç¬¬1éƒ¨åˆ†ï¼šåŸºç¡€é…ç½® ====================

    const FamilyHealthAssessment = () => {
      const [currentPage, setCurrentPage] = useState('intro');
      const [currentQuestion, setCurrentQuestion] = useState(0);
      const [answers, setAnswers] = useState({});
      const [showHistory, setShowHistory] = useState(false);
      const [historyRecords, setHistoryRecords] = useState([]);
      const [agreedToWarning, setAgreedToWarning] = useState(false);
      const [showQuickTest, setShowQuickTest] = useState(false);
      const [titleClickCount, setTitleClickCount] = useState(0);
      const titleClickTimerRef = useRef(null);
      const chartRef = useRef(null);

      // 8ä¸ªç»´åº¦é…ç½®
      const dimensions = {
        "ä½è‡ªæˆ‘ä»·å€¼": {
          name: "ä½è‡ªæˆ‘ä»·å€¼",
          icon: "ğŸ’”",
          color: "#3B82F6",
          description: "å¯¹è‡ªæˆ‘çš„è´¬æŠ‘ã€ç¾æ„§ã€æ‰¹åˆ¤"
        },
        "è¿‡åº¦æŒæ§": {
          name: "è¿‡åº¦æŒæ§",
          icon: "ğŸ­",
          color: "#F59E0B",
          description: "æ§åˆ¶ä»–äººæƒ…ç»ªå’Œè¡Œä¸º"
        },
        "å›é¿ä¾æ‹": {
          name: "å›é¿ä¾æ‹",
          icon: "ğŸšª",
          color: "#8B5CF6",
          description: "æƒ…æ„Ÿç–ç¦»ã€éš¾ä»¥äº²å¯†"
        },
        "è¿‡åº¦ååº”": {
          name: "è¿‡åº¦ååº”",
          icon: "âš¡",
          color: "#EF4444",
          description: "æƒ…ç»ªæ•æ„Ÿã€æ˜“è¢«è§¦å‘"
        },
        "è¾¹ç•Œæ¨¡ç³Š": {
          name: "è¾¹ç•Œæ¨¡ç³Š",
          icon: "ğŸŒŠ",
          color: "#FBBF24",
          description: "æ— æ³•è®¾å®šå¥åº·ç•Œé™"
        },
        "è‡ªè´£å†…ç–š": {
          name: "è‡ªè´£å†…ç–š",
          icon: "ğŸ˜”",
          color: "#EC4899",
          description: "è¿‡åº¦æ‰¿æ‹…è´£ä»»"
        },
        "æƒ…ç»ªçº ç»“": {
          name: "æƒ…ç»ªçº ç»“",
          icon: "ğŸŒ€",
          color: "#06B6D4",
          description: "çŸ›ç›¾çš„æƒ…æ„Ÿä½“éªŒ"
        },
        "è‡ªæˆ‘éšè—": {
          name: "è‡ªæˆ‘éšè—",
          icon: "ğŸ­",
          color: "#10B981",
          description: "å‹æŠ‘çœŸå®éœ€æ±‚å’Œæ„Ÿå—"
        }
      };

      // è¯„åˆ†é€‰é¡¹
      const options = [
        { value: 1, label: 'A', text: 'å®Œå…¨ä¸ç¬¦åˆ' },
        { value: 2, label: 'B', text: 'ä¸å¤ªç¬¦åˆ' },
        { value: 3, label: 'C', text: 'æœ‰æ—¶å¦‚æ­¤' },
        { value: 4, label: 'D', text: 'ç»å¸¸å¦‚æ­¤' },
        { value: 5, label: 'E', text: 'å®Œå…¨ç¬¦åˆ' }
      ];

      // ç¨‹åº¦è¯„çº§æ ‡å‡†
      const getLevelInfo = (score) => {
        if (score >= 4.2) return { level: 'ä¸¥é‡', class: 'badge-severe', desc: 'éå¸¸é«˜' };
        if (score >= 3.5) return { level: 'è¾ƒé«˜', class: 'badge-high', desc: 'è¾ƒé«˜' };
        if (score >= 2.8) return { level: 'ä¸­ç­‰', class: 'badge-moderate', desc: 'ä¸­ç­‰' };
        if (score >= 2.0) return { level: 'è½»å¾®', class: 'badge-mild', desc: 'è½»å¾®' };
        return { level: 'å¥åº·', class: 'badge-healthy', desc: 'å¥åº·' };
      };

      // æ•´ä½“å¥åº·åº¦è¯„çº§
      const getOverallHealth = (avgScore) => {
        if (avgScore >= 4.0) return { level: 'éœ€è¦ä¸“ä¸šæ”¯æŒ', color: 'text-red-600', bgColor: 'bg-red-50' };
        if (avgScore >= 3.2) return { level: 'å»ºè®®å¯»æ±‚å¸®åŠ©', color: 'text-orange-600', bgColor: 'bg-orange-50' };
        if (avgScore >= 2.5) return { level: 'æœ‰æˆé•¿ç©ºé—´', color: 'text-yellow-600', bgColor: 'bg-yellow-50' };
        if (avgScore >= 1.8) return { level: 'ç›¸å¯¹å¥åº·', color: 'text-blue-600', bgColor: 'bg-blue-50' };
        return { level: 'å¥åº·è‰¯å¥½', color: 'text-green-600', bgColor: 'bg-green-50' };
      };

      // æ¨èèµ„æº
      const resources = {
        books: [
          { title: "ã€ŠåŸç”Ÿå®¶åº­ï¼šå¦‚ä½•ä¿®è¡¥è‡ªå·±çš„æ€§æ ¼ç¼ºé™·ã€‹", author: "è‹çŠÂ·ç¦æ²ƒå¾·" },
          { title: "ã€Šä½ å½“åƒé¸Ÿé£å¾€ä½ çš„å±±ã€‹", author: "å¡”æ‹‰Â·éŸ¦æ–¯ç‰¹å¼—" },
          { title: "ã€Šè¢«è®¨åŒçš„å‹‡æ°”ã€‹", author: "å²¸è§ä¸€éƒ" },
          { title: "ã€Šäº²å¯†å…³ç³»ã€‹", author: "å…‹é‡Œæ–¯å¤šç¦Â·å­Ÿ" }
        ],
        tools: [
          { name: "æ­£å¿µå†¥æƒ³ç»ƒä¹ ", desc: "å¸®åŠ©è§‰å¯Ÿå½“ä¸‹æƒ…ç»ª" },
          { name: "å†…åœ¨å°å­©ç–—æ„ˆ", desc: "ä¸ç«¥å¹´åˆ›ä¼¤å’Œè§£" },
          { name: "æƒ…ç»ªæ—¥è®°", desc: "è®°å½•å’Œç†è§£æƒ…ç»ªæ¨¡å¼" }
        ]
      };

      // æ»šåŠ¨åˆ°é¡¶éƒ¨å‡½æ•°

      // åŠ è½½å†å²è®°å½•
      useEffect(() => {
        loadHistory();
      }, []);

      const loadHistory = () => {
        try {
          const records = [];
          for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            if (key && key.startsWith('family_health_')) {
              try {
                const data = localStorage.getItem(key);
                if (data) {
                  const parsed = JSON.parse(data);
                  // éªŒè¯æ•°æ®å®Œæ•´æ€§
                  if (parsed.timestamp && parsed.answers && parsed.results) {
                    records.push(parsed);
                  }
                }
              } catch (e) {
                console.log('è¯»å–è®°å½•å¤±è´¥:', key, e);
              }
            }
          }
          records.sort((a, b) => b.timestamp - a.timestamp);
          setHistoryRecords(records);
        } catch (error) {
          console.log('å†å²è®°å½•åŠŸèƒ½æš‚ä¸å¯ç”¨:', error);
          setHistoryRecords([]);
        }
      };

      const saveResult = (finalAnswers) => {
        const results = calculateResults(finalAnswers);
        const record = {
          timestamp: Date.now(),
          answers: finalAnswers,
          results: results
        };

        try {
          const key = `family_health_${Date.now()}`;
          localStorage.setItem(key, JSON.stringify(record));
          loadHistory();

          // æ¸…ç†æ—§è®°å½•,åªä¿ç•™æœ€è¿‘20æ¡
          const allKeys = [];
          for (let i = 0; i < localStorage.length; i++) {
            const k = localStorage.key(i);
            if (k && k.startsWith('family_health_')) {
              allKeys.push(k);
            }
          }
          if (allKeys.length > 20) {
            allKeys.sort().slice(0, allKeys.length - 20).forEach(k => {
              try {
                localStorage.removeItem(k);
              } catch (e) {
                console.log('æ¸…ç†æ—§è®°å½•å¤±è´¥:', k);
              }
            });
          }
        } catch (error) {
          console.log('ä¿å­˜å¤±è´¥:', error);
          if (error.name === 'QuotaExceededError') {
            alert('å­˜å‚¨ç©ºé—´å·²æ»¡,æ— æ³•ä¿å­˜æµ‹è¯„è®°å½•ã€‚è¯·æ¸…ç†æµè§ˆå™¨ç¼“å­˜åé‡è¯•ã€‚');
          }
        }
      };

      const calculateResults = (finalAnswers = answers) => {
        const dimensionScores = {};

        Object.keys(dimensions).forEach(dim => {
          dimensionScores[dim] = 0;
        });

        questions.forEach(q => {
          const score = finalAnswers[q.id] || 0;
          dimensionScores[q.dimension] += score;
        });

        const dimensionAvgScores = {};
        Object.keys(dimensions).forEach(dim => {
          dimensionAvgScores[dim] = (dimensionScores[dim] / 6).toFixed(2);
        });

        const sortedDimensions = Object.entries(dimensionAvgScores)
          .sort(([, a], [, b]) => parseFloat(b) - parseFloat(a));

        const topDimensions = sortedDimensions.slice(0, 3);

        const avgScore = (Object.values(dimensionAvgScores)
          .reduce((sum, score) => sum + parseFloat(score), 0) / 8).toFixed(2);

        return {
          dimensionScores,
          dimensionAvgScores,
          topDimensions,
          sortedDimensions,
          avgScore
        };
      };

      // è¿™é‡Œæ˜¯ç¬¬1éƒ¨åˆ†çš„ç»“æŸ
      // æ¥ä¸‹æ¥çš„ä»£ç å°†åœ¨Part2ä¸­ç»§ç»­
      // ==================== ç¬¬2éƒ¨åˆ†ï¼š48é“æµ‹è¯„é¢˜ç›® ====================

      // è¿™éƒ¨åˆ†ä»£ç è¦æ’å…¥åˆ°Part1ä¸­ calculateResults å‡½æ•°ä¹‹å

      const questions = [
        // ä½è‡ªæˆ‘ä»·å€¼ (1-6)
        {
          id: 1,
          text: "æˆ‘ç»å¸¸è§‰å¾—è‡ªå·±ä¸å¤Ÿå¥½ï¼Œæ— è®ºå¤šåŠªåŠ›éƒ½è¾¾ä¸åˆ°æ ‡å‡†",
          dimension: "ä½è‡ªæˆ‘ä»·å€¼"
        },
        {
          id: 2,
          text: "æˆ‘ä¹ æƒ¯æ€§åœ°è´¬ä½è‡ªå·±çš„æˆå°±ï¼Œè§‰å¾—åªæ˜¯è¿æ°”å¥½",
          dimension: "ä½è‡ªæˆ‘ä»·å€¼"
        },
        {
          id: 3,
          text: "åˆ«äººçš„æ‰¹è¯„ä¼šè®©æˆ‘é•¿æ—¶é—´ç—›è‹¦ï¼Œéš¾ä»¥é‡Šæ€€",
          dimension: "ä½è‡ªæˆ‘ä»·å€¼"
        },
        {
          id: 4,
          text: "æˆ‘æ€»è§‰å¾—è‡ªå·±é…ä¸ä¸Šå¥½çš„ä¸œè¥¿æˆ–å¥½çš„å…³ç³»",
          dimension: "ä½è‡ªæˆ‘ä»·å€¼"
        },
        {
          id: 5,
          text: "æˆ‘å¾ˆéš¾æ¥å—åˆ«äººçš„èµç¾ï¼Œæ€»è§‰å¾—ä»–ä»¬åœ¨å®¢å¥—",
          dimension: "ä½è‡ªæˆ‘ä»·å€¼"
        },
        {
          id: 6,
          text: "æˆ‘å¯¹è‡ªå·±çš„å¤–è¡¨ã€èƒ½åŠ›æ„Ÿåˆ°æ·±æ·±çš„ç¾æ„§",
          dimension: "ä½è‡ªæˆ‘ä»·å€¼"
        },

        // è¿‡åº¦æŒæ§ (7-12)
        {
          id: 7,
          text: "æˆ‘ä¼šé€šè¿‡æ“æ§æˆ–ç»™äºˆå»ºè®®çš„æ–¹å¼æ¥å½±å“ä»–äºº",
          dimension: "è¿‡åº¦æŒæ§"
        },
        {
          id: 8,
          text: "å½“äº‹æƒ…ä¸æŒ‰æˆ‘çš„æƒ³æ³•å‘å±•æ—¶ï¼Œæˆ‘ä¼šæ„Ÿåˆ°ç„¦è™‘ä¸å®‰",
          dimension: "è¿‡åº¦æŒæ§"
        },
        {
          id: 9,
          text: "æˆ‘å¾ˆéš¾æ¥å—åˆ«äººæœ‰ä¸åŒçš„æƒ³æ³•æˆ–é€‰æ‹©",
          dimension: "è¿‡åº¦æŒæ§"
        },
        {
          id: 10,
          text: "æˆ‘ä¼šç”¨å…³å¿ƒä½œä¸ºç†ç”±ï¼Œè¿‡åº¦å¹²é¢„ä»–äººçš„ç”Ÿæ´»",
          dimension: "è¿‡åº¦æŒæ§"
        },
        {
          id: 11,
          text: "æˆ‘éœ€è¦çŸ¥é“äº‹æƒ…çš„æ¯ä¸ªç»†èŠ‚ï¼Œå¦åˆ™ä¼šæ„Ÿåˆ°å¤±æ§",
          dimension: "è¿‡åº¦æŒæ§"
        },
        {
          id: 12,
          text: "å½“åˆ«äººä¸å¬ä»æˆ‘çš„å»ºè®®æ—¶ï¼Œæˆ‘ä¼šç”Ÿæ°”æˆ–éš¾è¿‡",
          dimension: "è¿‡åº¦æŒæ§"
        },

        // å›é¿ä¾æ‹ (13-18)
        {
          id: 13,
          text: "æˆ‘å¾ˆéš¾å‘ä»–äººè¡¨è¾¾çœŸå®çš„æƒ…æ„Ÿéœ€æ±‚",
          dimension: "å›é¿ä¾æ‹"
        },
        {
          id: 14,
          text: "åœ¨äº²å¯†å…³ç³»ä¸­ï¼Œæˆ‘æ€»æƒ³ä¿æŒä¸€å®šè·ç¦»",
          dimension: "å›é¿ä¾æ‹"
        },
        {
          id: 15,
          text: "æˆ‘å€¾å‘äºç”¨å¿™ç¢Œæ¥é€ƒé¿æ·±åº¦çš„æƒ…æ„Ÿè¿æ¥",
          dimension: "å›é¿ä¾æ‹"
        },
        {
          id: 16,
          text: "æˆ‘ä¸ç›¸ä¿¡æœ‰äººèƒ½çœŸæ­£ç†è§£å’Œæ¥çº³æˆ‘",
          dimension: "å›é¿ä¾æ‹"
        },
        {
          id: 17,
          text: "å½“å…³ç³»å˜å¾—å¤ªäº²å¯†æ—¶ï¼Œæˆ‘ä¼šæƒ³è¦é€ƒç¦»",
          dimension: "å›é¿ä¾æ‹"
        },
        {
          id: 18,
          text: "æˆ‘å¾ˆéš¾å‘ä»–äººå¯»æ±‚å¸®åŠ©ï¼Œå³ä½¿æˆ‘å¾ˆéœ€è¦",
          dimension: "å›é¿ä¾æ‹"
        },

        // è¿‡åº¦ååº” (19-24)
        {
          id: 19,
          text: "ä¸€äº›å°äº‹å°±èƒ½è®©æˆ‘æƒ…ç»ªå´©æºƒæˆ–æš´æ€’",
          dimension: "è¿‡åº¦ååº”"
        },
        {
          id: 20,
          text: "æˆ‘çš„æƒ…ç»ªèµ·ä¼å¾ˆå¤§ï¼Œéš¾ä»¥ä¿æŒç¨³å®š",
          dimension: "è¿‡åº¦ååº”"
        },
        {
          id: 21,
          text: "åˆ«äººæ— æ„çš„è¯è¯­ä¼šè®©æˆ‘æ„Ÿåˆ°è¢«æ·±æ·±ä¼¤å®³",
          dimension: "è¿‡åº¦ååº”"
        },
        {
          id: 22,
          text: "æˆ‘ä¼šæŠŠå½“ä¸‹çš„å†²çªå’Œè¿‡å»çš„ä¼¤ç—›è”ç³»èµ·æ¥",
          dimension: "è¿‡åº¦ååº”"
        },
        {
          id: 23,
          text: "æˆ‘å¾ˆå®¹æ˜“æ„Ÿåˆ°è¢«æ‹’ç»æˆ–è¢«æŠ›å¼ƒ",
          dimension: "è¿‡åº¦ååº”"
        },
        {
          id: 24,
          text: "åœ¨å†²çªä¸­ï¼Œæˆ‘ä¼šè¯´å‡ºè¿‡æ¿€çš„è¯æˆ–åšå‡ºå†²åŠ¨çš„è¡Œä¸º",
          dimension: "è¿‡åº¦ååº”"
        },

        // è¾¹ç•Œæ¨¡ç³Š (25-30)
        {
          id: 25,
          text: "æˆ‘å¾ˆéš¾å¯¹ä»–äººçš„è¦æ±‚è¯´\"ä¸\"",
          dimension: "è¾¹ç•Œæ¨¡ç³Š"
        },
        {
          id: 26,
          text: "æˆ‘å¸¸å¸¸ä¸ºäº†ç»´æŠ¤å…³ç³»è€Œç‰ºç‰²è‡ªå·±çš„éœ€æ±‚",
          dimension: "è¾¹ç•Œæ¨¡ç³Š"
        },
        {
          id: 27,
          text: "æˆ‘ä¸æ¸…æ¥šä»€ä¹ˆæ˜¯æˆ‘åº”è¯¥æ‰¿æ‹…çš„ï¼Œä»€ä¹ˆä¸æ˜¯",
          dimension: "è¾¹ç•Œæ¨¡ç³Š"
        },
        {
          id: 28,
          text: "æˆ‘å…è®¸ä»–äººä¾µçŠ¯æˆ‘çš„æ—¶é—´ã€ç©ºé—´æˆ–æƒ…æ„Ÿ",
          dimension: "è¾¹ç•Œæ¨¡ç³Š"
        },
        {
          id: 29,
          text: "æˆ‘ä¼šè¿‡åº¦å·å…¥ä»–äººçš„é—®é¢˜ï¼Œå¿½ç•¥è‡ªå·±çš„ç”Ÿæ´»",
          dimension: "è¾¹ç•Œæ¨¡ç³Š"
        },
        {
          id: 30,
          text: "æˆ‘åˆ†ä¸æ¸…å“ªäº›æƒ…ç»ªæ˜¯æˆ‘çš„ï¼Œå“ªäº›æ˜¯åˆ«äººçš„",
          dimension: "è¾¹ç•Œæ¨¡ç³Š"
        },

        // è‡ªè´£å†…ç–š (31-36)
        {
          id: 31,
          text: "æˆ‘æ€»è§‰å¾—å¾ˆå¤šé—®é¢˜éƒ½æ˜¯æˆ‘çš„é”™",
          dimension: "è‡ªè´£å†…ç–š"
        },
        {
          id: 32,
          text: "å³ä½¿ä¸æ˜¯æˆ‘çš„è´£ä»»ï¼Œæˆ‘ä¹Ÿä¼šæ„Ÿåˆ°æ·±æ·±çš„å†…ç–š",
          dimension: "è‡ªè´£å†…ç–š"
        },
        {
          id: 33,
          text: "æˆ‘ä¼šä¸ºå®¶äººçš„ä¸å¿«ä¹è€Œè´£å¤‡è‡ªå·±",
          dimension: "è‡ªè´£å†…ç–š"
        },
        {
          id: 34,
          text: "æˆ‘å¾ˆéš¾åŸè°…è‡ªå·±è¿‡å»çš„é”™è¯¯",
          dimension: "è‡ªè´£å†…ç–š"
        },
        {
          id: 35,
          text: "æˆ‘å¸¸å¸¸æ´»åœ¨\"å¦‚æœå½“åˆæˆ‘...\"çš„æ‡Šæ‚”ä¸­",
          dimension: "è‡ªè´£å†…ç–š"
        },
        {
          id: 36,
          text: "æˆ‘è§‰å¾—è®©å®¶äººå¤±æœ›æ˜¯ä¸å¯é¥¶æ•çš„",
          dimension: "è‡ªè´£å†…ç–š"
        },

        // æƒ…ç»ªçº ç»“ (37-42)
        {
          id: 37,
          text: "æˆ‘å¯¹å®¶äººæ—¢çˆ±åˆæ¨ï¼Œæƒ…æ„Ÿéå¸¸çŸ›ç›¾",
          dimension: "æƒ…ç»ªçº ç»“"
        },
        {
          id: 38,
          text: "æˆ‘æ—¢æ¸´æœ›äº²å¯†åˆå®³æ€•å—ä¼¤",
          dimension: "æƒ…ç»ªçº ç»“"
        },
        {
          id: 39,
          text: "æˆ‘ä¸€è¾¹æƒ³è¦ç‹¬ç«‹ï¼Œä¸€è¾¹åˆç¦»ä¸å¼€å®¶äºº",
          dimension: "æƒ…ç»ªçº ç»“"
        },
        {
          id: 40,
          text: "æˆ‘å¯¹è¿‡å»çš„è®°å¿†å……æ»¡çŸ›ç›¾çš„æƒ…æ„Ÿ",
          dimension: "æƒ…ç»ªçº ç»“"
        },
        {
          id: 41,
          text: "æˆ‘ç»å¸¸åœ¨æ„¤æ€’å’Œå¿ƒç–¼ä¹‹é—´åå¤æ¨ªè·³",
          dimension: "æƒ…ç»ªçº ç»“"
        },
        {
          id: 42,
          text: "æˆ‘æ—¢æƒ³æ”¹å˜å…³ç³»ï¼Œåˆå®³æ€•æ”¹å˜ä¼šå¸¦æ¥æ›´å¤šä¼¤å®³",
          dimension: "æƒ…ç»ªçº ç»“"
        },

        // è‡ªæˆ‘éšè— (43-48)
        {
          id: 43,
          text: "æˆ‘ä¹ æƒ¯æ€§åœ°å‹æŠ‘è‡ªå·±çš„çœŸå®æƒ…ç»ª",
          dimension: "è‡ªæˆ‘éšè—"
        },
        {
          id: 44,
          text: "å½“æˆ‘æ„Ÿåˆ°å§”å±ˆæ„¤æ€’æ—¶ï¼Œä¸æ•¢è¡¨è¾¾ï¼Œä¸ä¼šè¡¨è¾¾",
          dimension: "è‡ªæˆ‘éšè—"
        },
        {
          id: 45,
          text: "æˆ‘ä¼šåˆ»æ„éšè—è‡ªå·±çš„éœ€æ±‚ï¼Œå‡è£…ä¸åœ¨ä¹",
          dimension: "è‡ªæˆ‘éšè—"
        },
        {
          id: 46,
          text: "æˆ‘å®³æ€•å±•ç°çœŸå®çš„è‡ªå·±ä¼šè¢«æ‹’ç»",
          dimension: "è‡ªæˆ‘éšè—"
        },
        {
          id: 47,
          text: "æˆ‘æ€»æ˜¯æˆ´ç€é¢å…·ä¸äººç›¸å¤„ï¼ŒåŒ…æ‹¬äº²å¯†çš„äºº",
          dimension: "è‡ªæˆ‘éšè—"
        },
        {
          id: 48,
          text: "æˆ‘ä¸çŸ¥é“çœŸå®çš„è‡ªå·±æ˜¯ä»€ä¹ˆæ ·å­",
          dimension: "è‡ªæˆ‘éšè—"
        }
      ];

      // ç»´åº¦è¯¦ç»†è§£è¯»å†…å®¹
      const dimensionDetails = {
        "ä½è‡ªæˆ‘ä»·å€¼": {
          manifestation: "ä½ çš„è‡ªæˆ‘ä»·å€¼æ„Ÿå¾ˆä½ï¼Œä»¥è‡´å¯¹åˆ«äººçš„æƒ…ç»ªå¾ˆæ•æ„Ÿã€‚ä½ ä¹ æƒ¯æ€§çš„å‹æŠ‘è‡ªå·±çš„æƒ…ç»ªï¼Œå½“è‡ªå·±æ„Ÿåˆ°å§”å±ˆæ„¤æ€’çš„æ—¶å€™ï¼Œä¸æ•¢è¡¨è¾¾ï¼Œä¸ä¼šè¡¨è¾¾ã€‚ä½ ä¹ æƒ¯æ€§çš„å‹æŠ‘è‡ªå·±çš„éœ€æ±‚ï¼Œå½“åˆ«äººä¾µçŠ¯è‡ªå·±çš„æ—¶é—´ã€ç©ºé—´ã€ç²¾åŠ›ä¸èµ„æºçš„æ—¶å€™ï¼Œä¸ä¼šç»´æŠ¤ï¼Œä¸æ•¢ç»´æŠ¤ã€‚",
          cause: "ä½è‡ªæˆ‘ä»·å€¼å¯èƒ½æ¥æºäºç«¥å¹´æˆ–é’å¹´æœŸçˆ¶æ¯å¯¹ä½ çš„å¿½è§†ã€‚è¢«è¿«æ—©æ—©ç‹¬ç«‹ã€æ— æ‰€ä¾é ï¼Œä½ åªèƒ½æŠŠè‡ªå·±å˜æˆ\"å°å¤§äºº\"ï¼Œä¸€ä¸ªäººæ‰›èµ·è®¸å¤šè´£ä»»ï¼Œå˜å¾—æ— åšä¸æ‘§ã€‚",
          impact: "ä½ çš„å†…å¿ƒå¸¸ç”Ÿæ´»åœ¨çŸ›ç›¾ä¸­ï¼Œä¸€æ–¹é¢æ¸´æœ›åˆ«äººå–œæ¬¢è‡ªå·±ï¼Œå¦ä¸€æ–¹é¢åˆæ€€ç–‘åˆ«äººï¼Œå®³æ€•ä»–ä»¬ä¸å–œæ¬¢è‡ªå·±ï¼›ä½ æœ‰å¼ºçƒˆçš„å¥½èƒœå¿ƒï¼Œå¸¸ä¸åˆ«äººæ¯”è¾ƒï¼Œä¼šä»¥æˆå°±è¡¡é‡è‡ªå·±çš„ä»·å€¼é«˜ä½ï¼Œæ³¨é‡è‡ªå·±çš„å½¢è±¡ï¼Œä½†æ˜¯ä¹Ÿæ…·æ…¨è¡¨è¾¾å†…å¿ƒæ„Ÿå—ã€‚"
        },
        "è¿‡åº¦æŒæ§": {
          manifestation: "æœ‰æ—¶ä½ ä¼šé€šè¿‡æ“æ§æˆ–ç»™äºˆå»ºè®®çš„æ–¹å¼æ¥å½±å“ä»–äººï¼Œä½¿åˆ«äººé¡ºä»è‡ªå·±çš„æ„è§æˆ–æ§åˆ¶äº‹ä»¶çš„å‘ç”Ÿå‘å±•ã€‚",
          cause: "è¿‡åº¦æŒæ§å¯èƒ½æ¥æºäºç«¥å¹´æˆ–é’å¹´æœŸçˆ¶æ¯å¯¹ä½ çš„å¿½è§†ã€‚è¢«è¿«æ—©æ—©ç‹¬ç«‹ã€æ— æ‰€ä¾é ï¼Œä½ åªèƒ½æŠŠè‡ªå·±å˜æˆ\"å°å¤§äºº\"ï¼Œä¸€ä¸ªäººæ‰›èµ·è®¸å¤šè´£ä»»ï¼Œå˜å¾—æ— åšä¸æ‘§ã€‚",
          impact: "ä¸€æ–¹é¢ï¼Œè¿‡åº¦æŒæ§äº‹ä»¶æˆ–å…³æ³¨ä»–äººä½¿ä½ è¿‡äºå…³æ³¨ä»–äººï¼Œè€Œå¿½è§†äº†è‡ªèº«çš„éœ€æ±‚ã€‚å¦ä¸€æ–¹é¢ï¼Œå½“äº‹æƒ…ä¸é¡ºå¿ƒæ—¶ï¼Œä½ å®¹æ˜“å½¢æˆæ‚²è§‚ä¸»ä¹‰å€¾å‘ï¼Œå®ƒå¯èƒ½é€ æˆä½ å¿ƒç†çš„æ— åä¹‹ç«ï¼Œé€ æˆä½ çš„è´Ÿé¢æ€ç»´æ¨¡å¼ã€‚"
        },
        "å›é¿ä¾æ‹": {
          manifestation: "ä½ å€¾å‘äºåœ¨äº²å¯†å…³ç³»ä¸­ä¿æŒè·ç¦»ï¼Œéš¾ä»¥çœŸæ­£ä¾èµ–å’Œä¿¡ä»»ä»–äººã€‚ä½ å¯èƒ½ç”¨å¿™ç¢Œã€ç†æ€§åŒ–ç­‰æ–¹å¼æ¥å›é¿æ·±å±‚çš„æƒ…æ„Ÿè¿æ¥ã€‚",
          cause: "å¯èƒ½æºäºç«¥å¹´æ—¶æœŸå…»è‚²è€…ä¸ç¨³å®šçš„å›åº”ï¼Œæˆ–è€…è¿‡æ—©ç»å†åˆ†ç¦»ï¼Œå¯¼è‡´ä½ å­¦ä¼šäº†è‡ªæˆ‘ä¿æŠ¤ï¼Œä¸å†è½»æ˜“ä¾èµ–ä»–äººã€‚",
          impact: "è¿™ç§æ¨¡å¼å¯èƒ½å¯¼è‡´ä½ åœ¨å…³ç³»ä¸­æ„Ÿåˆ°å­¤ç‹¬ï¼Œéš¾ä»¥å»ºç«‹æ·±åº¦çš„äº²å¯†è¿æ¥ï¼Œä¹Ÿå¯èƒ½è®©äº²å¯†çš„äººæ„Ÿåˆ°è¢«æ‹’ç»å’Œç–è¿œã€‚"
        },
        "è¿‡åº¦ååº”": {
          manifestation: "ä½ å¯¹å¤–ç•Œåˆºæ¿€çš„æƒ…ç»ªååº”å¼ºçƒˆä¸”æŒä¹…ï¼Œå°äº‹ä¹Ÿèƒ½å¼•å‘å¤§çš„æƒ…ç»ªæ³¢åŠ¨ã€‚ä½ å¯èƒ½ä¼šå°†å½“å‰çš„æƒ…å¢ƒä¸è¿‡å»çš„åˆ›ä¼¤è”ç³»èµ·æ¥ã€‚",
          cause: "å¯èƒ½æºäºç«¥å¹´æ—¶æœŸé•¿æœŸå¤„äºé«˜å‹æˆ–ä¸å®‰å…¨çš„ç¯å¢ƒä¸­ï¼Œå¯¼è‡´ä½ çš„æƒ…ç»ªç³»ç»Ÿå¤„äºé«˜åº¦è­¦è§‰çŠ¶æ€ã€‚",
          impact: "è¿™ç§è¿‡åº¦æ•æ„Ÿå¯èƒ½å½±å“äººé™…å…³ç³»ï¼Œè®©ä½ åœ¨å†²çªä¸­å®¹æ˜“å¤±æ§ï¼Œä¹Ÿå¯èƒ½è®©ä½ æ„Ÿåˆ°ç²¾ç–²åŠ›ç«­ã€‚"
        },
        "è¾¹ç•Œæ¨¡ç³Š": {
          manifestation: "ä½ å¾ˆéš¾åŒºåˆ†è‡ªå·±å’Œä»–äººçš„è´£ä»»ã€æƒ…ç»ªå’Œéœ€æ±‚ã€‚ä½ å¯èƒ½ä¹ æƒ¯æ€§åœ°ä¸ºä»–äººç‰ºç‰²ï¼Œæˆ–è€…è¿‡åº¦å·å…¥ä»–äººçš„é—®é¢˜ã€‚",
          cause: "å¯èƒ½æºäºç«¥å¹´æ—¶æœŸä½ çš„è¾¹ç•Œç»å¸¸è¢«ä¾µçŠ¯ï¼Œæˆ–è€…ä½ è¢«è¦æ±‚æ‰¿æ‹…è¶…å‡ºå¹´é¾„çš„è´£ä»»ã€‚",
          impact: "æ¨¡ç³Šçš„è¾¹ç•Œä¼šè®©ä½ æ„Ÿåˆ°è€—ç«­ï¼Œä¹Ÿå®¹æ˜“åœ¨å…³ç³»ä¸­å¤±å»è‡ªæˆ‘ï¼Œéš¾ä»¥ç»´æŠ¤è‡ªå·±çš„æƒç›Šã€‚"
        },
        "è‡ªè´£å†…ç–š": {
          manifestation: "ä½ ä¹ æƒ¯æ€§åœ°æŠŠé—®é¢˜å½’å’äºè‡ªå·±ï¼Œå³ä½¿å¾ˆå¤šäº‹æƒ…å¹¶éä½ çš„è´£ä»»ã€‚ä½ å¯èƒ½å¯¹è¿‡å»çš„é”™è¯¯æ— æ³•é‡Šæ€€ã€‚",
          cause: "å¯èƒ½æºäºç«¥å¹´æ—¶æœŸè¢«è¿‡åº¦è´£å¤‡ï¼Œæˆ–è€…ä½ è¢«æš—ç¤ºå®¶åº­çš„é—®é¢˜æ˜¯å› ä¸ºä½ è€Œèµ·ã€‚",
          impact: "è¿‡åº¦çš„è‡ªè´£ä¼šæ¶ˆè€—ä½ çš„å¿ƒç†èƒ½é‡ï¼Œè®©ä½ éš¾ä»¥äº«å—ç”Ÿæ´»ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´æŠ‘éƒå’Œç„¦è™‘ã€‚"
        },
        "æƒ…ç»ªçº ç»“": {
          manifestation: "ä½ å¯¹é‡è¦çš„äººæˆ–äº‹ç‰©æœ‰ç€çŸ›ç›¾å¤æ‚çš„æƒ…æ„Ÿï¼Œæ—¢çˆ±åˆæ¨ï¼Œæ—¢æ¸´æœ›åˆæŠ—æ‹’ã€‚",
          cause: "å¯èƒ½æºäºç«¥å¹´æ—¶æœŸå…»è‚²è€…ç»™äºˆäº†ä¸ä¸€è‡´çš„å¯¹å¾…ï¼Œæ—¢æœ‰å…³çˆ±ä¹Ÿæœ‰ä¼¤å®³ã€‚",
          impact: "è¿™ç§æƒ…æ„Ÿçº ç»“ä¼šè®©ä½ åœ¨å…³ç³»ä¸­æ„Ÿåˆ°ç—›è‹¦å’Œå›°æƒ‘ï¼Œéš¾ä»¥åšå‡ºæ¸…æ™°çš„å†³å®šã€‚"
        },
        "è‡ªæˆ‘éšè—": {
          manifestation: "ä½ ä¹ æƒ¯æ€§åœ°éšè—çœŸå®çš„è‡ªæˆ‘ï¼Œå‹æŠ‘çœŸå®çš„æƒ…ç»ªå’Œéœ€æ±‚ã€‚ä½ å¯èƒ½ä¸çŸ¥é“çœŸå®çš„è‡ªå·±æ˜¯ä»€ä¹ˆæ ·å­ã€‚",
          cause: "å¯èƒ½æºäºç«¥å¹´æ—¶æœŸçœŸå®çš„è‡ªæˆ‘ä¸è¢«æ¥çº³ï¼Œä½ å­¦ä¼šäº†æˆ´ä¸Šé¢å…·æ¥è·å¾—è®¤å¯å’Œå®‰å…¨ã€‚",
          impact: "é•¿æœŸçš„è‡ªæˆ‘å‹æŠ‘ä¼šå¯¼è‡´ä¸è‡ªå·±å’Œä»–äººçš„ç–ç¦»æ„Ÿï¼Œä¹Ÿå¯èƒ½å¼•å‘èº«å¿ƒå¥åº·é—®é¢˜ã€‚"
        }
      };
      // ==================== ç¬¬3éƒ¨åˆ†ï¼šä»‹ç»é¡µå’Œæµ‹è¯•é¡µç»„ä»¶ ====================

      // è¿™éƒ¨åˆ†ä»£ç è¦æ’å…¥åˆ°Part1ä¸­ï¼Œåœ¨ calculateResults å‡½æ•°ä¹‹å

      const handleTitleClick = () => {
        const newCount = titleClickCount + 1;
        setTitleClickCount(newCount);

        // æ¸…é™¤ä¹‹å‰çš„è®¡æ—¶å™¨
        if (titleClickTimerRef.current) {
          clearTimeout(titleClickTimerRef.current);
        }

        // 5æ¬¡ç‚¹å‡»åæ˜¾ç¤ºå¿«é€Ÿæµ‹è¯•æŒ‰é’®
        if (newCount === 5) {
          setShowQuickTest(true);
          setTitleClickCount(0);
        }

        // 10ç§’åé‡ç½®è®¡æ•°
        titleClickTimerRef.current = setTimeout(() => {
          setTitleClickCount(0);
        }, 10000);
      };

      // å¿«é€Ÿæµ‹è¯• - è‡ªåŠ¨éšæœºå¡«ç­”æ‰€æœ‰é—®é¢˜
      const handleQuickTest = () => {
        const quickAnswers = {};
        questions.forEach(q => {
          // éšæœºé€‰æ‹©1-5çš„ç­”æ¡ˆ
          quickAnswers[q.id] = Math.floor(Math.random() * 5) + 1;
        });

        // ä¿å­˜ç»“æœ
        saveResult(quickAnswers);
        // æ˜¾ç¤ºç»“æœé¡µé¢
        setCurrentPage('result');
        setAnswers(quickAnswers);
        setShowQuickTest(false);
      };

      const handleStartTest = () => {
        if (!agreedToWarning) {
          alert('è¯·å…ˆé˜…è¯»å¹¶åŒæ„å¿ƒç†å¥åº·æç¤º');
          return;
        }
        setCurrentPage('test');
        setCurrentQuestion(0);
        setAnswers({});
        // æ»šåŠ¨åˆ°é¡¶éƒ¨,æå‡ç”¨æˆ·ä½“éªŒ
        window.scrollTo({ top: 0, behavior: 'smooth' });
      };

      const handleAnswer = (value) => {
        const newAnswers = { ...answers, [questions[currentQuestion].id]: value };
        setAnswers(newAnswers);

        if (currentQuestion < questions.length - 1) {
          setTimeout(() => {
            setCurrentQuestion(currentQuestion + 1);
          }, 200);
        } else {
          saveResult(newAnswers);
          setCurrentPage('result');
        }
      };

      // ä»‹ç»é¡µæ¸²æŸ“
      const renderIntro = () => (
        <div className="min-h-screen healing-gradient p-3 sm:p-6">
          <div className="max-w-4xl mx-auto bg-white rounded-2xl shadow-xl p-4 sm:p-8">
            <div className="text-center mb-6 sm:mb-8">
              <div className="text-5xl sm:text-7xl mb-4">ğŸ¡</div>
              <h1
                onClick={handleTitleClick}
                className="text-2xl sm:text-4xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-2 sm:mb-4 cursor-pointer transition-transform hover:scale-105"
              >
                åŸç”Ÿå®¶åº­å¥åº·åº¦æµ‹è¯„
              </h1>
              <p className="text-sm sm:text-base text-gray-600">
                æ¢ç´¢å†…å¿ƒ Â· å…³ç…§è‡ªå·±çš„ä¸€é¢é•œå­
              </p>
            </div>

            {/* å¿ƒç†å¥åº·æç¤º */}
            <div className="warning-box rounded-xl p-4 sm:p-6 mb-6 fade-in">
              <div className="flex items-start space-x-3">
                <div className="text-2xl flex-shrink-0">âš ï¸</div>
                <div className="flex-1">
                  <h3 className="text-lg font-bold text-amber-900 mb-3">
                    å¿ƒç†å¥åº·æç¤º
                  </h3>
                  <ul className="space-y-2 text-sm text-amber-800">
                    <li>â€¢ æœ¬æµ‹è¯„ä»…ä¾›è‡ªæˆ‘æ¢ç´¢å‚è€ƒï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šå¿ƒç†å’¨è¯¢</li>
                    <li>â€¢ å¦‚æœåœ¨æµ‹è¯„è¿‡ç¨‹ä¸­æ„Ÿåˆ°å¼ºçƒˆä¸é€‚ï¼Œè¯·éšæ—¶åœæ­¢</li>
                    <li>â€¢ æµ‹è¯„ç»“æœå¯èƒ½è§¦åŠæ•æ„Ÿè¯é¢˜ï¼Œè¯·åœ¨å®‰å…¨çš„ç¯å¢ƒä¸­è¿›è¡Œ</li>
                    <li>â€¢ å¦‚éœ€ä¸“ä¸šå¸®åŠ©ï¼Œå»ºè®®å¯»æ±‚å¿ƒç†å’¨è¯¢å¸ˆçš„æ”¯æŒ</li>
                  </ul>
                  <div className="mt-4 flex items-center">
                    <input
                      type="checkbox"
                      id="agreeWarning"
                      checked={agreedToWarning}
                      onChange={(e) => setAgreedToWarning(e.target.checked)}
                      className="w-4 h-4 text-purple-600 rounded focus:ring-2 focus:ring-purple-500"
                      aria-label="åŒæ„å¿ƒç†å¥åº·æç¤º"
                    />
                    <label
                      htmlFor="agreeWarning"
                      className="ml-2 text-sm font-medium text-amber-900 cursor-pointer"
                    >
                      æˆ‘å·²é˜…è¯»å¹¶ç†è§£ä»¥ä¸Šæç¤º
                    </label>
                  </div>
                </div>
              </div>
            </div>

            {/* æµ‹è¯„è¯´æ˜ */}
            <div className="space-y-4 sm:space-y-6 text-gray-700 mb-8">
              <div className="bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-xl p-4 sm:p-6">
                <h3 className="text-lg sm:text-xl font-bold mb-3 text-blue-900">
                  ğŸ“‹ æµ‹è¯„è¯´æ˜
                </h3>
                <ul className="space-y-2 text-blue-800 text-sm sm:text-base">
                  <li>â€¢ æœ¬æµ‹è¯„è¯„ä¼°8ä¸ªç»´åº¦çš„åŸç”Ÿå®¶åº­å½±å“</li>
                  <li>â€¢ å…±48é“é¢˜ç›®ï¼Œé¢„è®¡8-12åˆ†é’Ÿå®Œæˆ</li>
                  <li>â€¢ è¯·æ ¹æ®çœŸå®æ„Ÿå—ä½œç­”ï¼Œæ²¡æœ‰å¯¹é”™ä¹‹åˆ†</li>
                  <li>â€¢ ç»“æœä¼šè‡ªåŠ¨ä¿å­˜ï¼Œæ”¯æŒæŸ¥çœ‹å†å²è®°å½•</li>
                </ul>
              </div>

              {/* 8ä¸ªç»´åº¦å¡ç‰‡ */}
              <div className="grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4">
                {Object.entries(dimensions).map(([key, dim]) => (
                  <div
                    key={key}
                    className="dimension-card bg-white border-2 rounded-lg p-3 text-center hover:shadow-lg"
                    style={{ borderColor: dim.color }}
                  >
                    <div className="text-3xl mb-2">{dim.icon}</div>
                    <div
                      className="font-semibold text-sm"
                      style={{ color: dim.color }}
                    >
                      {dim.name}
                    </div>
                    <div className="text-xs text-gray-500 mt-1">
                      {dim.description}
                    </div>
                  </div>
                ))}
              </div>
            </div>

            {/* æŒ‰é’®åŒºåŸŸ */}
            <div className="flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center items-center">
              <button
                onClick={handleStartTest}
                disabled={!agreedToWarning}
                className={`w-full sm:w-auto font-bold py-4 px-8 rounded-xl text-lg transition-all duration-300 shadow-lg ${agreedToWarning
                    ? 'bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 hover:from-blue-600 hover:via-purple-600 hover:to-pink-600 text-white hover:shadow-xl transform hover:scale-105'
                    : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                  }`}
                aria-label="å¼€å§‹æµ‹è¯„"
              >
                ğŸš€ å¼€å§‹æµ‹è¯„ (48é¢˜)
              </button>

              {showQuickTest && (
                <button
                  onClick={handleQuickTest}
                  className="w-full sm:w-auto bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white font-bold py-4 px-8 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105"
                >
                  âš¡ å¿«é€Ÿæµ‹è¯• (éšæœº)
                </button>
              )}

              {historyRecords.length > 0 && (
                <button
                  onClick={() => setShowHistory(!showHistory)}
                  className="w-full sm:w-auto bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-4 px-8 rounded-xl transition-colors"
                  aria-label={showHistory ? 'éšè—å†å²è®°å½•' : 'æŸ¥çœ‹å†å²è®°å½•'}
                >
                  ğŸ“Š æŸ¥çœ‹å†å²è®°å½• ({historyRecords.length})
                </button>
              )}
            </div>

            {/* å†å²è®°å½•åˆ—è¡¨ */}
            {showHistory && historyRecords.length > 0 && (
              <div className="mt-6 bg-gray-50 rounded-xl p-4 fade-in">
                <h3 className="font-bold text-lg mb-3">å†å²æµ‹è¯„è®°å½•</h3>
                <div className="space-y-2 max-h-64 overflow-y-auto">
                  {historyRecords.map((record, index) => {
                    const health = getOverallHealth(parseFloat(record.results.avgScore));
                    return (
                      <div
                        key={index}
                        className="bg-white p-3 rounded-lg border flex justify-between items-center hover:shadow-md transition-shadow"
                      >
                        <div>
                          <div className="font-semibold flex items-center space-x-2">
                            <span className={health.color}>{health.level}</span>
                            <span className="text-gray-400 text-sm">
                              (å¹³å‡ {record.results.avgScore} åˆ†)
                            </span>
                          </div>
                          <div className="text-sm text-gray-500">
                            {new Date(record.timestamp).toLocaleString('zh-CN')}
                          </div>
                        </div>
                        <button
                          onClick={() => {
                            setAnswers(record.answers);
                            setCurrentPage('result');
                          }}
                          className="text-purple-600 hover:text-purple-800 text-sm font-medium"
                        >
                          æŸ¥çœ‹è¯¦æƒ… â†’
                        </button>
                      </div>
                    );
                  })}
                </div>
              </div>
            )}
          </div>
        </div>
      );

      // æµ‹è¯•é¡µæ¸²æŸ“
      const renderTest = () => {
        const currentQ = questions[currentQuestion];
        const dimInfo = dimensions[currentQ.dimension];

        return (
          <div className="min-h-screen healing-gradient p-3 sm:p-6">
            <div className="max-w-2xl mx-auto bg-white rounded-2xl shadow-xl p-4 sm:p-8 fade-in">
              {/* è¿›åº¦ä¿¡æ¯ */}
              <div className="mb-6 sm:mb-8">
                <div className="flex items-center justify-between mb-4">
                  <div className="flex items-center space-x-2">
                    <span className="text-2xl">{dimInfo.icon}</span>
                    <span className="font-semibold text-gray-700">
                      {dimInfo.name}
                    </span>
                  </div>
                  <div className="text-right">
                    <div
                      className="text-lg sm:text-xl font-bold"
                      style={{ color: dimInfo.color }}
                    >
                      ç¬¬ {currentQuestion + 1} é¢˜
                    </div>
                    <div className="text-xs sm:text-sm text-gray-500">
                      å…± 48 é¢˜
                    </div>
                  </div>
                </div>

                {/* è¿›åº¦æ¡ */}
                <div className="w-full bg-gray-200 rounded-full h-2">
                  <div
                    className="h-2 rounded-full transition-all duration-300"
                    style={{
                      width: `${((currentQuestion + 1) / 48) * 100}%`,
                      background: `linear-gradient(90deg, ${dimInfo.color}, ${dimInfo.color}dd)`,
                    }}
                  ></div>
                </div>
                <div className="text-xs sm:text-sm text-gray-500 mt-1 text-right">
                  {((currentQuestion + 1) / 48 * 100).toFixed(0)}% å®Œæˆ
                </div>
              </div>

              {/* é¢˜ç›®å†…å®¹ */}
              <div className="mb-8">
                <h3 className="text-lg sm:text-2xl font-medium text-gray-800 text-center mb-8 leading-relaxed px-2">
                  {currentQ.text}
                </h3>

                {/* é€‰é¡¹æŒ‰é’® */}
                <div className="space-y-3">
                  {options.map((option) => (
                    <button
                      key={option.value}
                      onClick={() => handleAnswer(option.value)}
                      className="w-full text-left p-4 border-2 border-gray-200 rounded-xl hover:border-purple-400 hover:bg-purple-50 transition-all duration-200 group focus:outline-none focus:ring-2 focus:ring-offset-2"
                      style={{
                        borderColor:
                          answers[currentQ.id] === option.value
                            ? dimInfo.color
                            : undefined,
                        backgroundColor:
                          answers[currentQ.id] === option.value
                            ? `${dimInfo.color}15`
                            : undefined,
                      }}
                      aria-pressed={answers[currentQ.id] === option.value}
                      role="button"
                    >
                      <div className="flex items-center">
                        <span
                          className="font-bold text-lg w-8 h-8 rounded-full flex items-center justify-center mr-4 transition-colors flex-shrink-0"
                          style={{
                            backgroundColor:
                              answers[currentQ.id] === option.value
                                ? dimInfo.color
                                : `${dimInfo.color}20`,
                            color:
                              answers[currentQ.id] === option.value
                                ? '#fff'
                                : dimInfo.color,
                          }}
                        >
                          {option.label}
                        </span>
                        <span className="text-sm sm:text-base text-gray-800 break-words">
                          {option.text}
                        </span>
                      </div>
                    </button>
                  ))}
                </div>
              </div>

              {/* åº•éƒ¨å¯¼èˆª */}
              <div className="flex justify-between items-center">
                {currentQuestion > 0 ? (
                  <button
                    onClick={() => setCurrentQuestion(currentQuestion - 1)}
                    className="text-gray-500 hover:text-gray-700 transition-colors py-2 px-4 rounded-lg hover:bg-gray-100"
                  >
                    â† ä¸Šä¸€é¢˜
                  </button>
                ) : (
                  <div></div>
                )}

                <div className="text-sm text-gray-400">
                  å‰©ä½™ {48 - currentQuestion - 1} é¢˜
                </div>
              </div>
            </div>
          </div>
        );
      };
      // ==================== ç¬¬4éƒ¨åˆ†ï¼šç»“æœé¡µç»„ä»¶ ====================

      // è¿™éƒ¨åˆ†ä»£ç è¦æ’å…¥åˆ°Part3çš„ renderTest å‡½æ•°ä¹‹å

      // å›¾è¡¨æ¸²æŸ“
      useEffect(() => {
        if (currentPage === 'result' && chartRef.current && typeof Chart !== 'undefined') {
          const results = calculateResults();
          const ctx = chartRef.current.getContext('2d');

          const existingChart = Chart.getChart(ctx);
          if (existingChart) {
            existingChart.destroy();
          }

          const dimensionNames = Object.keys(dimensions);
          const chartData = dimensionNames.map(dim =>
            parseFloat(results.dimensionAvgScores[dim])
          );

          try {
            new Chart(ctx, {
              type: 'radar',
              data: {
                labels: dimensionNames,
                datasets: [
                  {
                    label: 'æ‚¨çš„åˆ†æ•°',
                    data: chartData,
                    borderColor: 'rgba(139, 92, 246, 1)',
                    backgroundColor: 'rgba(139, 92, 246, 0.2)',
                    pointBackgroundColor: dimensionNames.map(
                      dim => dimensions[dim].color
                    ),
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: dimensionNames.map(
                      dim => dimensions[dim].color
                    ),
                    pointRadius: 6,
                    pointHoverRadius: 8
                  },
                  {
                    label: 'å‚è€ƒå€¼',
                    data: Array(8).fill(2.5),
                    borderColor: 'rgba(251, 191, 36, 0.6)',
                    backgroundColor: 'rgba(251, 191, 36, 0.1)',
                    pointRadius: 0,
                    borderDash: [5, 5]
                  }
                ]
              },
              options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                  r: {
                    beginAtZero: true,
                    max: 5,
                    ticks: {
                      stepSize: 1,
                      font: { size: 11 }
                    },
                    pointLabels: {
                      font: { size: 10 }
                    }
                  }
                },
                plugins: {
                  legend: {
                    display: true,
                    position: 'top'
                  }
                }
              }
            });
          } catch (error) {
            console.log('å›¾è¡¨åˆ›å»ºå¤±è´¥:', error);
          }
        }
      }, [currentPage, answers]);

      const copyResultText = () => {
        const results = calculateResults();
        const health = getOverallHealth(parseFloat(results.avgScore));

        const text = `ğŸ¡ æˆ‘çš„åŸç”Ÿå®¶åº­å¥åº·åº¦æµ‹è¯„ç»“æœ

æ•´ä½“è¯„ä¼°ï¼š${health.level}
å¹³å‡åˆ†æ•°ï¼š${results.avgScore} / 5.0

ğŸ“Š é‡ç‚¹å…³æ³¨ç»´åº¦ TOP3ï¼š
${results.topDimensions.map(([dim, score], index) =>
          `${index + 1}. ${dimensions[dim].icon} ${dim} - ${score}åˆ†`
        ).join('\n')}

è¿™æ˜¯ä¸€é¢å¸®åŠ©æˆ‘ä»¬æ›´å¥½è®¤è¯†è‡ªå·±çš„é•œå­ ğŸª
#åŸç”Ÿå®¶åº­ #è‡ªæˆ‘æˆé•¿ #ç–—æ„ˆä¹‹è·¯`;

        // å¢å¼ºçš„å¤åˆ¶åŠŸèƒ½,æ”¯æŒæ›´å¤šæµè§ˆå™¨
        if (navigator.clipboard && navigator.clipboard.writeText) {
          navigator.clipboard.writeText(text).then(() => {
            alert('âœ… ç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
          }).catch((err) => {
            console.error('å¤åˆ¶å¤±è´¥:', err);
            fallbackCopyText(text);
          });
        } else {
          fallbackCopyText(text);
        }
      };

      // é™çº§å¤åˆ¶æ–¹æ¡ˆ
      const fallbackCopyText = (text) => {
        const textArea = document.createElement('textarea');
        textArea.value = text;
        textArea.style.position = 'fixed';
        textArea.style.left = '-999999px';
        document.body.appendChild(textArea);
        textArea.select();
        try {
          document.execCommand('copy');
          alert('âœ… ç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
        } catch (err) {
          console.error('å¤åˆ¶å¤±è´¥:', err);
          alert('âŒ å¤åˆ¶å¤±è´¥,è¯·æ‰‹åŠ¨å¤åˆ¶å†…å®¹');
        }
        document.body.removeChild(textArea);
      };

      // ç»“æœé¡µæ¸²æŸ“
      const renderResult = () => {
        let finalAnswers = answers;

        if (Object.keys(finalAnswers).length === 0) {
          try {
            const records = [];
            for (let i = 0; i < localStorage.length; i++) {
              const key = localStorage.key(i);
              if (key && key.startsWith('family_health_')) {
                const data = localStorage.getItem(key);
                if (data) {
                  records.push(JSON.parse(data));
                }
              }
            }
            records.sort((a, b) => b.timestamp - a.timestamp);
            if (records.length > 0) {
              finalAnswers = records[0].answers;
            }
          } catch (error) {
            console.log('è¯»å–å†å²ç­”æ¡ˆå¤±è´¥:', error);
          }
        }

        const results = calculateResults(finalAnswers);
        const health = getOverallHealth(parseFloat(results.avgScore));

        return (
          <div className="min-h-screen healing-gradient p-3 sm:p-6">
            <div className="max-w-6xl mx-auto bg-white rounded-2xl shadow-xl p-4 sm:p-8 fade-in">

              {/* æ•´ä½“è¯„ä¼°å¡ç‰‡ */}
              <div className={`${health.bgColor} rounded-2xl p-6 sm:p-8 mb-8 border-2 border-gray-200`}>
                <div className="text-center">
                  <div className="text-6xl sm:text-8xl mb-4">ğŸª</div>
                  <h2 className={`text-2xl sm:text-4xl font-bold mb-4 ${health.color}`}>
                    {health.level}
                  </h2>
                  <div className="text-lg sm:text-xl text-gray-700 mb-6">
                    æ‚¨çš„æ•´ä½“å¹³å‡åˆ†æ•°ï¼š
                    <span className={`font-bold text-2xl ml-2 ${health.color}`}>
                      {results.avgScore}
                    </span>
                    <span className="text-gray-500"> / 5.0</span>
                  </div>

                  {parseFloat(results.avgScore) >= 3.5 && (
                    <div className="bg-white bg-opacity-70 rounded-xl p-4 backdrop-blur-sm">
                      <p className="text-gray-700 leading-relaxed">
                        ğŸ’¡ å»ºè®®å¯»æ±‚ä¸“ä¸šçš„å¿ƒç†å’¨è¯¢æ”¯æŒï¼Œä¸“ä¸šå’¨è¯¢å¸ˆå¯ä»¥å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œç–—æ„ˆåŸç”Ÿå®¶åº­å¸¦æ¥çš„å½±å“ã€‚
                      </p>
                    </div>
                  )}
                </div>
              </div>

              {/* é›·è¾¾å›¾å’ŒTOP3 */}
              <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 mb-8">
                {/* é›·è¾¾å›¾ */}
                <div className="bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border border-purple-200">
                  <h3 className="text-xl font-bold text-gray-800 mb-4 text-center">
                    æ‚¨çš„åŸç”Ÿå®¶åº­ä¼¤ç—›ç»“æ„å›¾
                  </h3>
                  <div className="relative h-80">
                    <canvas ref={chartRef}></canvas>
                  </div>
                  <p className="text-sm text-gray-600 text-center mt-3">
                    è¶Šé è¿‘é¡¶ç«¯ï¼Œè¯´æ˜æ‚¨çš„ä¼¤ç—›è¶Šå¤§
                  </p>
                </div>

                {/* TOP3ç»´åº¦ */}
                <div className="space-y-4">
                  <h3 className="text-xl font-bold text-gray-800 mb-4">
                    â­ é‡ç‚¹å…³æ³¨ç»´åº¦ TOP3
                  </h3>
                  {results.topDimensions.map(([dimName, score], index) => {
                    const dimInfo = dimensions[dimName];
                    const levelInfo = getLevelInfo(parseFloat(score));
                    const medals = ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰'];

                    return (
                      <div
                        key={dimName}
                        className="bg-white border-2 rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow"
                        style={{ borderColor: dimInfo.color }}
                      >
                        <div className="flex items-center justify-between mb-2">
                          <div className="flex items-center space-x-3">
                            <span className="text-3xl">{medals[index]}</span>
                            <div>
                              <div className="flex items-center space-x-2">
                                <span className="text-2xl">{dimInfo.icon}</span>
                                <span className="font-bold text-lg">{dimName}</span>
                              </div>
                              <div className="text-sm text-gray-600">
                                {dimInfo.description}
                              </div>
                            </div>
                          </div>
                          <div className="text-right">
                            <div
                              className="text-2xl font-bold"
                              style={{ color: dimInfo.color }}
                            >
                              {score}
                            </div>
                            <div className={`result-badge ${levelInfo.class} mt-1`}>
                              {levelInfo.desc}
                            </div>
                          </div>
                        </div>
                        <div className="w-full bg-gray-200 rounded-full h-2 mt-3">
                          <div
                            className="h-2 rounded-full transition-all"
                            style={{
                              width: `${(parseFloat(score) / 5) * 100}%`,
                              backgroundColor: dimInfo.color
                            }}
                          ></div>
                        </div>
                      </div>
                    );
                  })}
                </div>
              </div>

              {/* TOP3ç»´åº¦è¯¦ç»†è§£è¯» */}
              <div className="mb-8 space-y-6">
                <h3 className="text-2xl font-bold text-gray-800 mb-4">
                  ğŸ“– é‡ç‚¹ç»´åº¦æ·±åº¦è§£è¯»
                </h3>
                {results.topDimensions.map(([dimName, score]) => {
                  const dimInfo = dimensions[dimName];
                  const detail = dimensionDetails[dimName];
                  const levelInfo = getLevelInfo(parseFloat(score));

                  return (
                    <div
                      key={dimName}
                      className="bg-gradient-to-br from-gray-50 to-white rounded-xl p-6 border-l-4 shadow-sm"
                      style={{ borderLeftColor: dimInfo.color }}
                    >
                      <div className="flex items-center justify-between mb-4">
                        <div className="flex items-center space-x-3">
                          <span className="text-4xl">{dimInfo.icon}</span>
                          <div>
                            <h4 className="text-xl font-bold" style={{ color: dimInfo.color }}>
                              {dimName}
                            </h4>
                            <span className={`result-badge ${levelInfo.class} mt-1`}>
                              ä¼¤ç—›ç¨‹åº¦ï¼š{levelInfo.desc}
                            </span>
                          </div>
                        </div>
                      </div>

                      <div className="space-y-4 text-gray-700">
                        <div>
                          <h5 className="font-semibold text-gray-800 mb-2 flex items-center">
                            <span className="mr-2">â–²</span>å…·ä½“è¡¨ç°
                          </h5>
                          <p className="leading-relaxed pl-6">
                            {detail.manifestation}
                          </p>
                        </div>

                        <div>
                          <h5 className="font-semibold text-gray-800 mb-2 flex items-center">
                            <span className="mr-2">â—†</span>ä¼¤ç—›æˆå› 
                          </h5>
                          <p className="leading-relaxed pl-6">
                            {detail.cause}
                          </p>
                        </div>

                        <div>
                          <h5 className="font-semibold text-gray-800 mb-2 flex items-center">
                            <span className="mr-2">â—</span>å½±å“ä¸å»ºè®®
                          </h5>
                          <p className="leading-relaxed pl-6">
                            {detail.impact}
                          </p>
                        </div>
                      </div>
                    </div>
                  );
                })}
              </div>

              {/* å®Œæ•´ç»´åº¦æŠ¥å‘Š */}
              <div className="mb-8">
                <h3 className="text-xl font-bold text-gray-800 mb-4">
                  ğŸ“Š å®Œæ•´ç»´åº¦è¯„ä¼°
                </h3>
                <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                  {results.sortedDimensions.map(([dimName, score]) => {
                    const dimInfo = dimensions[dimName];
                    const scoreNum = parseFloat(score);
                    const levelInfo = getLevelInfo(scoreNum);

                    return (
                      <div
                        key={dimName}
                        className="bg-gray-50 rounded-lg p-4 border hover:shadow-md transition-shadow"
                      >
                        <div className="flex items-center justify-between mb-2">
                          <div className="flex items-center space-x-2">
                            <span className="text-2xl">{dimInfo.icon}</span>
                            <span className="font-semibold">{dimName}</span>
                          </div>
                          <div className="flex items-center space-x-2">
                            <span
                              className="font-bold text-lg"
                              style={{ color: dimInfo.color }}
                            >
                              {score}
                            </span>
                            <span className={`result-badge ${levelInfo.class}`}>
                              {levelInfo.level}
                            </span>
                          </div>
                        </div>
                        <div className="w-full bg-gray-200 rounded-full h-1.5">
                          <div
                            className="h-1.5 rounded-full transition-all"
                            style={{
                              width: `${(scoreNum / 5) * 100}%`,
                              backgroundColor: dimInfo.color
                            }}
                          ></div>
                        </div>
                      </div>
                    );
                  })}
                </div>
              </div>

              {/* æˆé•¿å»ºè®® */}
              <div className="bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-xl p-6 mb-8">
                <h3 className="text-xl font-bold text-gray-800 mb-4 flex items-center">
                  <span className="mr-2">ğŸ’¡</span>
                  ç–—æ„ˆä¸æˆé•¿å»ºè®®
                </h3>
                <div className="space-y-3 text-gray-700">
                  <p className="leading-relaxed">
                    <strong>1. æ¥çº³ä¸è§‰å¯Ÿï¼š</strong>
                    è®¤è¯†åˆ°è¿™äº›æ¨¡å¼çš„å­˜åœ¨ï¼Œæ˜¯ç–—æ„ˆçš„ç¬¬ä¸€æ­¥ã€‚å¯¹è‡ªå·±æ¸©æŸ”ä¸€äº›ï¼Œè¿™äº›ååº”æ˜¯ä½ ä¸ºäº†ç”Ÿå­˜è€Œå‘å±•å‡ºçš„ä¿æŠ¤æœºåˆ¶ã€‚
                  </p>
                  <p className="leading-relaxed">
                    <strong>2. å¯»æ±‚æ”¯æŒï¼š</strong>
                    {parseFloat(results.avgScore) >= 3.5
                      ? 'æ‚¨çš„å¾—åˆ†è¾ƒé«˜ï¼Œå¼ºçƒˆå»ºè®®å¯»æ±‚ä¸“ä¸šå¿ƒç†å’¨è¯¢å¸ˆçš„å¸®åŠ©ã€‚ä¸“ä¸šçš„æ”¯æŒå¯ä»¥è®©ç–—æ„ˆä¹‹è·¯æ›´åŠ å®‰å…¨æœ‰æ•ˆã€‚'
                      : 'è€ƒè™‘åŠ å…¥æ”¯æŒå°ç»„ï¼Œæˆ–å¯»æ±‚å¿ƒç†å’¨è¯¢ï¼Œåœ¨ä¸“ä¸šçš„é™ªä¼´ä¸‹æ¢ç´¢å’Œç–—æ„ˆã€‚'
                    }
                  </p>
                  <p className="leading-relaxed">
                    <strong>3. å»ºç«‹æ–°æ¨¡å¼ï¼š</strong>
                    é€šè¿‡æ­£å¿µç»ƒä¹ ã€æƒ…ç»ªæ—¥è®°ç­‰æ–¹å¼ï¼Œé€æ­¥å»ºç«‹æ›´å¥åº·çš„åº”å¯¹æ¨¡å¼ã€‚æ”¹å˜éœ€è¦æ—¶é—´ï¼Œè¯·ç»™è‡ªå·±è¶³å¤Ÿçš„è€å¿ƒã€‚
                  </p>
                </div>
              </div>

              {/* å¿ƒç†æˆé•¿èµ„æºæ¨è */}
              <div className="mb-8">
                <div className="bg-gradient-to-br from-green-50 to-teal-50 rounded-2xl p-6 border border-green-200">
                  <div className="text-center mb-6">
                    <h3 className="text-2xl font-bold text-gray-800 mb-2 flex items-center justify-center">
                      <span className="mr-2">ğŸ“š</span>
                      å¿ƒç†æˆé•¿èµ„æºæ¨è
                    </h3>
                    <p className="text-gray-600 text-sm">æ¢ç´¢å†…å¿ƒ,å…³ç…§è‡ªå·±çš„æ¯ä¸€é¢</p>
                  </div>

                  <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    {/* æ›´å¤šå¿ƒç†è‡ªæµ‹å·¥å…·å¡ç‰‡ */}
                    <a
                      href="https://xhslink.com/m/9D0epdzjqnw"
                      target="_blank"
                      rel="noopener noreferrer"
                      className="block bg-white rounded-xl p-6 border-2 border-gray-200 hover:border-green-400 hover:shadow-lg transition-all duration-300 group"
                    >
                      <div className="flex items-start space-x-3">
                        <span className="text-3xl group-hover:scale-110 transition-transform">ğŸ“–</span>
                        <div className="flex-1">
                          <div className="font-bold text-gray-800 mb-1 group-hover:text-green-600 transition-colors">
                            æ›´å¤šå¿ƒç†è‡ªæµ‹å·¥å…·
                          </div>
                          <div className="text-sm text-gray-500">
                            å¸®åŠ©è§‰å¯Ÿå½“ä¸‹æƒ…ç»ª
                          </div>
                        </div>
                        <span className="text-gray-400 group-hover:text-green-600 transition-colors">â†’</span>
                      </div>
                    </a>

                    {/* æ—¶é—´è§„åˆ’è¡¨å¡ç‰‡ */}
                    <a
                      href="https://pan.quark.cn/s/266f60aa5bbf"
                      target="_blank"
                      rel="noopener noreferrer"
                      className="block bg-white rounded-xl p-6 border-2 border-gray-200 hover:border-yellow-400 hover:shadow-lg transition-all duration-300 group"
                    >
                      <div className="flex items-start space-x-3">
                        <span className="text-3xl group-hover:scale-110 transition-transform">ğŸ’¡</span>
                        <div className="flex-1">
                          <div className="font-bold text-gray-800 mb-1 group-hover:text-yellow-600 transition-colors">
                            2026é‡å¯äººç”Ÿ365å¤©æ—¶é—´è§„åˆ’è¡¨
                          </div>
                          <div className="text-sm text-gray-500">
                            ç³»ç»Ÿè§„åˆ’ç¾å¥½æœªæ¥
                          </div>
                        </div>
                        <span className="text-gray-400 group-hover:text-yellow-600 transition-colors">â†’</span>
                      </div>
                    </a>
                  </div>
                </div>
              </div>

              {/* åº•éƒ¨æŒ‰é’® */}
              <div className="flex flex-col sm:flex-row gap-4 justify-center items-center">
                <button
                  onClick={copyResultText}
                  className="w-full sm:w-auto bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-bold py-3 px-8 rounded-xl transition-all shadow-lg hover:shadow-xl"
                >
                  ğŸ“‹ å¤åˆ¶ç»“æœæ–‡æ¡ˆ
                </button>

                <button
                  onClick={() => {
                    setCurrentPage('intro');
                    setCurrentQuestion(0);
                    setAnswers({});
                    setAgreedToWarning(false);
                    window.scrollTo(0, 0);
                  }}
                  className="w-full sm:w-auto bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-3 px-8 rounded-xl transition-all shadow-lg hover:shadow-xl"
                >
                  ğŸ”„ é‡æ–°æµ‹è¯„
                </button>
              </div>

              {/* å…è´£å£°æ˜ */}
              <div className="mt-8 text-center text-sm text-gray-500 space-y-2">
                <p>ğŸ’ æœ¬æµ‹è¯„ç»“æœå·²è‡ªåŠ¨ä¿å­˜</p>
                <p className="max-w-2xl mx-auto">
                  æ­¤æµ‹è¯„ä»…ä¾›è‡ªæˆ‘æ¢ç´¢å‚è€ƒï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šè¯Šæ–­ã€‚
                  å¦‚éœ€ä¸“ä¸šå¸®åŠ©ï¼Œè¯·å¯»æ±‚å¿ƒç†å’¨è¯¢å¸ˆçš„æ”¯æŒã€‚
                </p>
                <p className="text-xs text-gray-400 mt-4">
                  ç–—æ„ˆæ˜¯ä¸€ä¸ªè¿‡ç¨‹ï¼Œè¯·æ¸©æŸ”åœ°å¯¹å¾…è‡ªå·± ğŸŒ±
                </p>
              </div>
            </div>
          </div>
        );
      };
      // ==================== ç¬¬5éƒ¨åˆ†ï¼šä¸»æ¸²æŸ“é€»è¾‘ ====================

      // è¿™éƒ¨åˆ†ä»£ç è¦æ’å…¥åˆ°Part4çš„ renderResult å‡½æ•°ä¹‹å
      // ä½œä¸º FamilyHealthAssessment ç»„ä»¶çš„ç»“æŸéƒ¨åˆ†

      // æ ¹æ®å½“å‰é¡µé¢æ¸²æŸ“ä¸åŒå†…å®¹
      switch (currentPage) {
        case 'intro':
          return renderIntro();
        case 'test':
          return renderTest();
        case 'result':
          return renderResult();
        default:
          return renderIntro();
      }
    };

    // æ¸²æŸ“åº”ç”¨åˆ°é¡µé¢
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(
      <ErrorBoundary>
        <FamilyHealthAssessment />
      </ErrorBoundary>
    );
  </script>
</body>

</html>
