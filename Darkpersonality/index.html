<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é»‘æš—äººæ ¼ç‰¹è´¨æµ‹è¯„ | Dark Personality Assessment</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>

  <style>
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #1e1e2e;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: #4a4a5e;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #5a5a6e;
    }

    @media (max-width: 640px) {
      .mobile-text-sm {
        font-size: 0.875rem;
      }

      .mobile-text-base {
        font-size: 1rem;
      }

      .mobile-text-lg {
        font-size: 1.125rem;
      }
    }

    .dark-gradient {
      background: linear-gradient(135deg,
          #0f0f1e 0%,
          #1a1a2e 25%,
          #16213e 50%,
          #1a1a2e 75%,
          #0f0f1e 100%);
    }

    .purple-glow {
      box-shadow: 0 0 30px rgba(139, 92, 246, 0.3);
    }

    .dimension-card {
      transition: all 0.3s ease;
      background: linear-gradient(135deg, rgba(30, 30, 46, 0.8), rgba(26, 26, 46, 0.8));
      backdrop-filter: blur(10px);
    }

    .dimension-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 30px rgba(139, 92, 246, 0.4);
    }

    .neon-border {
      border: 2px solid transparent;
      background: linear-gradient(#1a1a2e, #1a1a2e) padding-box,
        linear-gradient(135deg, #7c3aed, #dc2626) border-box;
    }

    .answer-option {
      transition: all 0.2s ease;
    }

    .answer-option:hover {
      transform: translateX(4px);
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
    }
  </style>
</head>

<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    const DarkPersonalityAssessment = () => {
      const [currentPage, setCurrentPage] = useState('intro');
      const [currentQuestion, setCurrentQuestion] = useState(0);
      const [answers, setAnswers] = useState({});
      const [showHistory, setShowHistory] = useState(false);
      const [historyRecords, setHistoryRecords] = useState([]);
      const [quickTestMode, setQuickTestMode] = useState(false);
      const [titleClickCount, setTitleClickCount] = useState(0);
      const [titleClickTimer, setTitleClickTimer] = useState(null);
      const chartRef = useRef(null);

      // 10ä¸ªé»‘æš—äººæ ¼ç»´åº¦é…ç½®
      const dimensions = {
        "é©¬åŸºé›…ç»´åˆ©ä¸»ä¹‰": {
          name: "é©¬åŸºé›…ç»´åˆ©ä¸»ä¹‰",
          nameEn: "Machiavellianism",
          icon: "ğŸ­",
          color: "#7C3AED",
          description: "æ“çºµä»–äººã€ç­–ç•¥æ€§æ€ç»´ã€æƒæœ¯å¯¼å‘"
        },
        "è‡ªæ‹": {
          name: "è‡ªæ‹",
          nameEn: "Narcissism",
          icon: "ğŸ‘‘",
          color: "#F59E0B",
          description: "è‡ªæˆ‘ä¸­å¿ƒã€ä¼˜è¶Šæ„Ÿã€éœ€è¦å´‡æ‹œ"
        },
        "ç²¾ç¥ç—…æ€": {
          name: "ç²¾ç¥ç—…æ€",
          nameEn: "Psychopathy",
          icon: "ğŸ¯",
          color: "#DC2626",
          description: "å†·é…·æ— æƒ…ã€å†²åŠ¨æ€§ã€ç¼ºä¹å…±æƒ…"
        },
        "æ–½è™å€¾å‘": {
          name: "æ–½è™å€¾å‘",
          nameEn: "Sadism",
          icon: "âš¡",
          color: "#B91C1C",
          description: "äº«å—ä»–äººç—›è‹¦ã€æ”»å‡»æ€§è¡Œä¸º"
        },
        "åˆ©å·±ä¸»ä¹‰": {
          name: "åˆ©å·±ä¸»ä¹‰",
          nameEn: "Egoism",
          icon: "ğŸ’",
          color: "#9333EA",
          description: "æç«¯è‡ªç§ã€åªé¡¾è‡ªèº«åˆ©ç›Š"
        },
        "é“å¾·æ¨è„±": {
          name: "é“å¾·æ¨è„±",
          nameEn: "Moral Disengagement",
          icon: "ğŸª",
          color: "#EA580C",
          description: "åˆç†åŒ–ä¸é“å¾·è¡Œä¸ºã€é€ƒé¿è´£ä»»"
        },
        "å¿ƒç†ç‰¹æƒæ„Ÿ": {
          name: "å¿ƒç†ç‰¹æƒæ„Ÿ",
          nameEn: "Entitlement",
          icon: "ğŸ†",
          color: "#D97706",
          description: "è®¤ä¸ºåº”å¾—ç‰¹æ®Šå¾…é‡ã€ç‰¹æƒæ€ç»´"
        },
        "æ¶æ„": {
          name: "æ¶æ„",
          nameEn: "Spitefulness",
          icon: "ğŸ—¡ï¸",
          color: "#991B1B",
          description: "ä¸»åŠ¨ä¼¤å®³ä»–äººã€æŠ¥å¤å¿ƒç†"
        },
        "è‡ªæˆ‘ä¸ºä¸­å¿ƒ": {
          name: "è‡ªæˆ‘ä¸ºä¸­å¿ƒ",
          nameEn: "Self-Centeredness",
          icon: "ğŸŒŸ",
          color: "#A855F7",
          description: "ç¼ºä¹å¯¹ä»–äººçš„å…³æ³¨å’Œå…±æƒ…"
        },
        "æ€¨æ¨": {
          name: "æ€¨æ¨",
          nameEn: "Resentment",
          icon: "âš”ï¸",
          color: "#7C2D12",
          description: "å¯¹ä»–äººå’Œä¸–ç•Œçš„æ•Œæ„æ€åº¦"
        }
      };

      // 50é“é¢˜ç›® - æ¯ä¸ªç»´åº¦5é¢˜
      const questions = [
        // é©¬åŸºé›…ç»´åˆ©ä¸»ä¹‰ (1-5)
        { id: 1, text: "ä¸ºäº†è¾¾æˆé‡è¦ç›®æ ‡ï¼Œå¿…è¦æ—¶å¯ä»¥æ¬ºéª—ä»–äºº", dimension: "é©¬åŸºé›…ç»´åˆ©ä¸»ä¹‰" },
        { id: 2, text: "æˆ‘å–„äºå¯Ÿè¨€è§‚è‰²ï¼Œåˆ©ç”¨ä»–äººçš„å¼±ç‚¹", dimension: "é©¬åŸºé›…ç»´åˆ©ä¸»ä¹‰" },
        { id: 3, text: "åœ¨ç«äº‰ä¸­ï¼Œç­–ç•¥æ¯”é“å¾·æ›´é‡è¦", dimension: "é©¬åŸºé›…ç»´åˆ©ä¸»ä¹‰" },
        { id: 4, text: "æˆ‘æ“…é•¿æ“çºµå±€é¢ï¼Œè®©äº‹æƒ…æŒ‰æˆ‘çš„æ„æ„¿å‘å±•", dimension: "é©¬åŸºé›…ç»´åˆ©ä¸»ä¹‰" },
        { id: 5, text: "åªè¦ä¸è¢«å‘ç°ï¼Œè¿åè§„åˆ™ä¹Ÿæ— å¦¨", dimension: "é©¬åŸºé›…ç»´åˆ©ä¸»ä¹‰" },

        // è‡ªæ‹ (6-10)
        { id: 6, text: "æˆ‘æ¯”å¤§å¤šæ•°äººæ›´æœ‰æ‰åå’Œèƒ½åŠ›", dimension: "è‡ªæ‹" },
        { id: 7, text: "æˆ‘å–œæ¬¢æˆä¸ºä¼—äººå…³æ³¨çš„ç„¦ç‚¹", dimension: "è‡ªæ‹" },
        { id: 8, text: "æˆ‘çš„æˆå°±åº”è¯¥å¾—åˆ°æ›´å¤šçš„è®¤å¯", dimension: "è‡ªæ‹" },
        { id: 9, text: "æˆ‘å¯¹è‡ªå·±çš„å¤–è¡¨å’Œå½¢è±¡éå¸¸è‡ªä¿¡", dimension: "è‡ªæ‹" },
        { id: 10, text: "åˆ«äººåº”è¯¥æ›´å¤šåœ°å°Šé‡å’Œå´‡æ‹œæˆ‘", dimension: "è‡ªæ‹" },

        // ç²¾ç¥ç—…æ€ (11-15)
        { id: 11, text: "æˆ‘å¾ˆå°‘ä¸ºè‡ªå·±çš„è¡Œä¸ºæ„Ÿåˆ°å†…ç–šæˆ–åæ‚”", dimension: "ç²¾ç¥ç—…æ€" },
        { id: 12, text: "æˆ‘å–œæ¬¢å†’é™©å’Œåˆºæ¿€æ€§çš„æ´»åŠ¨", dimension: "ç²¾ç¥ç—…æ€" },
        { id: 13, text: "åˆ«äººçš„ç—›è‹¦å¾ˆéš¾å¼•èµ·æˆ‘çš„æƒ…æ„Ÿå…±é¸£", dimension: "ç²¾ç¥ç—…æ€" },
        { id: 14, text: "æˆ‘ç»å¸¸å‡­å†²åŠ¨åšå†³å®šï¼Œä¸è€ƒè™‘åæœ", dimension: "ç²¾ç¥ç—…æ€" },
        { id: 15, text: "åœ¨å‹åŠ›ä¸‹ï¼Œæˆ‘èƒ½ä¿æŒå†·é™å’Œç†æ€§", dimension: "ç²¾ç¥ç—…æ€" },

        // æ–½è™å€¾å‘ (16-20)
        { id: 16, text: "çœ‹åˆ°åˆ«äººå°´å°¬æˆ–å‡ºä¸‘æ—¶ï¼Œæˆ‘ä¼šè§‰å¾—æœ‰è¶£", dimension: "æ–½è™å€¾å‘" },
        { id: 17, text: "æˆ‘äº«å—åœ¨æ¸¸æˆæˆ–ç«äº‰ä¸­å®Œå…¨å‹åˆ¶å¯¹æ‰‹", dimension: "æ–½è™å€¾å‘" },
        { id: 18, text: "æƒ©ç½šå†’çŠ¯æˆ‘çš„äººä¼šè®©æˆ‘æ„Ÿåˆ°æ»¡è¶³", dimension: "æ–½è™å€¾å‘" },
        { id: 19, text: "æˆ‘æœ‰æ—¶æƒ³çœ‹åˆ°æŸäº›äººå—åˆ°æ•™è®­", dimension: "æ–½è™å€¾å‘" },
        { id: 20, text: "åœ¨è¾©è®ºä¸­è®©å¯¹æ–¹å“‘å£æ— è¨€ä¼šè®©æˆ‘æ„Ÿåˆ°æ„‰æ‚¦", dimension: "æ–½è™å€¾å‘" },

        // åˆ©å·±ä¸»ä¹‰ (21-25)
        { id: 21, text: "æˆ‘çš„éœ€æ±‚å’Œåˆ©ç›Šæ°¸è¿œæ˜¯ç¬¬ä¸€ä½çš„", dimension: "åˆ©å·±ä¸»ä¹‰" },
        { id: 22, text: "å¦‚æœå¸®åŠ©åˆ«äººä¼šæŸå®³æˆ‘çš„åˆ©ç›Šï¼Œæˆ‘ä¼šæ‹’ç»", dimension: "åˆ©å·±ä¸»ä¹‰" },
        { id: 23, text: "æ¯ä¸ªäººéƒ½åº”è¯¥ä¼˜å…ˆè€ƒè™‘è‡ªå·±", dimension: "åˆ©å·±ä¸»ä¹‰" },
        { id: 24, text: "æˆ‘å¾ˆå°‘ä¸ºäº†ä»–äººè€Œç‰ºç‰²è‡ªå·±çš„æ—¶é—´æˆ–èµ„æº", dimension: "åˆ©å·±ä¸»ä¹‰" },
        { id: 25, text: "åœ¨åˆ†é…èµ„æºæ—¶ï¼Œæˆ‘ä¼šç¡®ä¿è‡ªå·±å¾—åˆ°æœ€å¤š", dimension: "åˆ©å·±ä¸»ä¹‰" },

        // é“å¾·æ¨è„± (26-30)
        { id: 26, text: "åªè¦æ˜¯ä¸ºäº†æ­£å½“ç›®çš„ï¼Œæ‰‹æ®µå¹¶ä¸é‡è¦", dimension: "é“å¾·æ¨è„±" },
        { id: 27, text: "æœ‰æ—¶ç¯å¢ƒä¼šè¿«ä½¿äººåšå‡ºä¸é“å¾·çš„é€‰æ‹©", dimension: "é“å¾·æ¨è„±" },
        { id: 28, text: "å¦‚æœå¤§å®¶éƒ½åœ¨åšï¼Œé‚£å°±ä¸ç®—é”™", dimension: "é“å¾·æ¨è„±" },
        { id: 29, text: "æˆ‘çš„ä¸å½“è¡Œä¸ºå¾€å¾€æ˜¯åˆ«äººé€¼å‡ºæ¥çš„", dimension: "é“å¾·æ¨è„±" },
        { id: 30, text: "ä¸æ›´å¤§çš„æ¶ç›¸æ¯”ï¼Œæˆ‘çš„å°è¿‡å¤±ä¸å€¼ä¸€æ", dimension: "é“å¾·æ¨è„±" },

        // å¿ƒç†ç‰¹æƒæ„Ÿ (31-35)
        { id: 31, text: "æˆ‘åº”è¯¥å¾—åˆ°ç‰¹æ®Šå¾…é‡å’Œä¼˜å…ˆæƒ", dimension: "å¿ƒç†ç‰¹æƒæ„Ÿ" },
        { id: 32, text: "è§„åˆ™å¯¹æˆ‘æ¥è¯´åº”è¯¥æ›´çµæ´»ä¸€äº›", dimension: "å¿ƒç†ç‰¹æƒæ„Ÿ" },
        { id: 33, text: "æˆ‘ä¸åº”è¯¥åƒå…¶ä»–äººä¸€æ ·æ’é˜Ÿç­‰å¾…", dimension: "å¿ƒç†ç‰¹æƒæ„Ÿ" },
        { id: 34, text: "æˆ‘æœŸæœ›åˆ«äººæ»¡è¶³æˆ‘çš„éœ€æ±‚", dimension: "å¿ƒç†ç‰¹æƒæ„Ÿ" },
        { id: 35, text: "å¹³å‡¡çš„æ ‡å‡†ä¸é€‚ç”¨äºæˆ‘", dimension: "å¿ƒç†ç‰¹æƒæ„Ÿ" },

        // æ¶æ„ (36-40)
        { id: 36, text: "å¦‚æœæœ‰äººä¼¤å®³äº†æˆ‘ï¼Œæˆ‘ä¼šæƒ³åŠæ³•æŠ¥å¤", dimension: "æ¶æ„" },
        { id: 37, text: "æˆ‘äº«å—è®©æ¬ºè´Ÿè¿‡æˆ‘çš„äººå°åˆ°è‹¦å¤´", dimension: "æ¶æ„" },
        { id: 38, text: "å³ä½¿æŸå®³è‡ªå·±ï¼Œæˆ‘ä¹Ÿè¦ç¡®ä¿æ•Œäººæ›´æƒ¨", dimension: "æ¶æ„" },
        { id: 39, text: "æœ‰æœºä¼šçš„è¯ï¼Œæˆ‘ä¼šç»™å†’çŠ¯æˆ‘çš„äººåˆ¶é€ éº»çƒ¦", dimension: "æ¶æ„" },
        { id: 40, text: "æˆ‘ä¼šè®°ä½æ¯ä¸€ä¸ªå¯¹æˆ‘ä¸å¥½çš„äºº", dimension: "æ¶æ„" },

        // è‡ªæˆ‘ä¸ºä¸­å¿ƒ (41-45)
        { id: 41, text: "æˆ‘å¾ˆéš¾çœŸæ­£å…³å¿ƒåˆ«äººçš„æ„Ÿå—", dimension: "è‡ªæˆ‘ä¸ºä¸­å¿ƒ" },
        { id: 42, text: "è°ˆè¯æ—¶ï¼Œæˆ‘æ›´å–œæ¬¢è°ˆè®ºè‡ªå·±", dimension: "è‡ªæˆ‘ä¸ºä¸­å¿ƒ" },
        { id: 43, text: "åˆ«äººçš„é—®é¢˜ä¸æˆ‘æ— å…³", dimension: "è‡ªæˆ‘ä¸ºä¸­å¿ƒ" },
        { id: 44, text: "æˆ‘å¾ˆå°‘ä¸»åŠ¨è¯¢é—®ä»–äººçš„è¿‘å†µ", dimension: "è‡ªæˆ‘ä¸ºä¸­å¿ƒ" },
        { id: 45, text: "æˆ‘å¯¹ä»–äººçš„å›°å¢ƒä¸å¤ªæ„Ÿå…´è¶£", dimension: "è‡ªæˆ‘ä¸ºä¸­å¿ƒ" },

        // æ€¨æ¨ (46-50)
        { id: 46, text: "è¿™ä¸ªä¸–ç•Œå¯¹æˆ‘æ˜¯ä¸å…¬å¹³çš„", dimension: "æ€¨æ¨" },
        { id: 47, text: "æˆ‘å¯¹é‚£äº›æ¯”æˆ‘æˆåŠŸçš„äººæ„Ÿåˆ°ä¸æ»¡", dimension: "æ€¨æ¨" },
        { id: 48, text: "äººä»¬æ€»æ˜¯åœ¨å æˆ‘çš„ä¾¿å®œ", dimension: "æ€¨æ¨" },
        { id: 49, text: "æˆ‘ç»å¸¸å¯¹ç¤¾ä¼šå’Œåˆ¶åº¦æ„Ÿåˆ°æ„¤æ€’", dimension: "æ€¨æ¨" },
        { id: 50, text: "æˆ‘è§‰å¾—è‡ªå·±æ²¡æœ‰å¾—åˆ°åº”å¾—çš„è®¤å¯", dimension: "æ€¨æ¨" }
      ];

      // è¯„åˆ†é€‰é¡¹
      const options = [
        { value: 1, label: 'A', text: 'å®Œå…¨ä¸ç¬¦åˆ' },
        { value: 2, label: 'B', text: 'ä¸å¤ªç¬¦åˆ' },
        { value: 3, label: 'C', text: 'ä¸­ç«‹' },
        { value: 4, label: 'D', text: 'æ¯”è¾ƒç¬¦åˆ' },
        { value: 5, label: 'E', text: 'éå¸¸ç¬¦åˆ' }
      ];

      // äººæ ¼ç±»å‹å®šä¹‰ - å°†åœ¨Part2ä¸­å®ç°
      const personalityTypes = {
        "é»‘æš—å›ç‹": {
          icon: "ğŸ‘‘",
          dimensions: ["é©¬åŸºé›…ç»´åˆ©ä¸»ä¹‰", "è‡ªæ‹", "ç²¾ç¥ç—…æ€"],
          description: "ä¸‰ç»´ä¿±é«˜ï¼Œå…·æœ‰å¼ºå¤§çš„æš—é»‘äººæ ¼ç‰¹è´¨",
          careers: ["é«˜å±‚ç®¡ç†", "æ”¿æ²»å®¶", "æŠ•èµ„äºº", "æˆ˜ç•¥é¡¾é—®"],
          color: "from-purple-600 to-red-600"
        },
        "ç­–ç•¥å¤§å¸ˆ": {
          icon: "ğŸ­",
          dimensions: ["é©¬åŸºé›…ç»´åˆ©ä¸»ä¹‰", "é“å¾·æ¨è„±", "å¿ƒç†ç‰¹æƒæ„Ÿ"],
          description: "å–„äºç­–ç•¥å’Œæ“çºµï¼Œè¿½æ±‚ç›®æ ‡ä¸æ‹©æ‰‹æ®µ",
          careers: ["å•†ä¸šè°ˆåˆ¤", "å…¬å…³é¡¾é—®", "æ”¿æ²»ç­–ç•¥å¸ˆ"],
          color: "from-purple-500 to-indigo-600"
        },
        "è‡ªæ‹é¢†è¢–": {
          icon: "ğŸŒŸ",
          dimensions: ["è‡ªæ‹", "å¿ƒç†ç‰¹æƒæ„Ÿ", "è‡ªæˆ‘ä¸ºä¸­å¿ƒ"],
          description: "æåº¦è‡ªä¿¡å’Œè‡ªæˆ‘ä¸­å¿ƒï¼Œè¿½æ±‚å…³æ³¨å’Œå´‡æ‹œ",
          careers: ["ä¼ä¸šCEO", "æ¼”è‰ºäººå‘˜", "ç¤¾äº¤åª’ä½“è¾¾äºº"],
          color: "from-yellow-500 to-orange-500"
        },
        "å†·é…·æ‰§è¡Œè€…": {
          icon: "ğŸ¯",
          dimensions: ["ç²¾ç¥ç—…æ€", "æ–½è™å€¾å‘", "æ¶æ„"],
          description: "ç¼ºä¹å…±æƒ…ï¼Œè¡Œäº‹æœæ–­å†·é…·",
          careers: ["å¤–ç§‘åŒ»ç”Ÿ", "ç‰¹ç§éƒ¨é˜Ÿ", "å±æœºå¤„ç†"],
          color: "from-red-600 to-gray-800"
        },
        "åˆ©å·±ä¸»ä¹‰è€…": {
          icon: "ğŸ’",
          dimensions: ["åˆ©å·±ä¸»ä¹‰", "å¿ƒç†ç‰¹æƒæ„Ÿ", "è‡ªæˆ‘ä¸ºä¸­å¿ƒ"],
          description: "æç«¯è‡ªç§ï¼Œåªå…³æ³¨è‡ªèº«åˆ©ç›Š",
          careers: ["æŠ•èµ„äº¤æ˜“", "ç‹¬ç«‹åˆ›ä¸š"],
          color: "from-purple-500 to-pink-500"
        },
        // æ›´å¤šç±»å‹å°†åœ¨åç»­å®šä¹‰...
      };

      // åŠ è½½å†å²è®°å½•
      useEffect(() => {
        loadHistory();
      }, []);

      const loadHistory = () => {
        try {
          const records = [];
          for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            if (key && key.startsWith('dark_personality_')) {
              try {
                const data = localStorage.getItem(key);
                if (data) {
                  records.push(JSON.parse(data));
                }
              } catch (e) {
                console.log('è¯»å–è®°å½•å¤±è´¥:', key);
              }
            }
          }
          records.sort((a, b) => b.timestamp - a.timestamp);
          setHistoryRecords(records);
        } catch (error) {
          console.log('å†å²è®°å½•åŠŸèƒ½æš‚ä¸å¯ç”¨:', error);
        }
      };

      const handleStartTest = () => {
        setCurrentPage('test');
        setCurrentQuestion(0);
        setAnswers({});
      };

      // å¤„ç†æ ‡é¢˜ç‚¹å‡»ï¼Œç”¨äºæ¿€æ´»å¿«é€Ÿæµ‹è¯•
      const handleTitleClick = () => {
        const now = Date.now();

        // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
        if (titleClickTimer) {
          clearTimeout(titleClickTimer);
        }

        const newCount = titleClickCount + 1;
        setTitleClickCount(newCount);

        if (newCount >= 5) {
          setQuickTestMode(true);
          setTitleClickCount(0);
          alert('ğŸš€ å¿«é€Ÿæµ‹è¯•æ¨¡å¼å·²æ¿€æ´»ï¼');
        } else {
          // 10ç§’åé‡ç½®è®¡æ•°
          const timer = setTimeout(() => {
            setTitleClickCount(0);
          }, 10000);
          setTitleClickTimer(timer);
        }
      };

      // å¿«é€Ÿæµ‹è¯•ï¼šè‡ªåŠ¨å¡«å……éšæœºç­”æ¡ˆ
      const handleQuickTest = () => {
        if (!window.confirm('ç¡®å®šè¦è¿›è¡Œå¿«é€Ÿæµ‹è¯•å—ï¼Ÿç³»ç»Ÿå°†è‡ªåŠ¨éšæœºå¡«å……æ‰€æœ‰ç­”æ¡ˆã€‚')) {
          return;
        }

        const randomAnswers = {};
        questions.forEach(q => {
          randomAnswers[q.id] = Math.floor(Math.random() * 5) + 1; // 1-5éšæœº
        });

        setAnswers(randomAnswers);
        saveResult(randomAnswers);
        setCurrentPage('result');
      };

      const handleAnswer = (value) => {
        const newAnswers = { ...answers, [questions[currentQuestion].id]: value };
        setAnswers(newAnswers);

        if (currentQuestion < questions.length - 1) {
          setCurrentQuestion(currentQuestion + 1);
        } else {
          saveResult(newAnswers);
          setCurrentPage('result');
        }
      };

      const saveResult = (finalAnswers) => {
        const results = calculateResults(finalAnswers);
        const record = {
          timestamp: Date.now(),
          answers: finalAnswers,
          results: results
        };

        try {
          localStorage.setItem(
            `dark_personality_${Date.now()}`,
            JSON.stringify(record)
          );
          loadHistory();
        } catch (error) {
          console.log('ä¿å­˜å¤±è´¥:', error);
        }
      };

      // è®¡ç®—ç»“æœ - æ ¸å¿ƒç®—æ³•
      const calculateResults = (finalAnswers = answers) => {
        const dimensionScores = {};

        // åˆå§‹åŒ–æ¯ä¸ªç»´åº¦åˆ†æ•°
        Object.keys(dimensions).forEach(dim => {
          dimensionScores[dim] = 0;
        });

        // ç´¯åŠ åˆ†æ•°
        questions.forEach(q => {
          const score = finalAnswers[q.id] || 0;
          dimensionScores[q.dimension] += score;
        });

        // è®¡ç®—å¹³å‡åˆ†ï¼ˆæ¯ä¸ªç»´åº¦5é¢˜ï¼Œæ€»åˆ†25ï¼Œå¹³å‡åˆ†5ï¼‰
        const dimensionAvgScores = {};
        Object.keys(dimensions).forEach(dim => {
          dimensionAvgScores[dim] = (dimensionScores[dim] / 5).toFixed(2);
        });

        // è®¡ç®—Då€¼æ€»åˆ†ï¼ˆæ‰€æœ‰ç»´åº¦å¹³å‡ï¼‰
        const dScore = (Object.values(dimensionAvgScores)
          .reduce((sum, score) => sum + parseFloat(score), 0) / 10).toFixed(2);

        // æ’åºæ‰¾å‡ºTOPç»´åº¦
        const sortedDimensions = Object.entries(dimensionAvgScores)
          .sort(([, a], [, b]) => parseFloat(b) - parseFloat(a));

        const topDimensions = sortedDimensions.slice(0, 3);

        // ç¡®å®šäººæ ¼ç±»å‹
        const personalityType = determinePersonalityType(sortedDimensions, dScore);

        return {
          dimensionScores,
          dimensionAvgScores,
          topDimensions,
          dScore,
          personalityType,
          percentile: calculatePercentile(dScore)
        };
      };

      // ç¡®å®šäººæ ¼ç±»å‹
      const determinePersonalityType = (sortedDimensions, dScore) => {
        const top3Names = sortedDimensions.slice(0, 3).map(([name]) => name);
        const dScoreNum = parseFloat(dScore);

        // å¦‚æœDå€¼å¾ˆé«˜ï¼ˆ>4.0ï¼‰
        if (dScoreNum >= 4.0) {
          return "é»‘æš—å›ç‹";
        }

        // æ£€æŸ¥ç‰¹å®šç»„åˆ
        for (const [typeName, typeInfo] of Object.entries(personalityTypes)) {
          if (typeInfo.dimensions && typeInfo.dimensions.length > 0) {
            const matchCount = typeInfo.dimensions.filter(dim =>
              top3Names.includes(dim)
            ).length;

            if (matchCount >= 2) {
              return typeName;
            }
          }
        }

        // æ ¹æ®Då€¼èŒƒå›´åˆ†ç±»
        if (dScoreNum >= 3.5) {
          return "é«˜æš—é»‘ç‰¹è´¨";
        } else if (dScoreNum >= 2.5) {
          return "ä¸­ç­‰æš—é»‘ç‰¹è´¨";
        } else {
          return "ä½æš—é»‘ç‰¹è´¨";
        }
      };

      // è®¡ç®—ç™¾åˆ†ä½
      const calculatePercentile = (dScore) => {
        // å‡è®¾æ­£æ€åˆ†å¸ƒï¼Œå‡å€¼2.5ï¼Œæ ‡å‡†å·®0.8
        const score = parseFloat(dScore);
        const mean = 2.5;
        const sd = 0.8;
        const z = (score - mean) / sd;

        // ç®€åŒ–çš„ç™¾åˆ†ä½è®¡ç®—
        let percentile = 50 + (z * 34);
        percentile = Math.max(0, Math.min(100, percentile));
        return Math.round(percentile);
      };

      const renderIntro = () => (
        <div className="min-h-screen dark-gradient p-3 sm:p-6 flex items-center">
          <div className="max-w-5xl mx-auto w-full">

            {/* ä¸»æ ‡é¢˜åŒºåŸŸ - ç§»åŠ¨ç«¯ç´§å‡‘ */}
            <div className="text-center mb-4 sm:mb-8">
              <div className="inline-block mb-3 sm:mb-6">
                <div className="text-5xl sm:text-8xl mb-2 sm:mb-4 animate-pulse">ğŸŒ‘</div>
                <div className="h-1 w-20 sm:w-24 mx-auto bg-gradient-to-r from-purple-600 via-red-600 to-purple-600 rounded-full"></div>
              </div>

              <h1
                className="text-2xl sm:text-5xl font-bold mb-2 sm:mb-4 bg-gradient-to-r from-purple-400 via-pink-400 to-red-400 bg-clip-text text-transparent leading-relaxed cursor-pointer select-none"
                onClick={handleTitleClick}
              >
                é»‘æš—äººæ ¼ç‰¹è´¨æµ‹è¯„
              </h1>
              <p className="text-base sm:text-xl text-gray-300 mb-1 sm:mb-2">Dark Personality Assessment</p>
              <p className="text-xs sm:text-base text-gray-400">
                åŸºäºé»‘æš—åå› å­ç†è®º Â· ç§‘å­¦è¯„ä¼°äººæ ¼æš—é¢ç‰¹è´¨
              </p>
            </div>

            {/* æ ¸å¿ƒä»‹ç»å¡ç‰‡ - ç§»åŠ¨ç«¯ç²¾ç®€ */}
            <div className="bg-gradient-to-br from-gray-900 to-gray-800 rounded-xl sm:rounded-2xl shadow-2xl p-4 sm:p-10 mb-4 sm:mb-8 neon-border purple-glow">

              {/* ä»€ä¹ˆæ˜¯é»‘æš—äººæ ¼ - ç§»åŠ¨ç«¯å¯æŠ˜å  */}
              <div className="mb-4 sm:mb-8 hidden sm:block">
                <div className="flex items-center mb-4">
                  <span className="text-3xl mr-3">ğŸ­</span>
                  <h2 className="text-2xl sm:text-3xl font-bold text-white">ä»€ä¹ˆæ˜¯é»‘æš—äººæ ¼ç‰¹è´¨ï¼Ÿ</h2>
                </div>
                <div className="text-gray-300 leading-relaxed space-y-3 text-sm sm:text-base">
                  <p>
                    é»‘æš—äººæ ¼ç‰¹è´¨ï¼ˆDark Personality Traitsï¼‰æ˜¯å¿ƒç†å­¦ä¸­æè¿°äººæ ¼"æš—é¢"çš„æ¦‚å¿µã€‚
                    å®ƒä¸ä»£è¡¨ç²¾ç¥ç–¾ç—…ï¼Œè€Œæ˜¯æ¯ä¸ªäººéƒ½æˆ–å¤šæˆ–å°‘å…·æœ‰çš„äººæ ¼å€¾å‘ã€‚
                  </p>
                  <p>
                    æœ¬æµ‹è¯„åŸºäº<strong className="text-purple-400">é»‘æš—åå› å­æ¨¡å‹ï¼ˆDark Factorï¼‰</strong>ï¼Œ
                    è¯„ä¼°10ä¸ªæ ¸å¿ƒç»´åº¦ï¼Œå¸®åŠ©ä½ å…¨é¢äº†è§£è‡ªå·±çš„äººæ ¼ç‰¹å¾ã€‚
                  </p>
                </div>
              </div>

              {/* ç§»åŠ¨ç«¯ç®€åŒ–ç‰ˆä»‹ç» */}
              <div className="mb-4 block sm:hidden">
                <div className="text-center text-gray-300 text-sm leading-relaxed">
                  <p className="mb-2">
                    åŸºäº<strong className="text-purple-400">é»‘æš—åå› å­æ¨¡å‹</strong>
                  </p>
                  <p className="text-xs text-gray-400">
                    50é¢˜ Â· 10ç»´åº¦ Â· çº¦8åˆ†é’Ÿ Â· æœ¬åœ°å­˜å‚¨
                  </p>
                </div>
              </div>

              {/* æµ‹è¯„è¯´æ˜ - ç§»åŠ¨ç«¯ç²¾ç®€ */}
              <div className="bg-purple-900 bg-opacity-30 border border-purple-500 rounded-lg sm:rounded-xl p-3 sm:p-6 mb-4 sm:mb-8 hidden sm:block">
                <h3 className="text-xl sm:text-2xl font-bold mb-4 text-purple-300 flex items-center">
                  <span className="mr-2">ğŸ“‹</span>
                  æµ‹è¯„è¯´æ˜
                </h3>
                <ul className="space-y-3 text-gray-200 text-sm sm:text-base">
                  <li className="flex items-start">
                    <span className="text-purple-400 mr-2 flex-shrink-0">â—</span>
                    <span><strong>é¢˜ç›®æ•°é‡ï¼š</strong>50é¢˜ï¼ˆ10ä¸ªç»´åº¦ï¼Œæ¯ç»´åº¦5é¢˜ï¼‰</span>
                  </li>
                  <li className="flex items-start">
                    <span className="text-purple-400 mr-2 flex-shrink-0">â—</span>
                    <span><strong>å®Œæˆæ—¶é—´ï¼š</strong>çº¦8-10åˆ†é’Ÿ</span>
                  </li>
                  <li className="flex items-start">
                    <span className="text-purple-400 mr-2 flex-shrink-0">â—</span>
                    <span><strong>ä½œç­”æ–¹å¼ï¼š</strong>æ ¹æ®çœŸå®æ„Ÿå—é€‰æ‹©æœ€ç¬¦åˆçš„é€‰é¡¹ï¼Œæ²¡æœ‰å¯¹é”™ä¹‹åˆ†</span>
                  </li>
                  <li className="flex items-start">
                    <span className="text-purple-400 mr-2 flex-shrink-0">â—</span>
                    <span><strong>éšç§ä¿æŠ¤ï¼š</strong>æ‰€æœ‰æ•°æ®ä»…ä¿å­˜åœ¨æœ¬åœ°ï¼Œä¸ä¼šä¸Šä¼ </span>
                  </li>
                  <li className="flex items-start">
                    <span className="text-purple-400 mr-2 flex-shrink-0">â—</span>
                    <span><strong>ç»“æœè§£è¯»ï¼š</strong>è·å¾—Då€¼æ€»åˆ†ã€10ç»´åº¦é›·è¾¾å›¾å’Œè¯¦ç»†åˆ†ææŠ¥å‘Š</span>
                  </li>
                </ul>
              </div>

              {/* 10ä¸ªç»´åº¦å±•ç¤º - ç§»åŠ¨ç«¯éšè—æˆ–ç²¾ç®€ */}
              <div className="mb-4 sm:mb-8 hidden sm:block">
                <h3 className="text-xl sm:text-2xl font-bold mb-6 text-white text-center">
                  ğŸ”Ÿ è¯„ä¼°ç»´åº¦
                </h3>
                <div className="grid grid-cols-2 sm:grid-cols-5 gap-3 sm:gap-4">
                  {Object.entries(dimensions).map(([key, dim]) => (
                    <div
                      key={key}
                      className="dimension-card border-2 rounded-xl p-4 text-center cursor-pointer"
                      style={{ borderColor: dim.color + '40' }}
                    >
                      <div className="text-4xl mb-2">{dim.icon}</div>
                      <div className="font-bold text-sm text-white mb-1">{dim.name}</div>
                      <div className="text-xs text-gray-400">{dim.nameEn}</div>
                    </div>
                  ))}
                </div>
              </div>

              {/* é‡è¦å£°æ˜ - ç§»åŠ¨ç«¯ç²¾ç®€ */}
              <div className="bg-red-900 bg-opacity-20 border border-red-500 rounded-lg sm:rounded-xl p-3 sm:p-5 mb-0 sm:mb-6">
                <h3 className="text-base sm:text-lg font-bold mb-2 sm:mb-3 text-red-300 flex items-center">
                  <span className="mr-2">âš ï¸</span>
                  é‡è¦å£°æ˜
                </h3>
                <ul className="space-y-1 sm:space-y-2 text-gray-300 text-xs sm:text-sm">
                  <li>â€¢ æœ¬æµ‹è¯„ä»…ç”¨äºè‡ªæˆ‘è®¤çŸ¥å’Œå¿ƒç†å­¦ç ”ç©¶ï¼Œä¸æ„æˆä»»ä½•è¯Šæ–­</li>
                  <li className="hidden sm:block">â€¢ å¾—åˆ†é«˜ä½ä¸ä»£è¡¨å¥½åï¼Œæ¯ä¸ªäººéƒ½æœ‰ç‹¬ç‰¹çš„äººæ ¼ç‰¹å¾</li>
                  <li className="hidden sm:block">â€¢ é»‘æš—ç‰¹è´¨åœ¨ç‰¹å®šæƒ…å¢ƒä¸‹å¯èƒ½æ˜¯ä¼˜åŠ¿ï¼ˆå¦‚é¢†å¯¼åŠ›ã€å†³æ–­åŠ›ï¼‰</li>
                  <li className="hidden sm:block">â€¢ å¦‚æ„Ÿåˆ°å›°æ‰°ï¼Œå»ºè®®å¯»æ±‚ä¸“ä¸šå¿ƒç†å’¨è¯¢</li>
                </ul>
              </div>
            </div>

            {/* æ“ä½œæŒ‰é’®åŒºåŸŸ */}
            <div className="flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center items-center mb-4 sm:mb-6">
              <button
                onClick={handleStartTest}
                className="w-full sm:w-auto bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 hover:from-purple-700 hover:via-pink-700 hover:to-red-700 text-white font-bold py-4 sm:py-5 px-8 sm:px-10 rounded-xl text-base sm:text-lg transition-all duration-300 shadow-2xl hover:shadow-purple-500/50 transform hover:scale-105 flex items-center justify-center space-x-2"
              >
                <span>ğŸš€</span>
                <span>å¼€å§‹æµ‹è¯„ (50é¢˜)</span>
              </button>

              {quickTestMode && (
                <button
                  onClick={handleQuickTest}
                  className="w-full sm:w-auto bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700 text-white font-bold py-4 sm:py-5 px-8 sm:px-10 rounded-xl text-base sm:text-lg transition-all duration-300 shadow-2xl hover:shadow-yellow-500/50 transform hover:scale-105 flex items-center justify-center space-x-2"
                >
                  <span>âš¡</span>
                  <span>å¿«é€Ÿæµ‹è¯•</span>
                </button>
              )}

              {historyRecords.length > 0 && (
                <button
                  onClick={() => setShowHistory(!showHistory)}
                  className="w-full sm:w-auto bg-gray-700 hover:bg-gray-600 text-white font-semibold py-4 sm:py-5 px-8 sm:px-10 rounded-xl transition-all duration-300 flex items-center justify-center space-x-2 border border-gray-600 text-sm sm:text-base"
                >
                  <span>ğŸ“Š</span>
                  <span>å†å²è®°å½• ({historyRecords.length})</span>
                </button>
              )}
            </div>

            {/* å†å²è®°å½•å±•ç¤º */}
            {showHistory && historyRecords.length > 0 && (
              <div className="bg-gradient-to-br from-gray-900 to-gray-800 rounded-xl p-6 border border-gray-700">
                <h3 className="font-bold text-xl mb-4 text-white flex items-center">
                  <span className="mr-2">ğŸ“œ</span>
                  å†å²æµ‹è¯„è®°å½•
                </h3>
                <div className="space-y-3 max-h-80 overflow-y-auto">
                  {historyRecords.map((record, index) => (
                    <div
                      key={index}
                      className="bg-gray-800 p-4 rounded-lg border border-gray-700 hover:border-purple-500 transition-all cursor-pointer"
                    >
                      <div className="flex justify-between items-center">
                        <div className="flex-1">
                          <div className="flex items-center space-x-3 mb-2">
                            <span className="text-3xl">
                              {personalityTypes[record.results.personalityType]?.icon || 'ğŸŒ‘'}
                            </span>
                            <div>
                              <div className="font-bold text-white text-lg">
                                {record.results.personalityType}
                              </div>
                              <div className="text-sm text-gray-400">
                                {new Date(record.timestamp).toLocaleString('zh-CN', {
                                  year: 'numeric',
                                  month: '2-digit',
                                  day: '2-digit',
                                  hour: '2-digit',
                                  minute: '2-digit'
                                })}
                              </div>
                            </div>
                          </div>
                          <div className="flex items-center space-x-4 text-sm">
                            <div className="text-purple-400">
                              <span className="font-semibold">Då€¼ï¼š</span>
                              {record.results.dScore}
                            </div>
                            <div className="text-gray-400">
                              <span className="font-semibold">ç™¾åˆ†ä½ï¼š</span>
                              {record.results.percentile}%
                            </div>
                          </div>
                        </div>
                        <div className="text-right">
                          <div className="text-xs text-gray-500 mb-1">TOPç»´åº¦</div>
                          <div className="space-y-1">
                            {record.results.topDimensions.slice(0, 3).map(([dim, score], idx) => (
                              <div key={idx} className="text-xs text-gray-300">
                                {dimensions[dim].icon} {dim}
                              </div>
                            ))}
                          </div>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            )}

            {/* é¡µè„šä¿¡æ¯ - ç§»åŠ¨ç«¯éšè— */}
            <div className="text-center mt-4 sm:mt-8 text-xs sm:text-sm text-gray-500 hidden sm:block">
              <p>ğŸ’¡ åŸºäºå¿ƒç†å­¦ç ”ç©¶ Â· ä»…ä¾›å‚è€ƒ Â· äº†è§£è‡ªæˆ‘ Â· æ¢ç´¢äººæ ¼æš—é¢</p>
              <p className="mt-2 text-xs">
                æœ¬æµ‹è¯„å‚è€ƒï¼šDark Triad, Dark Tetrad, Dark Factor ç›¸å…³ç ”ç©¶
              </p>
            </div>
          </div>
        </div>
      );

      const renderTest = () => {
        const currentQ = questions[currentQuestion];
        const dimInfo = dimensions[currentQ.dimension];
        const progress = ((currentQuestion + 1) / questions.length * 100).toFixed(1);

        return (
          <div className="min-h-screen dark-gradient p-3 sm:p-6">
            <div className="max-w-3xl mx-auto">

              {/* é¡¶éƒ¨è¿›åº¦ä¿¡æ¯ */}
              <div className="bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl shadow-2xl p-6 sm:p-8 mb-6 neon-border">

                {/* é¢˜å·å’Œç»´åº¦ä¿¡æ¯ */}
                <div className="flex items-center justify-between mb-6">
                  <div className="flex items-center space-x-3">
                    <span className="text-4xl">{dimInfo.icon}</span>
                    <div>
                      <div className="text-white font-bold text-lg sm:text-xl">
                        {dimInfo.name}
                      </div>
                      <div className="text-gray-400 text-xs sm:text-sm">
                        {dimInfo.nameEn}
                      </div>
                    </div>
                  </div>

                  <div className="text-right">
                    <div
                      className="text-2xl sm:text-3xl font-bold mb-1"
                      style={{ color: dimInfo.color }}
                    >
                      {currentQuestion + 1} / 50
                    </div>
                    <div className="text-xs text-gray-400">
                      ç¬¬ {Math.floor(currentQuestion / 5) + 1} ç»´åº¦
                    </div>
                  </div>
                </div>

                {/* è¿›åº¦æ¡ */}
                <div className="mb-4">
                  <div className="w-full bg-gray-700 rounded-full h-3 overflow-hidden">
                    <div
                      className="h-3 rounded-full transition-all duration-500 ease-out relative"
                      style={{
                        width: `${progress}%`,
                        background: `linear-gradient(90deg, ${dimInfo.color}, ${dimInfo.color}dd)`
                      }}
                    >
                      <div className="absolute inset-0 bg-white opacity-20 animate-pulse"></div>
                    </div>
                  </div>
                  <div className="flex justify-between items-center mt-2 text-xs sm:text-sm">
                    <span className="text-gray-400">{progress}% å®Œæˆ</span>
                    <span className="text-gray-400">å‰©ä½™ {50 - currentQuestion - 1} é¢˜</span>
                  </div>
                </div>

                {/* å½“å‰ç»´åº¦è¯´æ˜ */}
                <div className="bg-gray-800 bg-opacity-50 rounded-lg p-3 border border-gray-700">
                  <div className="text-gray-300 text-xs sm:text-sm">
                    <span className="text-purple-400 font-semibold">å½“å‰è¯„ä¼°ï¼š</span>
                    {dimInfo.description}
                  </div>
                </div>
              </div>

              {/* é¢˜ç›®å¡ç‰‡ */}
              <div className="bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl shadow-2xl p-6 sm:p-10 mb-6 neon-border purple-glow">

                {/* é¢˜ç›®æ–‡æœ¬ */}
                <div className="mb-10">
                  <div className="text-center mb-4">
                    <span className="inline-block px-4 py-2 rounded-full text-xs font-semibold"
                      style={{
                        backgroundColor: dimInfo.color + '20',
                        color: dimInfo.color,
                        border: `1px solid ${dimInfo.color}40`
                      }}
                    >
                      é¢˜ç›® {currentQ.id}
                    </span>
                  </div>

                  <h3 className="text-xl sm:text-2xl lg:text-3xl font-medium text-white text-center leading-relaxed px-2 min-h-[80px] flex items-center justify-center">
                    {currentQ.text}
                  </h3>
                </div>

                {/* é€‰é¡¹ */}
                <div className="space-y-3 sm:space-y-4">
                  {options.map(option => {
                    const isSelected = answers[currentQ.id] === option.value;

                    return (
                      <button
                        key={option.value}
                        onClick={() => handleAnswer(option.value)}
                        className={`answer-option w-full text-left p-4 sm:p-5 border-2 rounded-xl transition-all duration-200 ${isSelected
                            ? 'border-opacity-100 shadow-lg'
                            : 'border-gray-700 hover:border-gray-600'
                          }`}
                        style={{
                          borderColor: isSelected ? dimInfo.color : undefined,
                          backgroundColor: isSelected
                            ? `${dimInfo.color}15`
                            : 'rgba(31, 41, 55, 0.5)',
                          boxShadow: isSelected
                            ? `0 0 20px ${dimInfo.color}40`
                            : undefined
                        }}
                      >
                        <div className="flex items-center">
                          <div
                            className="font-bold text-lg sm:text-xl w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center mr-4 flex-shrink-0 transition-all"
                            style={{
                              backgroundColor: isSelected
                                ? dimInfo.color
                                : `${dimInfo.color}30`,
                              color: isSelected ? 'white' : dimInfo.color,
                              border: `2px solid ${isSelected ? dimInfo.color : `${dimInfo.color}60`}`
                            }}
                          >
                            {option.label}
                          </div>
                          <div>
                            <div className="text-base sm:text-lg text-white font-medium mb-1">
                              {option.text}
                            </div>
                            <div className="text-xs text-gray-400">
                              {option.value === 1 && 'æˆ‘å®Œå…¨ä¸æ˜¯è¿™æ ·çš„'}
                              {option.value === 2 && 'æˆ‘ä¸å¤ªè®¤åŒè¿™ä¸ªæè¿°'}
                              {option.value === 3 && 'è¯´ä¸å‡†/æœ‰æ—¶æ˜¯æœ‰æ—¶ä¸æ˜¯'}
                              {option.value === 4 && 'æˆ‘æ¯”è¾ƒè®¤åŒè¿™ä¸ªæè¿°'}
                              {option.value === 5 && 'è¿™éå¸¸ç¬¦åˆæˆ‘çš„æƒ…å†µ'}
                            </div>
                          </div>
                        </div>
                      </button>
                    );
                  })}
                </div>
              </div>

              {/* åº•éƒ¨å¯¼èˆª */}
              <div className="flex justify-between items-center">
                {currentQuestion > 0 ? (
                  <button
                    onClick={() => setCurrentQuestion(currentQuestion - 1)}
                    className="bg-gray-700 hover:bg-gray-600 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 flex items-center space-x-2 border border-gray-600"
                  >
                    <span>â†</span>
                    <span>ä¸Šä¸€é¢˜</span>
                  </button>
                ) : (
                  <button
                    onClick={() => {
                      if (window.confirm('ç¡®å®šè¦é€€å‡ºæµ‹è¯„å—ï¼Ÿå½“å‰è¿›åº¦å°†ä¸ä¼šä¿å­˜ã€‚')) {
                        setCurrentPage('intro');
                        setAnswers({});
                      }
                    }}
                    className="bg-gray-700 hover:bg-gray-600 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 flex items-center space-x-2 border border-gray-600"
                  >
                    <span>âœ•</span>
                    <span>é€€å‡º</span>
                  </button>
                )}

                {/* å³ä¾§æç¤ºæˆ–è·³è¿‡ */}
                <div className="text-right">
                  {answers[currentQ.id] ? (
                    <div className="text-green-400 text-sm flex items-center space-x-2">
                      <span>âœ“</span>
                      <span>å·²ä½œç­”</span>
                    </div>
                  ) : (
                    <div className="text-gray-500 text-sm">
                      è¯·é€‰æ‹©ç­”æ¡ˆ
                    </div>
                  )}
                </div>
              </div>

              {/* é¢å¤–æç¤º */}
              <div className="mt-6 text-center">
                <div className="inline-block bg-gray-800 bg-opacity-50 rounded-lg px-6 py-3 border border-gray-700">
                  <p className="text-gray-400 text-sm">
                    ğŸ’¡ æ ¹æ®ç¬¬ä¸€ç›´è§‰ä½œç­”ï¼Œä¸è¦è¿‡åº¦æ€è€ƒ
                  </p>
                </div>
              </div>
            </div>
          </div>
        );
      };

      const renderResult = () => {
        let finalAnswers = answers;

        // å¦‚æœanswersä¸ºç©ºï¼Œå°è¯•ä»localStorageè¯»å–æœ€æ–°è®°å½•
        if (Object.keys(finalAnswers).length === 0) {
          try {
            const records = [];
            for (let i = 0; i < localStorage.length; i++) {
              const key = localStorage.key(i);
              if (key && key.startsWith('dark_personality_')) {
                const data = localStorage.getItem(key);
                if (data) {
                  records.push(JSON.parse(data));
                }
              }
            }
            records.sort((a, b) => b.timestamp - a.timestamp);
            if (records.length > 0) {
              finalAnswers = records[0].answers;
            }
          } catch (error) {
            console.log('è¯»å–å†å²ç­”æ¡ˆå¤±è´¥:', error);
          }
        }

        const results = calculateResults(finalAnswers);
        const typeInfo = personalityTypes[results.personalityType] || {
          icon: "ğŸŒ‘",
          description: "æ‚¨çš„äººæ ¼ç‰¹å¾ç‹¬ç‰¹",
          careers: ["å¤šå…ƒå‘å±•"],
          color: "from-gray-700 to-gray-900"
        };

        return (
          <div className="min-h-screen dark-gradient p-3 sm:p-6">
            <div className="max-w-7xl mx-auto">

              {/* é¡¶éƒ¨äººæ ¼ç±»å‹å±•ç¤º */}
              <div className={`bg-gradient-to-r ${typeInfo.color} rounded-2xl p-8 sm:p-12 mb-8 text-white shadow-2xl neon-border`}>
                <div className="text-center">
                  <div className="text-7xl sm:text-9xl mb-6 animate-pulse">{typeInfo.icon}</div>
                  <h2 className="text-3xl sm:text-5xl font-bold mb-4">
                    {results.personalityType}
                  </h2>
                  <p className="text-lg sm:text-2xl mb-6 opacity-90">
                    {typeInfo.description}
                  </p>

                  {/* Då€¼å’Œç™¾åˆ†ä½ */}
                  <div className="flex flex-col sm:flex-row justify-center items-center space-y-4 sm:space-y-0 sm:space-x-8 mb-6">
                    <div className="bg-white bg-opacity-20 rounded-xl p-6 backdrop-blur-sm min-w-[200px]">
                      <div className="text-sm opacity-80 mb-2">Då€¼æ€»åˆ†</div>
                      <div className="text-5xl font-bold">{results.dScore}</div>
                      <div className="text-xs opacity-70 mt-1">æ»¡åˆ† 5.0</div>
                    </div>
                    <div className="bg-white bg-opacity-20 rounded-xl p-6 backdrop-blur-sm min-w-[200px]">
                      <div className="text-sm opacity-80 mb-2">ç™¾åˆ†ä½æ’å</div>
                      <div className="text-5xl font-bold">{results.percentile}%</div>
                      <div className="text-xs opacity-70 mt-1">è¶…è¿‡ {results.percentile}% çš„äºº</div>
                    </div>
                  </div>

                  {/* é€‚åˆæ–¹å‘ */}
                  {typeInfo.careers && typeInfo.careers.length > 0 && (
                    <div className="bg-white bg-opacity-20 rounded-xl p-5 backdrop-blur-sm">
                      <h3 className="font-bold text-lg mb-3">ğŸ¯ æ½œåœ¨ä¼˜åŠ¿é¢†åŸŸ</h3>
                      <div className="flex flex-wrap justify-center gap-2">
                        {typeInfo.careers.map((career, index) => (
                          <span
                            key={index}
                            className="bg-white bg-opacity-30 px-4 py-2 rounded-full text-sm font-medium"
                          >
                            {career}
                          </span>
                        ))}
                      </div>
                    </div>
                  )}
                </div>
              </div>

              {/* ä¸»ä½“å†…å®¹åŒºåŸŸ */}
              <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 mb-8">

                {/* é›·è¾¾å›¾ */}
                <div className="bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl p-6 border border-gray-700 shadow-xl">
                  <h3 className="text-2xl font-bold text-white mb-4 text-center flex items-center justify-center">
                    <span className="mr-2">ğŸ“Š</span>
                    åç»´äººæ ¼é›·è¾¾å›¾
                  </h3>
                  <div className="relative h-80 sm:h-96">
                    <canvas ref={chartRef}></canvas>
                  </div>
                  <div className="mt-4 text-center text-xs text-gray-400">
                    åˆ†æ•°èŒƒå›´ï¼š1.0ï¼ˆä½ï¼‰ï½ 5.0ï¼ˆé«˜ï¼‰
                  </div>
                </div>

                {/* TOP3 ç»´åº¦è¯¦è§£ */}
                <div className="space-y-4">
                  <h3 className="text-2xl font-bold text-white mb-4 flex items-center">
                    <span className="mr-2">â­</span>
                    æ‚¨çš„çªå‡ºç‰¹è´¨ TOP3
                  </h3>

                  {results.topDimensions.map(([dimName, score], index) => {
                    const dimInfo = dimensions[dimName];
                    const medals = ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰'];
                    const scoreNum = parseFloat(score);

                    return (
                      <div
                        key={dimName}
                        className="bg-gradient-to-br from-gray-900 to-gray-800 border-2 rounded-xl p-5 shadow-lg hover:shadow-xl transition-all"
                        style={{ borderColor: dimInfo.color + '60' }}
                      >
                        <div className="flex items-start justify-between mb-3">
                          <div className="flex items-center space-x-3 flex-1">
                            <span className="text-4xl">{medals[index]}</span>
                            <div className="flex-1">
                              <div className="flex items-center space-x-2 mb-1">
                                <span className="text-3xl">{dimInfo.icon}</span>
                                <div>
                                  <div className="font-bold text-lg text-white">{dimName}</div>
                                  <div className="text-xs text-gray-400">{dimInfo.nameEn}</div>
                                </div>
                              </div>
                              <div className="text-sm text-gray-300 mt-2">
                                {dimInfo.description}
                              </div>
                            </div>
                          </div>

                          <div className="text-right ml-4">
                            <div className="text-3xl font-bold" style={{ color: dimInfo.color }}>
                              {score}
                            </div>
                            <div className="text-xs text-gray-400">/ 5.0</div>
                          </div>
                        </div>

                        {/* è¿›åº¦æ¡ */}
                        <div className="w-full bg-gray-700 rounded-full h-2.5 overflow-hidden">
                          <div
                            className="h-2.5 rounded-full transition-all duration-1000"
                            style={{
                              width: `${(scoreNum / 5) * 100}%`,
                              backgroundColor: dimInfo.color,
                              boxShadow: `0 0 10px ${dimInfo.color}`
                            }}
                          ></div>
                        </div>

                        {/* æ°´å¹³æ ‡ç­¾ */}
                        <div className="mt-2 text-xs text-gray-400 flex justify-between">
                          <span>ä½</span>
                          <span>ä¸­</span>
                          <span>é«˜</span>
                        </div>
                      </div>
                    );
                  })}
                </div>
              </div>

              {/* å®Œæ•´10ç»´åº¦è¯„åˆ† */}
              <div className="bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl p-6 sm:p-8 mb-8 border border-gray-700 shadow-xl">
                <h3 className="text-2xl font-bold text-white mb-6 flex items-center">
                  <span className="mr-2">ğŸ“ˆ</span>
                  å®Œæ•´ç»´åº¦è¯„ä¼°
                </h3>
                <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                  {Object.entries(results.dimensionAvgScores)
                    .sort(([, a], [, b]) => parseFloat(b) - parseFloat(a))
                    .map(([dimName, score]) => {
                      const dimInfo = dimensions[dimName];
                      const scoreNum = parseFloat(score);

                      let level = 'ä½';
                      let levelColor = 'text-green-400';
                      let levelBg = 'bg-green-900';

                      if (scoreNum >= 4.0) {
                        level = 'å¾ˆé«˜';
                        levelColor = 'text-red-400';
                        levelBg = 'bg-red-900';
                      } else if (scoreNum >= 3.5) {
                        level = 'é«˜';
                        levelColor = 'text-orange-400';
                        levelBg = 'bg-orange-900';
                      } else if (scoreNum >= 3.0) {
                        level = 'ä¸­ç­‰';
                        levelColor = 'text-yellow-400';
                        levelBg = 'bg-yellow-900';
                      } else if (scoreNum >= 2.5) {
                        level = 'ä¸­ä½';
                        levelColor = 'text-blue-400';
                        levelBg = 'bg-blue-900';
                      }

                      return (
                        <div
                          key={dimName}
                          className="bg-gray-800 bg-opacity-50 rounded-xl p-4 border border-gray-700 hover:border-gray-600 transition-all"
                        >
                          <div className="flex items-center justify-between mb-3">
                            <div className="flex items-center space-x-2 flex-1">
                              <span className="text-2xl">{dimInfo.icon}</span>
                              <div className="flex-1">
                                <div className="font-semibold text-white text-sm">
                                  {dimName}
                                </div>
                                <div className="text-xs text-gray-400">
                                  {dimInfo.nameEn}
                                </div>
                              </div>
                            </div>
                            <div className="flex items-center space-x-2">
                              <span
                                className="font-bold text-xl"
                                style={{ color: dimInfo.color }}
                              >
                                {score}
                              </span>
                              <span
                                className={`text-xs px-2 py-1 rounded-full ${levelBg} ${levelColor} font-medium`}
                              >
                                {level}
                              </span>
                            </div>
                          </div>

                          <div className="w-full bg-gray-700 rounded-full h-1.5">
                            <div
                              className="h-1.5 rounded-full transition-all duration-1000"
                              style={{
                                width: `${(scoreNum / 5) * 100}%`,
                                backgroundColor: dimInfo.color
                              }}
                            ></div>
                          </div>
                        </div>
                      );
                    })}
                </div>
              </div>

              {/* è¯¦ç»†è§£è¯» */}
              <div className="bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl p-6 sm:p-8 mb-8 border border-purple-700 shadow-xl">
                <h3 className="text-2xl font-bold text-white mb-6 flex items-center">
                  <span className="mr-2">ğŸ’¡</span>
                  ä¸ªæ€§åŒ–åˆ†ææŠ¥å‘Š
                </h3>

                <div className="space-y-6 text-gray-300 leading-relaxed">
                  {/* æ€»ä½“è¯„ä»· */}
                  <div className="bg-purple-900 bg-opacity-20 rounded-lg p-5 border border-purple-700">
                    <h4 className="font-bold text-lg text-purple-300 mb-3">ğŸ“Œ æ€»ä½“è¯„ä»·</h4>
                    <p>
                      æ‚¨çš„é»‘æš—äººæ ¼Då€¼ä¸º <strong className="text-purple-400">{results.dScore}</strong>ï¼Œ
                      åœ¨äººç¾¤ä¸­å¤„äº <strong className="text-purple-400">{results.percentile}%</strong> çš„ä½ç½®ã€‚
                      {parseFloat(results.dScore) >= 3.5 && (
                        <span> æ‚¨å±•ç°å‡ºè¾ƒä¸ºæ˜æ˜¾çš„é»‘æš—äººæ ¼ç‰¹è´¨ï¼Œè¿™åœ¨ç‰¹å®šæƒ…å¢ƒä¸‹å¯èƒ½æˆä¸ºæ‚¨çš„ä¼˜åŠ¿ã€‚</span>
                      )}
                      {parseFloat(results.dScore) >= 2.5 && parseFloat(results.dScore) < 3.5 && (
                        <span> æ‚¨çš„é»‘æš—äººæ ¼ç‰¹è´¨å¤„äºä¸­ç­‰æ°´å¹³ï¼Œæ—¢æœ‰ç­–ç•¥æ€§æ€ç»´ï¼Œä¹Ÿä¿æŒç€ä¸€å®šçš„ç¤¾ä¼šé€‚åº”æ€§ã€‚</span>
                      )}
                      {parseFloat(results.dScore) < 2.5 && (
                        <span> æ‚¨çš„é»‘æš—äººæ ¼ç‰¹è´¨ç›¸å¯¹è¾ƒä½ï¼Œå€¾å‘äºæ›´åŠ åˆ©ä»–å’Œå…±æƒ…çš„è¡Œä¸ºæ¨¡å¼ã€‚</span>
                      )}
                    </p>
                  </div>

                  {/* ä¼˜åŠ¿åˆ†æ */}
                  <div className="bg-blue-900 bg-opacity-20 rounded-lg p-5 border border-blue-700">
                    <h4 className="font-bold text-lg text-blue-300 mb-3">âœ¨ ç‰¹è´¨ä¼˜åŠ¿</h4>
                    <p>
                      æ‚¨åœ¨ <strong className="text-blue-400">{results.topDimensions[0][0]}</strong> æ–¹é¢è¡¨ç°çªå‡ºï¼Œ
                      è¿™æ„å‘³ç€æ‚¨{' '}
                      {results.topDimensions[0][0] === 'é©¬åŸºé›…ç»´åˆ©ä¸»ä¹‰' && 'å…·æœ‰å‡ºè‰²çš„ç­–ç•¥æ€ç»´å’Œè°ˆåˆ¤èƒ½åŠ›ï¼Œå–„äºæŠŠæ¡å±€åŠ¿'}
                      {results.topDimensions[0][0] === 'è‡ªæ‹' && 'æ‹¥æœ‰å¼ºå¤§çš„è‡ªä¿¡å¿ƒå’Œé¢†å¯¼é­…åŠ›ï¼Œèƒ½å¤Ÿæ¿€åŠ±ä»–äºº'}
                      {results.topDimensions[0][0] === 'ç²¾ç¥ç—…æ€' && 'èƒ½åœ¨å‹åŠ›ä¸‹ä¿æŒå†·é™ï¼Œåšå‡ºç†æ€§å†³ç­–'}
                      {results.topDimensions[0][0] === 'æ–½è™å€¾å‘' && 'åœ¨ç«äº‰ç¯å¢ƒä¸­è¡¨ç°å¼ºåŠ¿ï¼Œä¸æƒ§æ€•å†²çª'}
                      {results.topDimensions[0][0] === 'åˆ©å·±ä¸»ä¹‰' && 'èƒ½å¤Ÿæ˜ç¡®è‡ªå·±çš„åˆ©ç›Šå¹¶åšå®šæå«'}
                      {results.topDimensions[0][0] === 'å¿ƒç†ç‰¹æƒæ„Ÿ' && 'æœ‰è¾ƒé«˜çš„è‡ªæˆ‘æœŸå¾…å’Œè¿½æ±‚å“è¶Šçš„åŠ¨åŠ›'}
                      {!['é©¬åŸºé›…ç»´åˆ©ä¸»ä¹‰', 'è‡ªæ‹', 'ç²¾ç¥ç—…æ€', 'æ–½è™å€¾å‘', 'åˆ©å·±ä¸»ä¹‰', 'å¿ƒç†ç‰¹æƒæ„Ÿ'].includes(results.topDimensions[0][0]) && 'å…·æœ‰ç‹¬ç‰¹çš„äººæ ¼ç‰¹è´¨'}
                      ã€‚è¿™ç§ç‰¹è´¨åœ¨{' '}
                      {typeInfo.careers.slice(0, 2).join('ã€')}ç­‰é¢†åŸŸå¯èƒ½æˆä¸ºæ‚¨çš„ä¼˜åŠ¿ã€‚
                    </p>
                  </div>

                  {/* å‘å±•å»ºè®® */}
                  <div className="bg-green-900 bg-opacity-20 rounded-lg p-5 border border-green-700">
                    <h4 className="font-bold text-lg text-green-300 mb-3">ğŸ¯ å‘å±•å»ºè®®</h4>
                    <ul className="space-y-2">
                      <li className="flex items-start">
                        <span className="text-green-400 mr-2 flex-shrink-0">â€¢</span>
                        <span>
                          <strong>å‘æŒ¥ä¼˜åŠ¿ï¼š</strong>åœ¨{typeInfo.careers[0] || 'é€‚åˆçš„é¢†åŸŸ'}ä¸­ï¼Œ
                          æ‚¨çš„{results.topDimensions[0][0]}ç‰¹è´¨å¯ä»¥å¸®åŠ©æ‚¨è·å¾—æˆåŠŸã€‚
                        </span>
                      </li>
                      <li className="flex items-start">
                        <span className="text-green-400 mr-2 flex-shrink-0">â€¢</span>
                        <span>
                          <strong>å¹³è¡¡å‘å±•ï¼š</strong>æ³¨æ„åœ¨è¿½æ±‚ç›®æ ‡æ—¶ä¿æŒé“å¾·åº•çº¿ï¼Œ
                          é¿å…è¿‡åº¦ä½¿ç”¨æ“çºµæˆ–å†·é…·çš„æ‰‹æ®µã€‚
                        </span>
                      </li>
                      <li className="flex items-start">
                        <span className="text-green-400 mr-2 flex-shrink-0">â€¢</span>
                        <span>
                          <strong>è‡ªæˆ‘è§‰å¯Ÿï¼š</strong>å®šæœŸåæ€è‡ªå·±çš„è¡Œä¸ºå¯¹ä»–äººçš„å½±å“ï¼Œ
                          åŸ¹å…»æ›´å¤šçš„å…±æƒ…èƒ½åŠ›å’Œç¤¾ä¼šè´£ä»»æ„Ÿã€‚
                        </span>
                      </li>
                      <li className="flex items-start">
                        <span className="text-green-400 mr-2 flex-shrink-0">â€¢</span>
                        <span>
                          <strong>å»ºç«‹è¿æ¥ï¼š</strong>å³ä½¿å…·æœ‰è¾ƒé«˜çš„æš—é»‘ç‰¹è´¨ï¼Œ
                          ä¹Ÿè¦æ³¨é‡å»ºç«‹çœŸè¯šçš„äººé™…å…³ç³»ï¼Œè¿™å¯¹é•¿æœŸå‘å±•è‡³å…³é‡è¦ã€‚
                        </span>
                      </li>
                    </ul>
                  </div>

                  {/* æ³¨æ„äº‹é¡¹ */}
                  <div className="bg-red-900 bg-opacity-20 rounded-lg p-5 border border-red-700">
                    <h4 className="font-bold text-lg text-red-300 mb-3">âš ï¸ é‡è¦æç¤º</h4>
                    <ul className="space-y-2 text-sm">
                      <li className="flex items-start">
                        <span className="text-red-400 mr-2 flex-shrink-0">â€¢</span>
                        <span>é»‘æš—äººæ ¼ç‰¹è´¨ä¸ç­‰äºç²¾ç¥ç–¾ç—…æˆ–é“å¾·ç¼ºé™·</span>
                      </li>
                      <li className="flex items-start">
                        <span className="text-red-400 mr-2 flex-shrink-0">â€¢</span>
                        <span>è¿™äº›ç‰¹è´¨åœ¨é€‚å½“æƒ…å¢ƒä¸‹å¯èƒ½æ˜¯ä¼˜åŠ¿ï¼ˆå¦‚å•†ä¸šè°ˆåˆ¤ã€å±æœºå¤„ç†ï¼‰</span>
                      </li>
                      <li className="flex items-start">
                        <span className="text-red-400 mr-2 flex-shrink-0">â€¢</span>
                        <span>è¿‡åº¦çš„æš—é»‘ç‰¹è´¨å¯èƒ½å½±å“äººé™…å…³ç³»å’Œé•¿æœŸå‘å±•</span>
                      </li>
                      <li className="flex items-start">
                        <span className="text-red-400 mr-2 flex-shrink-0">â€¢</span>
                        <span>æœ¬æµ‹è¯„ä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆå¿ƒç†è¯Šæ–­ï¼Œå¦‚æœ‰å›°æ‰°è¯·å¯»æ±‚ä¸“ä¸šå¸®åŠ©</span>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>

              {/* èµ„æ–™æ¨è */}
              <div className="bg-gradient-to-br from-cyan-900 to-teal-900 rounded-2xl p-6 sm:p-8 mb-8 border border-cyan-700 shadow-xl">
                <h3 className="text-2xl font-bold text-white mb-6 flex items-center">
                  <span className="mr-2">ğŸ“š</span>
                  å¿ƒç†æˆé•¿èµ„æºæ¨è
                </h3>
                <p className="text-gray-300 text-center mb-6">
                  æ¢ç´¢å†…å¿ƒï¼Œå…³ç…§è‡ªå·±çš„æ¯ä¸€é¢ Â· æ‰©å±•é˜…è¯»ä¸æ·±åº¦å­¦ä¹ 
                </p>
                <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                  <a
                    href="https://xhslink.com/m/9D0epdzjqnw"
                    target="_blank"
                    rel="noopener noreferrer"
                    className="bg-cyan-800 hover:bg-cyan-700 rounded-xl p-5 transition-all transform hover:scale-105 shadow-lg hover:shadow-cyan-500/50 border border-cyan-600 hover:border-cyan-500 group"
                  >
                    <div className="flex items-start space-x-4">
                      <span className="text-4xl group-hover:scale-125 transition-transform">ğŸ“–</span>
                      <div className="flex-1">
                        <h4 className="font-bold text-white text-lg mb-2">
                          æ›´å¤šå¿ƒç†è‡ªæµ‹å·¥å…·
                        </h4>
                        <p className="text-sm text-cyan-200">
                          æ¢ç´¢å¤šç»´åº¦å¿ƒç†è¯„æµ‹ï¼Œæ·±å…¥äº†è§£è‡ªå·±çš„å„ä¸ªæ–¹é¢
                        </p>
                      </div>
                      <span className="text-2xl opacity-50 group-hover:opacity-100 transition-opacity">â†’</span>
                    </div>
                  </a>

                  <a
                    href="https://pan.quark.cn/s/266f60aa5bbf"
                    target="_blank"
                    rel="noopener noreferrer"
                    className="bg-teal-800 hover:bg-teal-700 rounded-xl p-5 transition-all transform hover:scale-105 shadow-lg hover:shadow-teal-500/50 border border-teal-600 hover:border-teal-500 group"
                  >
                    <div className="flex items-start space-x-4">
                      <span className="text-4xl group-hover:scale-125 transition-transform">ğŸ’¡</span>
                      <div className="flex-1">
                        <h4 className="font-bold text-white text-lg mb-2">
                          2026é‡å¯äººç”Ÿ365å¤©æ—¶é—´è§„åˆ’è¡¨
                        </h4>
                        <p className="text-sm text-teal-200">
                          ç§‘å­¦è§„åˆ’æ¯ä¸€å¤©ï¼Œæ‰“é€ æ›´å¥½çš„è‡ªå·±
                        </p>
                      </div>
                      <span className="text-2xl opacity-50 group-hover:opacity-100 transition-opacity">â†’</span>
                    </div>
                  </a>
                </div>
                <p className="text-center text-xs text-gray-400 mt-5">
                  ğŸ’¬ è¿™äº›èµ„æºå¯å¸®åŠ©æ‚¨è¿›ä¸€æ­¥æ¢ç´¢å¿ƒç†å­¦çŸ¥è¯†ã€è§„åˆ’ä¸ªäººæˆé•¿
                </p>
              </div>

              {/* æ“ä½œæŒ‰é’®åŒºåŸŸ */}
              <div className="flex flex-col sm:flex-row gap-4 justify-center items-center mb-8">
                <button
                  onClick={() => {
                    const text = generateShareText(results, typeInfo);
                    navigator.clipboard.writeText(text).then(() => {
                      alert('âœ… ç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
                    }).catch(() => {
                      alert('âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
                    });
                  }}
                  className="w-full sm:w-auto bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-bold py-4 px-8 rounded-xl transition-all shadow-lg hover:shadow-green-500/50 flex items-center justify-center space-x-2"
                >
                  <span>ğŸ“‹</span>
                  <span>å¤åˆ¶ç»“æœ</span>
                </button>

                <button
                  onClick={() => {
                    setCurrentPage('intro');
                    setCurrentQuestion(0);
                    setAnswers({});
                  }}
                  className="w-full sm:w-auto bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold py-4 px-8 rounded-xl transition-all shadow-lg hover:shadow-purple-500/50 flex items-center justify-center space-x-2"
                >
                  <span>ğŸ”„</span>
                  <span>é‡æ–°æµ‹è¯„</span>
                </button>

                <button
                  onClick={() => window.print()}
                  className="w-full sm:w-auto bg-gray-700 hover:bg-gray-600 text-white font-bold py-4 px-8 rounded-xl transition-all border border-gray-600 flex items-center justify-center space-x-2"
                >
                  <span>ğŸ–¨ï¸</span>
                  <span>æ‰“å°æŠ¥å‘Š</span>
                </button>
              </div>

              {/* é¡µè„šä¿¡æ¯ */}
              <div className="text-center text-sm text-gray-500">
                <p>ğŸ”’ æµ‹è¯„ç»“æœå·²è‡ªåŠ¨ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨ï¼Œä¸ä¼šä¸Šä¼ æœåŠ¡å™¨</p>
                <p className="mt-2 text-xs">
                  åŸºäº Dark Triad, Dark Factor å¿ƒç†å­¦ç ”ç©¶ Â· ä»…ä¾›è‡ªæˆ‘è®¤çŸ¥å‚è€ƒ
                </p>
              </div>
            </div>
          </div>
        );
      };

      // ç”Ÿæˆåˆ†äº«æ–‡æœ¬
      const generateShareText = (results, typeInfo) => {
        return `ğŸŒ‘ é»‘æš—äººæ ¼ç‰¹è´¨æµ‹è¯„ç»“æœ

ã€äººæ ¼ç±»å‹ã€‘${results.personalityType} ${typeInfo.icon}
${typeInfo.description}

ã€æ ¸å¿ƒæ•°æ®ã€‘
â€¢ Då€¼æ€»åˆ†ï¼š${results.dScore} / 5.0
â€¢ ç™¾åˆ†ä½ï¼š${results.percentile}%

ã€çªå‡ºç‰¹è´¨ TOP3ã€‘
${results.topDimensions.map(([dim, score], idx) =>
          `${idx + 1}. ${dimensions[dim].icon} ${dim} - ${score}åˆ†`
        ).join('\n')}

ã€é€‚åˆé¢†åŸŸã€‘
${typeInfo.careers.slice(0, 3).join(' Â· ')}

---
ğŸ’¡ äº†è§£äººæ ¼æš—é¢ï¼Œæ¢ç´¢çœŸå®è‡ªæˆ‘
âš ï¸ æµ‹è¯„ç»“æœä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆè¯Šæ–­

#é»‘æš—äººæ ¼ #å¿ƒç†æµ‹è¯„ #è‡ªæˆ‘è®¤çŸ¥`;
      };

      // å›¾è¡¨åˆå§‹åŒ–
      useEffect(() => {
        if (currentPage === 'result' && chartRef.current && typeof Chart !== 'undefined') {
          const results = calculateResults();
          const ctx = chartRef.current.getContext('2d');

          // é”€æ¯ç°æœ‰å›¾è¡¨
          const existingChart = Chart.getChart(ctx);
          if (existingChart) {
            existingChart.destroy();
          }

          const dimensionNames = Object.keys(dimensions);
          const chartData = dimensionNames.map(dim =>
            parseFloat(results.dimensionAvgScores[dim])
          );

          const colors = dimensionNames.map(dim => dimensions[dim].color);

          try {
            new Chart(ctx, {
              type: 'radar',
              data: {
                labels: dimensionNames,
                datasets: [{
                  label: 'æ‚¨çš„å¾—åˆ†',
                  data: chartData,
                  borderColor: 'rgba(139, 92, 246, 1)',
                  backgroundColor: 'rgba(139, 92, 246, 0.2)',
                  pointBackgroundColor: colors,
                  pointBorderColor: '#fff',
                  pointHoverBackgroundColor: '#fff',
                  pointHoverBorderColor: colors,
                  pointRadius: 6,
                  pointHoverRadius: 8,
                  borderWidth: 3
                }]
              },
              options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                  r: {
                    beginAtZero: true,
                    min: 0,
                    max: 5,
                    ticks: {
                      stepSize: 1,
                      color: '#9ca3af',
                      backdropColor: 'transparent',
                      font: {
                        size: 12
                      }
                    },
                    pointLabels: {
                      color: '#d1d5db',
                      font: {
                        size: 11,
                        weight: 'bold'
                      }
                    },
                    grid: {
                      color: 'rgba(156, 163, 175, 0.2)'
                    },
                    angleLines: {
                      color: 'rgba(156, 163, 175, 0.2)'
                    }
                  }
                },
                plugins: {
                  legend: {
                    display: false
                  },
                  tooltip: {
                    callbacks: {
                      label: function (context) {
                        return `${context.label}: ${context.parsed.r.toFixed(2)} åˆ†`;
                      }
                    }
                  }
                }
              }
            });
          } catch (error) {
            console.log('å›¾è¡¨åˆ›å»ºå¤±è´¥:', error);
          }
        }
      }, [currentPage, answers]);

      // ä¸»æ¸²æŸ“å‡½æ•°
      switch (currentPage) {
        case 'intro':
          return renderIntro();
        case 'test':
          return renderTest();
        case 'result':
          return renderResult();
        default:
          return renderIntro();
      }
    };

    // æ¸²æŸ“åº”ç”¨åˆ°é¡µé¢
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<DarkPersonalityAssessment />);
  </script>
</body>

</html>